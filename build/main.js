/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function f(t){this._store=t}function l(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new l(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(f,"_store",["name","keyPath","indexNames","autoIncrement"]),s(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(f,"_store",IDBObjectStore,["deleteIndex"]),l.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},o(l,"_tx",["objectStoreNames","mode"]),a(l,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new l(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[f,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,f].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}function c(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"indexedDB"in self&&null!=indexedDB}function y(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function m(){return!(!navigator||!navigator.cookieEnabled)}var g=function(t){function n(e,r,i){var o=t.call(this,r)||this;return o.code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return e(n,t),n}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new g(i,a,r);return u},t}();function w(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){var n=new _(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295,f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var _=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function S(){}function A(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}var N,k=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),O="[DEFAULT]",D=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=O);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new f;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:O,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(O)}catch(t){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=a(i.value,2),u=o[0],c=o[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService(h);c.resolve(f)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=O),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===O?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:O:t},t}(),C=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new D(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function P(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var x,L=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(x||(x={}));var R,M={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},V=x.INFO,j=((N={})[x.DEBUG]="log",N[x.VERBOSE]="log",N[x.INFO]="info",N[x.WARN]="warn",N[x.ERROR]="error",N),U=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=j[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,P(["["+i+"]  "+t.name+":"],n))}},F=function(){function t(t){this.name=t,this._logLevel=V,this._logHandler=U,this._userLogHandler=null,L.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in x))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?M[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,P([this,x.DEBUG],t)),this._logHandler.apply(this,P([this,x.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,P([this,x.VERBOSE],t)),this._logHandler.apply(this,P([this,x.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,P([this,x.INFO],t)),this._logHandler.apply(this,P([this,x.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,P([this,x.WARN],t)),this._logHandler.apply(this,P([this,x.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,P([this,x.ERROR],t)),this._logHandler.apply(this,P([this,x.ERROR],t))},t}();function q(t){L.forEach((function(e){e.setLogLevel(t)}))}var H,B=((R={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",R["bad-app-name"]="Illegal App name: '{$appName}",R["duplicate-app"]="Firebase App named '{$appName}' already exists",R["app-deleted"]="Firebase App named '{$appName}' already deleted",R["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",R["invalid-log-argument"]="First argument to `onLog` must be null or a function.",R),K=new b("app","Firebase",B),G="@firebase/app",z="[DEFAULT]",W=((H={})[G]="fire-core",H["@firebase/analytics"]="fire-analytics",H["@firebase/auth"]="fire-auth",H["@firebase/database"]="fire-rtdb",H["@firebase/functions"]="fire-fn",H["@firebase/installations"]="fire-iid",H["@firebase/messaging"]="fire-fcm",H["@firebase/performance"]="fire-perf",H["@firebase/remote-config"]="fire-rc",H["@firebase/storage"]="fire-gcs",H["@firebase/firestore"]="fire-fst",H["fire-js"]="fire-js",H["firebase-wrapper"]="fire-js-all",H),J=new F("@firebase/app"),X=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h(void 0,t),this.container=new C(e.name),this._addComponent(new k("app",(function(){return o}),"PUBLIC"));try{for(var a=s(this.firebase_.INTERNAL.components.values()),u=a.next();!u.done;u=a.next()){var c=u.value;this._addComponent(c)}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=z),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=z),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){J.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw K.create("app-deleted",{appName:this.name_})},t}();X.prototype.name&&X.prototype.options||X.prototype.delete||console.log("dc");var Y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=z);var s=o.name;if("string"!=typeof s||!s)throw K.create("bad-app-name",{appName:String(s)});if(E(e,s))throw K.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=W[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void J.warn(u.join(" "))}o(new k(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:q,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw K.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=M[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:x[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=L;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!E(e,t=t||z))throw K.create("no-app",{appName:t});return e[t]}function o(o){var a,u,c=o.name;if(n.has(c))return J.debug("There were multiple attempts to register component "+c+"."),"PUBLIC"===o.type?r[c]:null;if(n.set(c,o),"PUBLIC"===o.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[c])throw K.create("invalid-app-argument",{appName:c});return t[c]()};void 0!==o.serviceProps&&h(f,o.serviceProps),r[c]=f,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,c).apply(this,o.multipleInstances?t:[])}}try{for(var l=s(Object.keys(e)),p=l.next();!p.done;p=l.next()){var d=p.value;e[d]._addComponent(o)}}catch(t){a={error:t}}finally{try{p&&!p.done&&(u=l.return)&&u.call(l)}finally{if(a)throw a.error}}return"PUBLIC"===o.type?r[c]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(X);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h(e,t)},createSubscribe:T,ErrorFactory:b,deepExtend:h}),e}(),$=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){J.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Q=self.firebase.SDK_VERSION;Q&&Q.indexOf("LITE")>=0&&J.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Z=Y.initializeApp;Y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p()&&J.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Z.apply(void 0,t)};var tt=Y;!function(t,e){t.INTERNAL.registerComponent(new k("platform-logger",(function(t){return new $(t)}),"PRIVATE")),t.registerVersion(G,"0.6.13",void 0),t.registerVersion("fire-js","")}(tt);const et=tt;et.registerVersion("firebase","8.2.1","app");var nt,rt=n(676),it="w:0.4.19",ot=((nt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',nt["not-registered"]="Firebase Installation is not registered.",nt["installation-not-found"]="Firebase Installation not found.",nt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',nt["app-offline"]="Could not process request. Application offline.",nt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",nt),st=new b("installations","Installations",ot);function at(t){return t instanceof g&&t.code.includes("request-failed")}function ut(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function ct(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function ht(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,st.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ft(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function lt(t,e){var n=e.refreshToken,r=ft(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function pt(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function dt(t,e){var n=e.fid;return i(this,void 0,void 0,(function(){var e,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return e=ut(t),r=ft(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:it},s={method:"POST",headers:r,body:JSON.stringify(i)},[4,pt((function(){return fetch(e,s)}))];case 1:return(a=o.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,{fid:(u=o.sent()).fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:ct(u.authToken)}];case 3:return[4,ht("Create Installation",a)];case 4:throw o.sent()}}))}))}function vt(t){return new Promise((function(e){setTimeout(e,t)}))}var yt=/^[cdef][\w-]{21}$/;function mt(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,u(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return yt.test(e)?e:""}catch(t){return""}}function gt(t){return t.appName+"!"+t.appId}var bt=new Map;function wt(t,e){var n=gt(t);It(n,e),function(t,e){var n=Tt();n&&n.postMessage({key:t,fid:e}),_t()}(n,e)}function It(t,e){var n,r,i=bt.get(t);if(i)try{for(var o=s(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Et=null;function Tt(){return!Et&&"BroadcastChannel"in self&&((Et=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){It(t.data.key,t.data.fid)}),Et}function _t(){0===bt.size&&Et&&(Et.close(),Et=null)}var St,At="firebase-installations-store",Nt=null;function kt(){return Nt||(Nt=(0,rt.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(At)}}))),Nt}function Ot(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return n=gt(t),[4,kt()];case 1:return r=o.sent(),i=r.transaction(At,"readwrite"),[4,(s=i.objectStore(At)).get(n)];case 2:return a=o.sent(),[4,s.put(e,n)];case 3:return o.sent(),[4,i.complete];case 4:return o.sent(),a&&a.fid===e.fid||wt(t,e.fid),[2,e]}}))}))}function Dt(t){return i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return e=gt(t),[4,kt()];case 1:return n=i.sent(),[4,(r=n.transaction(At,"readwrite")).objectStore(At).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ct(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=gt(t),[4,kt()];case 1:return r=o.sent(),i=r.transaction(At,"readwrite"),[4,(s=i.objectStore(At)).get(n)];case 2:return a=o.sent(),void 0!==(u=e(a))?[3,4]:[4,s.delete(n)];case 3:return o.sent(),[3,6];case 4:return[4,s.put(u,n)];case 5:o.sent(),o.label=6;case 6:return[4,i.complete];case 7:return o.sent(),!u||a&&a.fid===u.fid||wt(t,u.fid),[2,u]}}))}))}function Pt(t){return i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(s){switch(s.label){case 0:return[4,Ct(t,(function(n){var r=function(t){return Rt(t||{fid:mt(),registrationStatus:0})}(n),s=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(st.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,dt(t,e)];case 1:return n=i.sent(),[2,Ot(t,n)];case 2:return at(r=i.sent())&&409===r.customData.serverCode?[4,Dt(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Ot(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:xt(t)}:{installationEntry:e}}(t,r);return e=s.registrationPromise,s.installationEntry}))];case 1:return""!==(n=s.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=s.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function xt(t){return i(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,Lt(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,vt(100)];case 3:return o.sent(),[4,Lt(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Pt(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Lt(t){return Ct(t,(function(t){if(!t)throw st.create("installation-not-found");return Rt(t)}))}function Rt(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Mt(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return i(this,void 0,void 0,(function(){var t,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return t=function(t,e){var n=e.fid;return ut(t)+"/"+n+"/authTokens:generate"}(n,e),i=lt(n,e),(s=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),a={installation:{sdkVersion:it}},u={method:"POST",headers:i,body:JSON.stringify(a)},[4,pt((function(){return fetch(t,u)}))];case 1:return(c=o.sent()).ok?[4,c.json()]:[3,3];case 2:return[2,ct(o.sent())];case 3:return[4,ht("Generate Auth Token",c)];case 4:throw o.sent()}}))}))}function Vt(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var n,s,a;return o(this,(function(u){switch(u.label){case 0:return[4,Ct(t.appConfig,(function(s){if(!Ut(s))throw st.create("not-registered");var a,u=s.authToken;if(!e&&(2===(a=u).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(a)))return s;if(1===u.requestStatus)return n=function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return[4,jt(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,vt(100)];case 3:return i.sent(),[4,jt(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Vt(t,e)]:[2,r]}}))}))}(t,e),s;if(!navigator.onLine)throw st.create("app-offline");var c=function(t){var e={requestStatus:1,requestTime:Date.now()};return r(r({},t),{authToken:e})}(s);return n=function(t,e){return i(this,void 0,void 0,(function(){var n,i,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Mt(t,e)];case 1:return n=o.sent(),s=r(r({},e),{authToken:n}),[4,Ot(t.appConfig,s)];case 2:return o.sent(),[2,n];case 3:return!at(i=o.sent())||401!==i.customData.serverCode&&404!==i.customData.serverCode?[3,5]:[4,Dt(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return s=r(r({},e),{authToken:{requestStatus:0}}),[4,Ot(t.appConfig,s)];case 6:o.sent(),o.label=7;case 7:throw i;case 8:return[2]}}))}))}(t,c),c}))];case 1:return s=u.sent(),n?[4,n]:[3,3];case 2:return a=u.sent(),[3,4];case 3:a=s.authToken,u.label=4;case 4:return[2,a]}}))}))}function jt(t){return Ct(t,(function(t){if(!Ut(t))throw st.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?r(r({},t),{authToken:{requestStatus:0}}):t}))}function Ut(t){return void 0!==t&&2===t.registrationStatus}function Ft(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,Pt(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function qt(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return n=function(t,e){var n=e.fid;return ut(t)+"/"+n}(t,e),r=lt(t,e),i={method:"DELETE",headers:r},[4,pt((function(){return fetch(n,i)}))];case 1:return(s=o.sent()).ok?[3,3]:[4,ht("Delete Installation",s)];case 2:throw o.sent();case 3:return[2]}}))}))}function Ht(t){return st.create("missing-app-config-values",{valueName:t})}(St=et).INTERNAL.registerComponent(new k("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Ht("App Configuration");if(!t.name)throw Ht("App Name");try{for(var r=s(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Ht(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return[4,Pt(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Vt(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,Ft(t.appConfig)];case 1:return n.sent(),[4,Vt(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Ct(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw st.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw st.create("app-offline");case 3:return[4,qt(e,n)];case 4:return r.sent(),[4,Dt(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Tt();var n=gt(t),r=bt.get(n);r||(r=new Set,bt.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=gt(t),r=bt.get(n);r&&(r.delete(e),0===r.size&&bt.delete(n),_t())}(n,e)}}(n,t)}}}),"PUBLIC")),St.registerVersion("@firebase/installations","0.4.19");var Bt,Kt,Gt="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(Bt||(Bt={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(Kt||(Kt={}));var zt,Wt=new F("@firebase/analytics");function Jt(t,e,n,r,s,a){return i(this,void 0,void 0,(function(){var i,u,c,h;return o(this,(function(o){switch(o.label){case 0:i=r[s],o.label=1;case 1:return o.trys.push([1,7,,8]),i?[4,e[i]]:[3,3];case 2:return o.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return u=o.sent(),(c=u.find((function(t){return t.measurementId===s})))?[4,e[c.appId]]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return h=o.sent(),Wt.error(h),[3,8];case 8:return t(Bt.CONFIG,s,a),[2]}}))}))}function Xt(t,e,n,r,s){return i(this,void 0,void 0,(function(){var i,a,u,c,h,f,l,p;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),i=[],s&&s.send_to?(a=s.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(u=o.sent(),c=function(t){var n=u.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return i=[],"break";i.push(r)},h=0,f=a;h<f.length&&(l=f[h],"break"!==c(l));h++);o.label=2;case 2:return 0===i.length&&(i=Object.values(e)),[4,Promise.all(i)];case 3:return o.sent(),t(Bt.EVENT,r,s||{}),[3,5];case 4:return p=o.sent(),Wt.error(p),[3,5];case 5:return[2]}}))}))}var Yt=((zt={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",zt["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",zt["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",zt["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zt["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zt["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",zt["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",zt["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',zt["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',zt),$t=new b("analytics","Analytics",Yt),Qt=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Zt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function te(t){var e;return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:Zt(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(s,i)];case 1:if(200===(a=o.sent()).status||304===a.status)return[3,6];u="",o.label=2;case 2:return o.trys.push([2,4,,5]),[4,a.json()];case 3:return c=o.sent(),(null===(e=c.error)||void 0===e?void 0:e.message)&&(u=c.error.message),[3,5];case 4:return o.sent(),[3,5];case 5:throw $t.create("config-fetch-failed",{httpStatus:a.status,responseMessage:u});case 6:return[2,a.json()]}}))}))}function ee(t,e,n,r){var s=e.throttleEndTimeMillis,a=e.backoffCount;return void 0===r&&(r=Qt),i(this,void 0,void 0,(function(){var e,i,u,c,h,f,l;return o(this,(function(o){switch(o.label){case 0:e=t.appId,i=t.measurementId,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,ne(n,s)];case 2:return o.sent(),[3,4];case 3:if(u=o.sent(),i)return Wt.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+i+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:i}];throw u;case 4:return o.trys.push([4,6,,7]),[4,te(t)];case 5:return c=o.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof g&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=o.sent())){if(r.deleteThrottleMetadata(e),i)return Wt.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+i+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:i}];throw h}return f=503===Number(h.customData.httpStatus)?A(a,r.intervalMillis,30):A(a,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+f,backoffCount:a+1},r.setThrottleMetadata(e,l),Wt.debug("Calling attemptFetch again in "+f+" millis"),[2,ee(t,l,n,r)];case 7:return[2]}}))}))}function ne(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r($t.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var re=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();var ie,oe,se={},ae=[],ue={},ce="dataLayer",he="gtag",fe=!1;function le(t){if(fe)throw $t.create("already-initialized");t.dataLayerName&&(ce=t.dataLayerName),t.gtagName&&(he=t.gtagName)}function pe(t,e){!function(){var t=[];if(d()&&t.push("This is a browser extension environment."),m()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=$t.create("invalid-analytics-context",{errorInfo:e});Wt.warn(n.message)}}();var n=t.options.appId;if(!n)throw $t.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $t.create("no-api-key");Wt.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=se[n])throw $t.create("already-exists",{id:n});if(!fe){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Gt))return r}return null})()||function(t){var e=document.createElement("script");e.src=Gt+"?l="+t,e.async=!0,document.head.appendChild(e)}(ce),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(ce);var s=function(t,e,n,r,s){var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=function(t,e,n,r){return function(s,a,u){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),s!==Bt.EVENT?[3,2]:[4,Xt(t,e,n,a,u)];case 1:return o.sent(),[3,5];case 2:return s!==Bt.CONFIG?[3,4]:[4,Jt(t,e,n,r,a,u)];case 3:return o.sent(),[3,5];case 4:t(Bt.SET,a),o.label=5;case 5:return[3,7];case 6:return i=o.sent(),Wt.error(i),[3,7];case 7:return[2]}}))}))}}(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}(se,ae,ue,ce,he),a=s.wrappedGtag,u=s.gtagCore;oe=a,ie=u,fe=!0}return se[n]=function(t,e,n,r,s){return i(this,void 0,void 0,(function(){var a,u,c,h,f,l,p;return o(this,(function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Qt),i(this,void 0,void 0,(function(){var n,r,s,a,u,c,h=this;return o(this,(function(f){if(n=t.options,r=n.appId,s=n.apiKey,a=n.measurementId,!r)throw $t.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:r}];throw $t.create("no-api-key")}return u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new re,setTimeout((function(){return i(h,void 0,void 0,(function(){return o(this,(function(t){return c.abort(),[2]}))}))}),6e4),[2,ee({appId:r,apiKey:s,measurementId:a},u,c,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Wt.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Wt.error(t)})),e.push(a),u=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return v()?[3,1]:(Wt.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,y()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Wt.warn($t.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,u])];case 1:return c=d.sent(),h=c[0],f=c[1],s("js",new Date),(p={}).origin="firebase",p.update=!0,l=p,null!=f&&(l.firebase_id=f),s(Bt.CONFIG,h.measurementId,l),[2,h.measurementId]}}))}))}(t,ae,ue,e,ie),{app:t,logEvent:function(t,e,s){(function(t,e,n,s,a){return i(this,void 0,void 0,(function(){var i,u;return o(this,(function(o){switch(o.label){case 0:return a&&a.global?(t(Bt.EVENT,n,s),[2]):[3,1];case 1:return[4,e];case 2:i=o.sent(),u=r(r({},s),{send_to:i}),t(Bt.EVENT,n,u),o.label=3;case 3:return[2]}}))}))})(oe,se[n],t,e,s).catch((function(t){return Wt.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Bt.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Bt.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(oe,se[n],t,e).catch((function(t){return Wt.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(Bt.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(Bt.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(oe,se[n],t,e).catch((function(t){return Wt.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:if(!r||!r.global)return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)u=a[s],i["user_properties."+u]=n[u];return t(Bt.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:c=o.sent(),t(Bt.CONFIG,c,{update:!0,user_properties:n}),o.label=3;case 3:return[2]}}))}))})(oe,se[n],t,e).catch((function(t){return Wt.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return i(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(se[n],t).catch((function(t){return Wt.error(t)}))},INTERNAL:{delete:function(){return delete se[n],Promise.resolve()}}}}var de="analytics";function ve(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:if(d())return[2,!1];if(!m())return[2,!1];if(!v())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,y()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new k(de,(function(t){return pe(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:le,EventName:Kt,isSupported:ve})),t.INTERNAL.registerComponent(new k("analytics-internal",(function(t){try{return{logEvent:t.getProvider(de).getImmediate().logEvent}}catch(t){throw $t.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(et),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.i(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.i(t)},e.prototype.g=function(t){this.h(2,t)},e.prototype.i=function(t){this.h(1,t)},e.prototype.h=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Pa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Pa(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function f(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=O+t,this.message=e||D[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(O.length),t.message,t.serverResponse):null}_(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var k,O="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function M(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function V(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=P("__EID__")?"__EID__":void 0,_(L,Error),L.prototype.name="CustomError",_(R,L),R.prototype.name="AssertionError",V.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new V((function(){return new H}),(function(t){t.reset()}));function q(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function H(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},K=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t,e){return 0<=B(t,e)}function X(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function $(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var ft=a.navigator;if(ft){var lt=ft.userAgent;if(lt){Z=lt;break t}}Z=""}function pt(t){return ct(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function yt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===_t&&e||"",this.b=Tt}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,Tt={},_t={};function St(){if(void 0===Et){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){a.console&&a.console.error(t.message)}Et=t}else Et=t}return Et}function At(t,e){this.a=e===Ct?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new At(t=e?e.createScriptURL(t):t,Ct)}(t=n.replace(Ot,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ct={};function Pt(t,e){this.a=e===Ut?t:""}function xt(t){return t instanceof Pt&&t.constructor===Pt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Pt.prototype.sa=!0,Pt.prototype.ra=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Lt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Vt(t){if(t instanceof Pt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Pt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Lt.test(e[1])?new Pt(t,Ut):null}return t}function jt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Pt(t,Ut))}var Ut={},Ft=new Pt("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Ht?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ht={};function Bt(t,e,n,r){return t=t instanceof Pt?t:jt(t),e=e||a,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Gt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=f;var Wt,Jt,Xt=pt("Opera"),Yt=pt("Trident")||pt("MSIE"),$t=pt("Edge"),Qt=$t||Yt,Zt=pt("Gecko")&&!(ct(Z.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(Z.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=a.document;return t?t.documentMode:void 0}t:{var ne="",re=(Jt=Z,Zt?/rv:([^\);]+)(\)|;)/.exec(Jt):$t?/Edge\/([\d\.]+)/.exec(Jt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Jt):te?/WebKit\/(\S+)/.exec(Jt):Xt?/(?:Version)[ \/]?(\S+)/.exec(Jt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(Wt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}a.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Jt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function fe(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,pe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}K(s?Q(o):o,r)}}}function ye(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){a.setTimeout((function(){throw t}),0)}function ge(t,e){pe||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);pe=function(){t.then(Ie)}}else pe=function(){var t=Ie;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!pt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=ye(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),be||(pe(),be=!0),we.add(t,e)}var be=!1,we=new U;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){me(t)}j(F,t)}be=!1}function Ee(t,e){if(this.a=Te,this.h=void 0,this.f=this.b=this.c=null,this.g=this.i=!1,t!=f)try{var n=this;t.call(e,(function(t){Me(n,_e,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Se,t)}))}catch(t){Me(this,Se,t)}}var Te=0,_e=2,Se=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new V((function(){return new Ae}),(function(t){t.reset()}));function ke(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function Oe(t){if(t instanceof Ee)return t;var e=new Ee(f);return Me(e,_e,t),e}function De(t){return new Ee((function(e,n){n(t)}))}function Ce(t,e,n){Ve(t,e,n,null)||ge(E(e,t))}function Pe(t){return new Ee((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Te&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),Fe(n,i,Se,e)))}t.c=null}else Me(t,Se,e)}function Le(t,e){t.b||t.a!=_e&&t.a!=Se||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Re(t,e,n,r){var i=ke(null,null,null);return i.a=new Ee((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Le(t,i),i.a}function Me(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ve(n,t.Zc,t.$c,t)||(t.h=n,t.a=e,t.c=null,je(t),e!=Se||n instanceof Be||function(t,e){t.g=!0,ge((function(){t.g&&He.call(null,e)}))}(t,n)))}function Ve(t,e,n,r){if(t instanceof Ee)return Le(t,ke(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.i||(t.i=!0,ge(t.fc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){He.call(null,t)}j(Ne,e)}function qe(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ee.prototype.then=function(t,e,n){return Re(this,d(t)?t:null,d(e)?e:null,n)},Ee.prototype.$goog_Thenable=!0,(t=Ee.prototype).na=function(t,e){return(t=ke(t,t,e)).c=!0,Le(this,t),this},t.o=function(t,e){return Re(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new Be(t);ge((function(){xe(this,e)}),this)}},t.Zc=function(t){this.a=Te,Me(this,_e,t)},t.$c=function(t){this.a=Te,Me(this,Se,t)},t.fc=function(){for(var t;t=Ue(this);)Fe(this,t,this.a,this.h);this.i=!1};var He=me;function Be(t){L.call(this,t)}function Ke(){0!=Ge&&(ze[y(this)]=this),this.xa=this.xa,this.oa=this.oa}_(Be,L),Be.prototype.name="cancel";var Ge=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ge)){var e=y(t);if(0!=Ge&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ke.prototype.xa=!1,Ke.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Je=Object.freeze||function(t){return t},Xe=!Yt||9<=Number(ue),Ye=Yt&&!ae("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",f,e),a.removeEventListener("test",f,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ze,Qe);var tn=Je({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++nn,this.va=this.Oa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new rn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function fn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=En(n),t&&t[en]?_n(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=bn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=En(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function yn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return d(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function Tn(){Ke.call(this),this.v=new sn(this),this.$b=this,this.fb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function kn(t){var e=null;return new Ee((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function On(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Dn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(Tn,Ke),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){fn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;gt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=An(s,r,!0,t)&&i}if(i=An(s=t.b=n,r,!0,t)&&i,i=An(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(s=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=Cn.prototype).V=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Pn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.i=this.c="",this.h=!1,t instanceof Rn?(this.h=void 0!==e?e:t.h,Mn(this,t.f),this.l=t.l,this.a=t.a,Vn(this,t.g),this.c=t.c,jn(this,rr(t.b)),this.i=t.i):t&&(n=String(t).match(Ln))?(this.h=!!e,Mn(this,n[1]||"",!0),this.l=Bn(n[2]||""),this.a=Bn(n[3]||"",!0),Vn(this,n[4]),this.c=Bn(n[5]||"",!0),jn(this,n[6]||"",!0),this.i=Bn(n[7]||"")):(this.h=!!e,this.b=new $n(null,this.h))}function Mn(t,e,n){t.f=n?Bn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Vn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.h)):(n||(e=Kn(e,Xn)),t.b=new $n(e,t.h))}function Un(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function qn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Hn(t,e,n,r){var i=new Rn(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Vn(i,n),r&&(i.c=r),i}function Bn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Gn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Gn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Kn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Kn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kn(n,"/"==n.charAt(0)?Jn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Kn(n,Yn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.f;n?Mn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Vn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.i,n&&(e.i=t.i),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Jn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Dn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=On(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Qn(t),e=ir(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function er(t,e){return Qn(t),e=ir(t,e),xn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Q(n)),t.b+=n.length)}function rr(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=$n.prototype).add=function(t,e){Qn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){K(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Qn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=$(e,this.a.get(ir(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function fr(){var t=Cr();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Vt(t)||Ft)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function yr(t){t=t||a.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),kr(Cr())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Vt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=ye(document,"A"),"HTMLAnchorElement"),e=e instanceof Pt?e:jt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=xt(e),s&&(Qt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Gt(t)+'">',t=new qt(t=(r=St())?r.createHTML(t):t,null,Ht),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Ee((function(e){"complete"==a.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function Ir(t){return t=t||Cr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return et.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":et.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=_r();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Nr="Chrome";function kr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Or={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Dr(t,e){e=e||[];var n,r=[],i={};for(n in Or)i[Or[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=kr(i=Cr()):"Worker"===r&&(r=kr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=a.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!fr()||!!a.indexedDB}catch(t){return Tr()&&!!a.indexedDB}return!1}function Lr(){return(Rr()||"chrome-extension:"===Mr()||Ir())&&!Sr()&&xr()&&!Tr()}function Rr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return a.location&&a.location.protocol||null}function Vr(t){return!vr(t=t||Cr())&&kr(t)!=Ar}function jr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Hr(t){return"Safari"!=kr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Br(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Kr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=_r(),this.b=vr(t)||"ReactNative"===e}function Gr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Pr("fireauth.oauthhelper",a)&&!Pr("fireauth.iframe",a))}Kr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Jr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Jr=2==$r.abcd}catch(Jt){Jr=!1}function Qr(t,e,n){Jr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[si]),Qr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Qr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[yi];if(t=ri(t[di]),!i||i!=fi&&i!=li&&!n||i==li&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[gi]=n||null,e[wi]=n||null,e[mi]=r):(e[gi]=r||null,e[wi]=r||null,e[mi]=n||null),e[bi]=t||null,Qr(this,Ei,i),Qr(this,Ii,ei(e))}_(ui,ni),ui.prototype.w=function(){var t=ui.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",fi="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",yi="requestType",mi="email",gi="fromEmail",bi="multiFactorInfo",wi="previousEmail",Ii="data",Ei="operation";function Ti(t){var e=Fn(t=qn(t),_i)||null,n=Fn(t,Si)||null,r=Fn(t,ki)||null;if(r=r&&Di[r]||null,!e||!n||!r)throw new A("argument-error",_i+", "+Si+"and "+ki+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Ai)||null,languageCode:Fn(t,Ni)||null,tenantId:Fn(t,Oi)||null})}var _i="apiKey",Si="oobCode",Ai="continueUrl",Ni="languageCode",ki="mode",Oi="tenantId",Di={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:fi,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new Ti(t)}catch(t){return null}}function Pi(t){var e=t[Vi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.i=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[Fi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new A("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Li+" property must be a non empty string when specified.");this.h=t||null}var xi="android",Li="dynamicLinkDomain",Ri="handleCodeInApp",Mi="iOS",Vi="url",ji="installApp",Ui="minimumVersion",Fi="packageName",qi="bundleId";function Hi(t){var e={};for(var n in e.continueUrl=t.i,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.h,e)null===e[n]&&delete e[n];return e}var Bi=null;function Ki(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.i=t,this.a=e.exp,this.h=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Gi(t){try{return new Ki(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Ki.prototype.S=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.i};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],Xi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Ji},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Ji},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Ji},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Wi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function $i(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[Qi])return new to(t)}catch(t){}return null}var Qi="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[Qi]){var n=Gi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function eo(t){to.call(this,t),Qr(this,"profile",ei((t=Fr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function so(t){var e=qn(t),n=Fn(e,"link"),r=Fn(qn(n),"link");return e=Fn(e,"deep_link_id"),Fn(qn(e),"link")||e||r||n||t}function ao(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}_(eo,to),_(no,eo),_(ro,eo),_(io,eo),_(oo,eo);var uo="enroll",co="signin";function ho(){}function fo(t,e){return t.then((function(t){if(t[Zs]){var n=Gi(t[Zs]);if(!n||e!=n.h)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new A("user-mismatch"):t}))}function lo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function yo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new yo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Pc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Yi(t)||{}).Ja||null,this.nb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,Ji),this.a=[]}function Eo(){Io.call(this,"facebook.com")}function To(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function _o(){Io.call(this,"github.com")}function So(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Ao(){Io.call(this,"google.com"),this.Ca("profile")}function No(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Wi)}function Oo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new yo("twitter.com",n,"twitter.com")}function Do(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Do(t.email,t.password,t.signInMethod):null}function Po(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Lo(e)))throw new A("argument-error","Invalid email link!");return new Do(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Ci(t=so(t)))&&t.operation===fi?t:null}function Ro(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new A("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ro(e)}return null}function Vo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function jo(t){try{this.a=t||et.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Ro({cb:t,bb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ro({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return To(n);case"github.com":return So(n);case"twitter.com":return Oo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new yo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Ho(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.h=o||null,this.i=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Ko(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?Oe(this.a):Oe(this.b)},ao.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ja=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},lo.prototype.ja=function(t){return wa(t,po(this))},lo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,Ia(t,n)},lo.prototype.c=function(t,e){return fo(Ea(t,po(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},yo.prototype.ja=function(t){return wa(t,mo(this))},yo.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,Ia(t,n)},yo.prototype.c=function(t,e){return fo(Ea(t,mo(this)),e)},yo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Hb=yt(t),this},_(wo,bo),_(Io,bo),Io.prototype.Ca=function(t){return J(this.a,t)||this.a.push(t),this},Io.prototype.Pb=function(){return Q(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new yo(this.providerId,n,this.providerId)},_(Eo,Io),Qr(Eo,"PROVIDER_ID","facebook.com"),Qr(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(_o,Io),Qr(_o,"PROVIDER_ID","github.com"),Qr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),_(Ao,Io),Qr(Ao,"PROVIDER_ID","google.com"),Qr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),_(ko,bo),Qr(ko,"PROVIDER_ID","twitter.com"),Qr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),Do.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Da,{email:this.a,oobCode:this.f}):ru(t,Qa,{email:this.a,password:this.f})},Do.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ca,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ka,{idToken:e,email:this.a,password:this.f})},Do.prototype.c=function(t,e){return fo(this.ja(t),e)},Do.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Po,{PROVIDER_ID:"password"}),Zr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ro.prototype.ja=function(t){return t.eb(Vo(this))},Ro.prototype.b=function(t,e){var n=Vo(this);return n.idToken=e,ru(t,tu,n)},Ro.prototype.c=function(t,e){var n=Vo(this);return n.operation="REAUTH",fo(t=ru(t,eu,n),e)},Ro.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.eb=function(t,e){var n=this.a.a;return Oe(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ha,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(jo,{PROVIDER_ID:"phone"}),Zr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.i&&t.push(this.i),t.join("-")},Ho.prototype.S=function(){return this.i},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.h,tenantId:this.i,error:this.a&&this.a.w()}};var Go,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Jo(t,e,n){A.call(this,t,n),(t=e||{}).Ib&&Qr(this,"email",t.Ib),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Yb&&Qr(this,"tenantId",t.Yb)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:Fo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function Yo(){}function $o(t){return t.c||(t.c=t.b())}function Qo(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ts(){}function es(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.pc,this),this.a.onerror=I(this.Rb,this),this.a.onprogress=I(this.qc,this),this.a.ontimeout=I(this.uc,this)}function ns(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function rs(t,e,n){this.reset(t,e,n,void 0,void 0)}function is(t){this.f=t,this.b=this.c=this.a=null}function os(t,e){this.name=t,this.value=e}_(Wo,A),_(Jo,A),Jo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Jo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,_(Qo,Yo),Qo.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Go=new Qo,_(ts,Yo),ts.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new es;throw Error("Unsupported browser")},ts.prototype.b=function(){return{}},(t=es.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ns(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ns(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ns(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},rs.prototype.a=null,rs.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},os.prototype.toString=function(){return this.name};var ss=new os("SEVERE",1e3),as=new os("WARNING",900),us=new os("CONFIG",700),cs=new os("FINE",500);function hs(t){return t.c?t.c:t.a?hs(t.a):(M("Root logger has no level set."),null)}is.prototype.log=function(t,e,n){if(t.value>=hs(this).value)for(d(e)&&(e=e()),t=new rs(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fs={},ls=null;function ps(t){var e;if(ls||(ls=new is(""),fs[""]=ls,ls.c=us),!(e=fs[t])){e=new is(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ps(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fs[t]=e}return e}function ds(t,e){t&&t.log(cs,e,void 0)}function vs(t){this.f=t}function ys(t){Tn.call(this),this.u=t,this.i=void 0,this.readyState=ms,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.h=ps("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(vs,Yo),vs.prototype.a=function(){return new ys(this.f)},vs.prototype.b=function(t){return function(){return t}}({}),_(ys,Tn);var ms=0;function gs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function bs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ws(t)}function ws(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Is(t){Tn.call(this),this.headers=new Cn,this.O=t||null,this.c=!1,this.A=this.a=null,this.i=this.P=this.l="",this.f=this.N=this.h=this.G=!1,this.g=0,this.s=null,this.m=Es,this.u=this.R=!1}(t=ys.prototype).open=function(t,e){if(this.readyState!=ms)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ws(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.i,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,bs(this)),this.readyState=ms},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ws(this)),this.a&&(this.readyState=3,ws(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?bs(this):ws(this),3==this.readyState&&gs(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,bs(this))},t.rc=function(t){this.a&&(this.response=t,bs(this))},t.Ta=function(t){var e=this.h;e&&e.log(as,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&bs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(as,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(as,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return"include"===this.i},set:function(t){this.i=t?"include":"same-origin"}}),_(Is,Tn);var Es="";Is.prototype.b=ps("goog.net.XhrIo");var Ts=/^https?$/i,_s=["POST","PUT"];function Ss(t){return"content-type"==t.toLowerCase()}function As(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.i=e,Ns(t),Os(t)}function Ns(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Cs(t)&&2==Ps(t))ds(t.b,xs(t,"Local request error detected and ignored"));else if(t.h&&4==Cs(t))Nn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Cs(t)){ds(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Ps(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ts.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Cs(t)?t.a.statusText:""}catch(e){ds(t.b,"Can not get status: "+e.message),c=""}t.i=c+" ["+Ps(t)+"]",Ns(t)}}finally{Os(t)}}}function Os(t,e){if(t.a){Ds(t);var n=t.a,r=t.A[0]?f:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ss,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ds(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Cs(t){return t.a?t.a.readyState:0}function Ps(t){try{return 2<Cs(t)?t.a.status:-1}catch(t){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+Ps(t)+"]"}function Ls(t){var e=Gs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.h=!1,this.i=0,this.b=null,this.l=0}function Rs(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ms(t){if(t.a){if(!t.m)throw new Fs(t);t.m=!1}}function Vs(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function js(t){return W(t.g,(function(t){return d(t[1])}))}function Us(t){if(t.i&&t.a&&js(t)){var e=t.i,n=Bs[e];n&&(a.clearTimeout(n.a),delete Bs[e]),t.i=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.h;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.h=!0)}catch(r){e=r,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=I(t.v,t,!0),r=I(t.v,t,!1),e instanceof Ls?(Vs(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Hs(e),Bs[e.a]=e,t.i=e.a)}function Fs(){L.call(this)}function qs(){L.call(this)}function Hs(t){this.a=a.setTimeout(I(this.c,this),0),this.b=t}(t=Is.prototype).Ma=function(){void 0!==s&&this.a&&(this.i="Timed out after "+this.g+"ms, aborting",ds(this.b,xs(this,this.i)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ds(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Os(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Os(this,!0)),Is.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.h||this.f?ks(this):this.Ic())},t.Ic=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Es:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ss,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ds(this.b,"Can not get response: "+t.message),null}},Ls.prototype.cancel=function(t){if(this.a)this.c instanceof Ls&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.m=!0,this.a||(t=new qs(this),Ms(this),Rs(this,!1,t))}},Ls.prototype.v=function(t,e){this.h=!1,Rs(this,t,e)},Ls.prototype.then=function(t,e,n){var r,i,o=new Ee((function(t,e){r=t,i=e}));return Vs(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},Ls.prototype.$goog_Thenable=!0,_(Fs,L),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",_(qs,L),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Hs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ks(t){var e={},n=e.document||document,r=Nt(t).toString(),i=ye(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new Ls(o),u=null,f=null!=e.timeout?e.timeout:5e3;return 0<f&&(u=window.setTimeout((function(){zs(i,!0);var t=new Xs(Js,"Timeout reached for loading script "+r);Ms(s),Rs(s,!1,t)}),f),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(zs(i,e.wd||!1,u),Ms(s),Rs(s,!0,null))},i.onerror=function(){zs(i,!0,u);var t=new Xs(Ws,"Error while loading script "+r);Ms(s),Rs(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),fe(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=h(e.document):(null===c&&(c=h(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Gs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&zs(t,!0,this.Ma)}}function zs(t,e,n){null!=n&&a.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ws=0,Js=1;function Xs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ys(t){this.f=t}function $s(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||ta,this.g=yt(t.secureTokenHeaders||ea),this.i=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||na,this.a=yt(t.firebaseHeaders||ra),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&et.INTERNAL.node&&et.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new vs(self):Sr()?this.f=new Ys(n):this.f=new ts,this.b=null}_(Xs,L),_(Ys,Yo),Ys.prototype.a=function(){return new this.f},Ys.prototype.b=function(){return{}};var Qs,Zs="idToken",ta=new Kr(3e4,6e4),ea={"Content-Type":"application/x-www-form-urlencoded"},na=new Kr(3e4,6e4),ra={"Content-Type":"application/json"};function ia(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function oa(t,e){e&&(t.l=sa("https://securetoken.googleapis.com/v1/token",e),t.i=sa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.h=sa("https://identitytoolkit.googleapis.com/v2/",e))}function sa(t,e){return t=qn(t),e=qn(e.url),t.c=t.a+t.c,Mn(t,e.f),t.a=e.a,Vn(t,e.g),t.toString()}function aa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ua(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t=kr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Tr()?t=I(t.u,t):(Qs||(Qs=new Ee((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ha]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Vs(t,null,e,void 0)}(Ks(kt(ca,{onload:ha})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}$s.prototype.S=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Is(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}_n(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ds(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(s,"ready",(function(){u&&clearTimeout(u),We(this)})),Sn(s,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.i="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Go.a(),t.A=t.O?$o(t.O):$o(Go),t.a.onreadystatechange=I(t.Ub,t);try{ds(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ds(t.b,xs(t,"Error opening Xhr: "+e.message)),void As(t,e)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)K(t,e,void 0);else for(var n=Dn(t),r=On(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ss,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!J(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ds(t),0<t.g&&(t.u=function(t){return Yt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ds(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),ds(t.b,xs(t,"Sending request")),t.h=!0,t.a.send(e),t.h=!1}catch(e){ds(t.b,xs(t,"Send error: "+e.message)),As(t,e)}}(s,t,n,r,i)};var ca=new wt(_t,"https://apis.google.com/js/client.js?onload=%{onload}"),ha="__fcb"+Math.floor(1e6*Math.random()).toString();function fa(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new A("invalid-email")}function la(t){"email"in t&&fa(t)}function pa(t){if(!t[Zs]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,yt(t));throw new A("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.yb=function(){return ru(this,Ga,{})},$s.prototype.Ab=function(t,e){return ru(this,Ba,{idToken:t,email:e})},$s.prototype.Bb=function(t,e){return ru(this,Ka,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ya(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Ja,e)}function Ia(t,e){return e.returnIdpCredential=!0,ru(t,Ya,e)}function Ea(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Xa,e)}function Ta(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=$s.prototype).Cb=function(t,e){var n={idToken:t},r=[];return dt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ba,n)},t.ub=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,ja,t)},t.vb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ra,t)},t.tb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Db=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Va,t)},t.eb=function(t){return ru(this,Za,t)},t.mb=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Qa=function(t){return ru(this,Sa,{oobCode:t})},t.ib=function(t){return ru(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",B:Ta,Z:"email",C:!0},Sa={endpoint:"resetPassword",B:Ta,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},C:!0},Aa={endpoint:"signupNewUser",B:function(t){if(fa(t),!t.password)throw new A("weak-password")},F:pa,U:!0,C:!0},Na={endpoint:"createAuthUri",C:!0},ka={endpoint:"deleteAccount",M:["idToken"]},Oa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Da={endpoint:"emailLinkSignin",M:["email","oobCode"],B:fa,F:pa,U:!0,C:!0},Ca={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:fa,F:pa,U:!0},Pa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ya,F:pa,C:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ya,F:pa,C:!0,Na:!0},La={endpoint:"getAccountInfo"},Ra={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",C:!0},Ma={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},Va={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");fa(t)},Z:"email",C:!0},Ua={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Fa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qa={endpoint:"resetPassword",B:Ta,Z:"email",C:!0},Ha={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Ba={endpoint:"setAccountInfo",M:["idToken"],B:la,U:!0},Ka={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(la(t),!t.password)throw new A("weak-password")},F:pa,U:!0},Ga={endpoint:"signupNewUser",F:pa,U:!0,C:!0},za={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},C:!0,Na:!0},Ja={endpoint:"verifyAssertion",B:ma,Xa:ga,F:ba,U:!0,C:!0},Xa={endpoint:"verifyAssertion",B:ma,Xa:ga,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},U:!0,C:!0},Ya={endpoint:"verifyAssertion",B:function(t){if(ma(t),!t.idToken)throw new A("internal-error")},Xa:ga,F:ba,U:!0},$a={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new A("invalid-custom-token")},F:pa,U:!0,C:!0},Qa={endpoint:"verifyPassword",B:function(t){if(fa(t),!t.password)throw new A("wrong-password")},F:pa,U:!0,C:!0},Za={endpoint:"verifyPhoneNumber",B:da,F:pa,C:!0},tu={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new A("internal-error");da(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);pa(t)}},eu={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:da,F:pa,C:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Zs]^!!t.refreshToken)throw new A("internal-error")},C:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return De(new A("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Oe(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Un(a,"key",t.c),s&&Un(a,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(a,c,i[c]);return new Ee((function(e,n){ua(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.m.get())}))}(t,i?t.h:t.i,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function su(t){this.b=t,this.a=null,this.qb=function(t){return(hu||(hu=new Ee((function(t,e){function n(){Br(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Br(),e(Error("Network Error"))},timeout:uu.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},Oe(Ks(r=kt(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ee((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new wt(_t,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Kr(3e4,6e4),cu=new Kr(5e3,15e3),hu=null;function fu(t,e,n,r){this.l=t,this.i=e,this.h=n,this.g=r,this.f=null,t=this.g?Hn((t=qn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Hn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.i),Un(this.a,"appName",this.h),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.v=r,this.m=o,this.h=this.g=this.l=null,this.a=i,this.i=this.f=null}function pu(t){try{return et.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.h=i||null,this.l=this.u=this.A=null,this.i=[],this.v=this.a=null}function vu(t){var e=lr();return function(t){return ru(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(lr())}))}function yu(t){return t.v||(t.v=wr().then((function(){if(!t.u){var e=t.c,n=t.h,r=pu(t.b),i=new fu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()}t.m=new su(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.i.length;n++)r=t.i[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Oe(n)}return n.status="ERROR",Oe(n)}))}(t)}))),t.v}function mu(t){return t.l||(t.A=t.c?Dr(t.c,pu(t.b)):null,t.l=new $s(t.g,P(t.h),t.A),t.f&&oa(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new lu(t,e,n,r,i,f)).l=o,t.g=s,t.h=a,t.b=yt(u||null),t.f=c,t.xb(h).toString()}function bu(t){if(this.a=t||et.INTERNAL.reactNative&&et.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=I(this.c,this)}fu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},lu.prototype.xb=function(t){return this.i=t,this},lu.prototype.toString=function(){if(this.m){var t=qn(this.m.url);t=Hn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Hn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=et.app(this.c).auth().ka()}catch(t){n=null}for(var r in e.nb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Hb))e[r]=e[r].toString();r=n.Pc,e=yt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),vt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Un(t,"scopes",n.join(",")),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.h?Un(t,"v",this.h):tr(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Un(t,s,this.b[s]);return this.i?Un(t,"tid",this.i):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(s=pu(this.c)).length&&Un(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Nb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return yu(t).then((function(){return function(t,e){return t.qb.then((function(){return new Ee((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&yr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new Ee((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return kn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Cr();return!Vr(t)&&!Hr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return De(new A("popup-blocked"));if(s&&!Vr())return this.la().o((function(e){yr(t),i(e)})),r(),Oe();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.la().o((function(e){throw yr(t),i(e),e}));return r(),e})).then((function(){qo(n),s||pr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.h,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){qo(e),pr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.h,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return yu(this).then((function(){return t.m.qb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.i.push(t)},t.Ra=function(t){Y(this.i,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Oe(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Oe(this.a.setItem(t,jr(e)))},t.T=function(t){return Oe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Eu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return De(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ee((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function ku(){if(!Pu())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.s=!1,this.i=null;var t=this;Tr()&&self?(this.m=function(){var t=Tr()?self:null;if(K(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),Tu(this.m,"keyChanged",(function(e,n){return Vu(t).then((function(e){return 0<e.length&&K(t.a,(function(t){t(e)})),{keyProcessed:J(e,n.key)}}))})),Tu(this.m,"ping",(function(){return Oe(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Oe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Oe(null)}().then((function(e){(t.i=e)&&(t.g=new Su(new _u(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&J(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Ou(t){return new Ee((function(e,n){var r=t.v.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ee((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Ou(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.h||(t.h=Ou(t)),t.h}function Cu(t,e){var n=0;return new Ee((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.h=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Pu(){try{return!!a.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Lu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ru(t){return new Ee((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.i&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.i?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Oe()}function Vu(t){return Du(t).then((function(t){var e=xu(Lu(t,!1));return e.getAll?Ru(e.getAll()):new Ee((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Oe().then((function(){if(Pu()){var t=qr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){K(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&et.INTERNAL.node&&et.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Hu()||et.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var t=a.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Bu(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==_r();if(!(t=Gu()||t&&et.INTERNAL.node&&et.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Gu()||et.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gu(){try{var t=a.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Xu,t.Node=Yu,t.ReactNative=$u,t.Worker=Qu,this.a=t[_r()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];K(r,(function(e){i.push(Oe().then((function(){return e(t.origin,t.data.data)})))})),Pe(i).then((function(r){var i=[];K(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),K(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Cu(this,(function(e){return Ru((e=xu(Lu(e,!0))).get(t))})).then((function(i){return Cu(n,(function(o){if(o=xu(Lu(o,!0)),i)return i.value=e,Ru(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Ru(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).na((function(){r&&n.b--}))},t.get=function(t){return Cu(this,(function(e){return Ru(xu(Lu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=this,n=!1;return Cu(this,(function(r){return n=!0,e.b++,Ru(xu(Lu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).na((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout((function(){t.l=Vu(t).then((function(e){0<e.length&&K(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Fu.prototype).get=function(t){return Oe(this.a[t])},t.set=function(t,e){return this.a[t]=e,Oe()},t.T=function(t){return delete this.a[t],Oe()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Oe().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&fn(a.window,"storage",t)},t.ia=function(t){a.window&&dn(a.window,"storage",t)},(t=Bu.prototype).get=function(){return Oe(null)},t.set=function(){return Oe()},t.T=function(){return Oe()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return Oe().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=jr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Ju,Xu={D:qu,ab:Ku},Yu={D:qu,ab:Ku},$u={D:bu,ab:Bu},Qu={D:qu,ab:Bu},Zu={qd:"local",NONE:"none",sd:"session"};function tc(){var t=!(Hr(Cr())||!Er()),e=Vr(),n=xr();this.v=t,this.i=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!fr()&&Wr()||!a.indexedDB?new t.a.D:new Uu(Tr()?new Fu:new t.a.D)}catch(t){this.g=new Fu,this.i=!0}try{this.h=new t.a.ab}catch(t){this.h=new Fu}this.m=new Fu,this.f=I(this.Xb,this),this.b={}}function ec(){return Ju||(Ju=new tc),Ju}function nc(t,e){switch(e){case"session":return t.h;case"none":return t.m;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.D&&(t.b[n]=null),nc(t,e.D).T(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.D).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.i||(fr()||!Wr())&&a.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.v)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},Yt&&ue&&10==ue&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else K(t,I(this.lb,this))},t.lb=function(t){this.a[t]&&K(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",D:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=fc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.h=t,this.i=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=a.Int32Array?new Int32Array(gc):gc),this.reset()}_(hc,(function(){this.b=-1}));for(var fc=64,lc=fc-1,pc=[],dc=0;dc<lc;dc++)pc[dc]=0;var vc=$(128,pc);function yc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|ac[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(yc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(yc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.i):Q(this.i)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}_(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.m=t,this.h=e,this.l=n,this.v=r||null,this.u=i||null,this.s=o,this.i=e+":"+n,this.A=new cc,this.g=new sc(this.i),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new A("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function _c(t){return t.f||(t.f=t.la().then((function(){return new Ee((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Sc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=qn(i),"firebaseError")||null))?N(o):null)?new Ho(r.c,r.b,null,null,o,null,r.S()):new Ho(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}Tc(t,i)}))}var n=new Ho("unknown",null,null,null,new A("no-auth-event")),r=!1,i=kn(500).then((function(){return Sc(t).then((function(){r||Tc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Ko),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Pr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Sc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Bo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=ec()}(t=Ic.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?wr().then((function(){return new Ee((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):De(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Pr("universalLinks.subscribe",a))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Pr("BuildInfo.packageName",a))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Pr("cordova.plugins.browsertab.openUrl",a))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Pr("cordova.InAppBrowser.open",a))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Nb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Oe()},t.Lb=function(){return De(new A("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return De(new A("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=Oe().then((function(){return qo(e),_c(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Ho(e,r,null,o,new A("no-auth-event"),null,i),u=Pr("BuildInfo.packageName",a);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",a),h={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return De(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(yc(e),r=n=0;r<e.h;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var f=gu(t.m,t.h,t.l,e,n,null,r,t.v,h,t.u,i,t.s);return t.la().then((function(){var e=t.i;return t.A.a.set(uc,s.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Pr("cordova.plugins.browsertab.openUrl",a)))throw new A("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=Pr("cordova.InAppBrowser.open",a)))throw new A("invalid-cordova-configuration");e=Cr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ee((function(t,e){u=function(){var e=Pr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Gr()&&c()},o.addEventListener("resume",c,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Sc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ra(u),i.c=null}))},t.Ea=function(t){this.b.push(t),_c(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ho("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ra=function(t){Y(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",D:"session"};function kc(t){return ic(t.b,Nc,t.a)}function Oc(t,e,n,r){this.h={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.i=[],this.f=!1,this.l=I(this.s,this),this.b=new Kc,this.A=new Xc,this.g=new Ac(Hc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Dc(this.O,this.m,this.v,k,this.G)}function Dc(t,e,n,r,i){var o=et.SDK_VERSION||null;return Ir()?new Ic(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Cc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().o((function(n){throw t.a==e&&t.reset(),n}))}function Pc(t){t.a.Wb()&&Cc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Sb()||Gc(t.b)}function xc(t,e){J(t.i,e)||t.i.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Cc(t).o((function(e){var n=new Ho("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Pc(t)})).o((function(){Pc(t)}))}function Lc(t,e){Y(t.i,(function(t){return t==e}))}Oc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Dc(this.O,this.m,this.v,null,this.G),this.h={}},Oc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=T()-this.u&&(this.h={},this.u=0),t&&t.getUid()&&this.h.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.i.length;n++){var r=this.i[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.i(t,r),t&&(t.f||t.b)&&(this.h[t.getUid()]=!0,this.u=T())),e=!0;break}}return Gc(this.b),e};var Rc=new Kr(2e3,1e4),Mc=new Kr(3e4,6e4);function Vc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).o((function(e){if(jc(e))throw new A("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new Ee((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Fc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Rc.get())}Oc.prototype.qa=function(){return this.b.qa()};var qc={};function Hc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Bc(t,e,n,r){var i=Hc(e,n,r);return qc[i]||(qc[i]=new Oc(t,e,n,r)),qc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.h=this.g=!1}function Gc(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function zc(t){t.g&&!t.h&&Jc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Oe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return De(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function $c(t,e){this.a=e,Qr(this,"verificationId",t)}function Qc(t,e,n,r){return new jo(t).eb(e,n).then((function(t){return new $c(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=yt(e),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;K(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.i=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.h=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),Oe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.h,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Jc(t,a,e,null)})).o((function(e){Jc(t,a,null,e)}))}(this,t,e):De(new A("invalid-auth-event")):(Jc(this,!1,null,null),Oe())}else De(new A("invalid-auth-event"))},Kc.prototype.qa=function(){var t=this;return new Ee((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=kn(Mc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},Xc.prototype.i=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Oe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.h).then((function(t){e.ma(r,t,null,n)})).o((function(t){e.ma(r,null,t,n)}))}(t,e):De(new A("invalid-auth-event"))}else De(new A("invalid-auth-event"))},$c.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),Qr(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function sh(t){Qr(this,"factorId",t.fa),this.a=t}function ah(t){if(sh.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.xc,this),fn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&K(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.i=t,this.h=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function lh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Gr()||!t?Oe():new Ee((function(n){e=function(){Gr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.i()})).then((function(){lh(t,!0)})).o((function(e){t.h(e)&&lh(t,!1)}))}function ph(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Gi(e[Zs]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function yh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function mh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=et.SDK_VERSION?Dr(et.SDK_VERSION):null;this.a=new $s(this.l,P(k),r),t.emulatorConfig&&oa(this.a,t.emulatorConfig),this.b=new ph(this.a),Ah(this,e[Zs]),vh(this.b,e),Qr(this,"refreshToken",this.b.a),Oh(this,n||{}),Tn.call(this),this.P=!1,this.s&&Lr()&&(this.h=Bc(this.s,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.$=I(this.gb,this);var i=this;this.pa=null,this.Ba=function(t){i.wa(t.i)},this.ba=null,this.za=function(t){oa(i.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){Ih(i,t.f)},this.aa=null,this.N=new ch(this,n),Qr(this,"multiFactor",this.N)}function bh(t,e){t.ba&&dn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&fn(e,"languageCodeChanged",t.Ba)}function wh(t,e){t.W&&dn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&fn(e,"emulatorConfigChanged",t.za)}function Ih(t,e){t.X=e,aa(t.a,et.SDK_VERSION?Dr(et.SDK_VERSION,t.X):null)}function Eh(t,e){t.aa&&dn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&fn(e,"frameworkChanged",t.Aa)}function Th(t){try{return et.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _h(t){t.A||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.$),fn(t,"tokenChanged",t.$))}function Sh(t){dn(t,"tokenChanged",t.$),t.u.stop()}function Ah(t,e){t.ya=e,Qr(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Pe(e).then((function(){return t}))}function kh(t){t.h&&!t.P&&(t.P=!0,xc(t.h,t))}function Oh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Dh(){}function Ch(t){return Oe().then((function(){if(t.A)throw new A("app-deleted")}))}function Ph(t){return z(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Lh(t,e.providerId),t.providerData.push(e))}function Lh(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Rh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Mh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yh),K(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Qr(t,"refreshToken",t.b.a),hh(t.N,e.N.b))}function Vh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,La,{idToken:e}).then(I(t.Jc,t))}(t,e).then((function(){return n||Rh(t,"isAnonymous",!1),e}))}))}function jh(t,e){e[Zs]&&t.ya!=e[Zs]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Ah(t,e[Zs]),Rh(t,"refreshToken",t.b.a))}function Uh(t,e){return Vh(t).then((function(){if(J(Ph(t),e))return Nh(t).then((function(){throw new A("provider-already-linked")}))}))}function Fh(t,e,n){return ti({user:t,credential:Fo(e),additionalUserInfo:e=$i(e),operationType:n})}function qh(t,e){return jh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Lr())return De(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return De(t.f);var o=Yi(n.providerId),s=qr(t.uid+":::"),a=null;(!Vr()||Er())&&t.s&&n.isOAuthProvider&&(a=gu(t.s,t.l,t.m,e,n,null,s,et.SDK_VERSION||null,null,null,t.tenantId));var u=mr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.h,u,e,n,s,!!a,t.tenantId)})).then((function(){return new Ee((function(n,r){t.ma(e,null,new A("cancelled-popup-request"),t.i||null),t.g=n,t.O=r,t.i=s,t.c=Fc(t.h,t,e,u,s)}))})).then((function(t){return u&&yr(u),t?ti(t):null})).o((function(t){throw u&&yr(u),t})),Gh(t,r,i)}function Bh(t,e,n,r,i){if(!Lr())return De(new A("operation-not-supported-in-this-environment"));if(t.f&&!i)return De(t.f);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Kh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Jh,t.w(),e.a)),e})).then((function(){return Uc(t.h,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),Gh(t,r,i)}function Kh(t){if(!t.h||!t.P){if(t.h&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Gh(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),De(t.f)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new uh("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){X(t.G,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Th(t),I(t.ic,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gh(e,n,t);return t.providerData&&K(t.providerData,(function(t){t&&xh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=yt(e.f);return delete n[eh],delete n[nh],gt(n,t),e.g(n)}))},_(rh,A),oh.prototype.rb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Vo(t.a)}),ru(e,Pa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Vo(t.a)}),ru(e,xa,n)}))}(this,t,e)},_(sh,oh),_(ah,sh),_(uh,Qe),(t=ch.prototype).xc=function(t){hh(this,function(t){var e=[];return K(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new ao(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return jh(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=G(e.b,(function(t){return t.uid!=n}));return hh(e,r),jh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,lh(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ph.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ph.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?De(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ee((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ua(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.v.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Gi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Oe(null):Oe({accessToken:this.b.toString(),refreshToken:this.a})},yh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(gh,Tn),gh.prototype.wa=function(t){this.pa=t,ia(this.a,t)},gh.prototype.ka=function(){return this.pa},gh.prototype.Ga=function(){return Q(this.X)},gh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(gh.prototype,"providerId","firebase"),(t=gh.prototype).reload=function(){var t=this;return Gh(this,Ch(this).then((function(){return Vh(t).then((function(){return Nh(t)})).then(Dh)})))},t.nc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return Gh(this,Ch(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.ya&&(Ah(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Rh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Oh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new mh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Rh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{gd:t}))},t.Kc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Gh(this,t.c(this.a,this.uid).then((function(t){return jh(e,t),n=Fh(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Gh(this,Uh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Fh(e,t,"link"),qh(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return Gh(this,Uh(this,"phone").then((function(){return Qc(Th(n),t,e,I(n.pb,n))})))},t.Lc=function(t,e){var n=this;return Gh(this,Oe().then((function(){return Qc(Th(n),t,e,I(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return Gh(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.dd=function(t){var e=this;return Gh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return jh(e,t),e.reload()})))},t.Bb=function(t){var e=this;return Gh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return jh(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ch(this);var e=this;return Gh(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return jh(e,t),Rh(e,"displayName",t.displayName||null),Rh(e,"photoURL",t.photoUrl||null),K(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Nh(e)})).then(Dh))},t.bd=function(t){var e=this;return Gh(this,Vh(this).then((function(n){return J(Ph(e),t)?function(t,e,n){return ru(t,Oa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return K(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),K(Ph(e),(function(t){n[t]||Lh(e,t)})),n[jo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return Gh(this,this.I().then((function(e){return ru(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");bh(t,null),wh(t,null),Eh(t,null),t.G=[],t.A=!0,Sh(t),Qr(t,"refreshToken",null),t.h&&Lc(t.h,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.i||null)==e&&this.g||"reauthViaPopup"==t&&(this.i||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.i||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.i||null)?I(this.Jb,this):"reauthViaPopup"==t&&e==(this.i||null)?I(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):null},t.Dc=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return Uh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},t.Mc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Oe()}),!0)},t.Ec=function(t){var e=this;return Bh(this,"linkViaRedirect",t,(function(){return Uh(e,t.providerId)}),!1)},t.Nc=function(t){return Bh(this,"reauthViaRedirect",t,(function(){return Oe()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gh(this,this.I().then((function(n){return Ia(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Fh(i,t,"link"),qh(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Gh(this,Oe().then((function(){return fo(Ea(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Fh(i,t,"reauthenticate"),jh(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return Gh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Hi(new Pi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return Gh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Hi(new Pi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return Gh(this,t=fo(Oe(t),n.uid).then((function(t){return e=Fh(n,t,"reauthenticate"),jh(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),K(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.N.w()),t};var Jh={name:"redirectUser",D:"session"};function Xh(t){return ic(t.b,Jh,t.a)}function Yh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Qh,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,$h(t,e.D)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,I(this.g,this))}function $h(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zh(Zu[n]),t.a));return r.push(ic(t.b,Qh,t.a)),function(t){return new Ee((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ce(t[a],E(o,a),s);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=Zh("local");rf(this,(function(){return Oe().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return $h(t,"local").then((function(){t.c=e}))}))}))};var Qh={name:"persistence",D:"session"};function Zh(t){return{name:"authUser",D:t}}function tf(t,e){return rf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ef(t){return rf(t,(function(){return ic(t.b,t.c,t.a)}))}function nf(t,e,n){return rf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rf(t,e){return t.f=t.f.then(e,e),t.f}function of(t){if(this.m=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!pf(this).options||!pf(this).options.apiKey)throw new A("invalid-api-key");t=et.SDK_VERSION?Dr(et.SDK_VERSION):null,this.a=new $s(pf(this).options&&pf(this).options.apiKey,P(k),t),this.R=[],this.u=[],this.P=[],this.ac=et.INTERNAL.createSubscribe(I(this.yc,this)),this.X=void 0,this.bc=et.INTERNAL.createSubscribe(I(this.zc,this)),ff(this,null),this.l=new Yh(pf(this).options.apiKey+":"+pf(this).name),this.G=new Wh(pf(this).options.apiKey+":"+pf(this).name),this.$=mf(this,function(t){var e=pf(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Jh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.G,pf(t).options.authDomain).then((function(e){return(t.s=e)&&(e.ha=t.G),Xh(t.G)}));return mf(t,e)}(t).then((function(){return nf(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.s&&(t.s.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tf(t.l,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ef(t.l)}))):null})).then((function(e){ff(t,e||null)}));return mf(t,n)}(this)),this.h=mf(this,function(t){return t.$.then((function(){return hf(t)})).o((function(){})).then((function(){if(!t.m)return t.pa()})).o((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Zh("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=I(this.Yc,this),this.Ba=I(this.da,this),this.ya=I(this.kc,this),this.za=I(this.vc,this),this.Aa=I(this.wc,this),this.b=null,function(t){var e=pf(t).options.authDomain,n=pf(t).options.apiKey;e&&Lr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Bc(e,n,pf(t).name,t.f),xc(t.b,t),df(t)&&kh(df(t)),t.s){kh(t.s);var r=t.s;r.wa(t.ka()),bh(r,t),Ih(r=t.s,t.N),Eh(r,t),oa((r=t.s).a,t.f),wh(r,t),t.s=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Fc,this),this.A=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function sf(t){Qe.call(this,"languageCodeChanged"),this.i=t}function af(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function uf(t){Qe.call(this,"frameworkChanged"),this.f=t}function cf(t){return t.gb||De(new A("auth-domain-config-required"))}function hf(t){if(!Lr())return De(new A("operation-not-supported-in-this-environment"));var e=cf(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return mf(t,e)}function ff(t,e){df(t)&&(function(t,e){Y(t.R,(function(t){return t==e}))}(df(t),t.Ba),dn(df(t),"tokenChanged",t.ya),dn(df(t),"userDeleted",t.za),dn(df(t),"userInvalidated",t.Aa),Sh(df(t))),e&&(e.R.push(t.Ba),fn(e,"tokenChanged",t.ya),fn(e,"userDeleted",t.za),fn(e,"userInvalidated",t.Aa),0<t.A&&_h(e)),Qr(t,"currentUser",e),e&&(e.wa(t.ka()),bh(e,t),Ih(e,t.N),Eh(e,t),oa(e.a,t.f),wh(e,t))}function lf(t,e){var n=null,r=null;return mf(t,e.then((function(e){return n=Fo(e),r=$i(e),function(t,e){var n={};return n.apiKey=pf(t).options.apiKey,n.authDomain=pf(t).options.authDomain,n.appName=pf(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new gh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return df(t)&&e.uid==df(t).uid?(Mh(df(t),e),t.da(e)):(ff(t,e),kh(e),t.da(e))})).then((function(){yf(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.jc,t))),n||e})).then((function(){return ti({user:df(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function pf(t){return t.app}function df(t){return t.currentUser}function vf(t){return df(t)&&df(t)._lat||null}function yf(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](vf(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](vf(t))}}function mf(t,e){return t.R.push(e),e.na((function(){X(t.R,e)})),e}function gf(){}function bf(){this.a={},this.b=1e12}Yh.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Pu()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),rf(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,$h(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):Oe()}))},_(of,Tn),_(sf,Qe),_(af,Qe),_(uf,Qe),(t=of.prototype).wb=function(t){return mf(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ia(this.a,this.aa),this.dispatchEvent(new sf(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t,e){if(!this.f){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");!function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&wr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))}(!!e&&!!e.disableWarnings),this.f={url:t},this.settings.hb=!0,oa(this.a,this.f),this.dispatchEvent(new af(this.f))}},t.Fc=function(t){this.N.push(t),aa(this.a,et.SDK_VERSION?Dr(et.SDK_VERSION,this.N):null),this.dispatchEvent(new uf(this.N))},t.Ga=function(){return Q(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:pf(this).options.apiKey,authDomain:pf(this).options.authDomain,appName:pf(this).name,currentUser:df(this)&&df(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.i==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.i==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.i==e&&this.g?I(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return lf(i,wa(i.a,o))}))},t.Wc=function(t){if(!Lr())return De(new A("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=qr(),i=null;(!Vr()||Er())&&pf(this).options.authDomain&&t.isOAuthProvider&&(i=gu(pf(this).options.authDomain,pf(this).options.apiKey,pf(this).name,"signInViaPopup",t,null,r,et.SDK_VERSION||null,null,null,this.S(),this.f));var o=mr(i,n&&n.ua,n&&n.ta);return mf(this,n=cf(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new Ee((function(t,n){e.ma("signInViaPopup",null,new A("cancelled-popup-request"),e.i),e.g=t,e.O=n,e.i=r,e.c=Fc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&yr(o),t?ti(t):null})).o((function(t){throw o&&yr(o),t})))},t.Xc=function(t){if(!Lr())return De(new A("operation-not-supported-in-this-environment"));var e=this;return mf(this,cf(this).then((function(){return function(t){return rf(t,(function(){return t.b.set(Qh,t.c.D,t.a)}))}(e.l)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return hf(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.cd=function(t){if(!t)return De(new A("null-user"));if(this.W!=t.tenantId)return De(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=pf(this).options.apiKey,n.authDomain=pf(this).options.authDomain,n.appName=pf(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Zs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Mh(e,t),e}(t,n,e.G,e.Ga());return mf(this,this.h.then((function(){if(pf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return df(e)&&t.uid==df(e).uid?(Mh(df(e),t),e.da(t)):(ff(e,r),kh(r),e.da(r))})).then((function(){yf(e)})))},t.zb=function(){var t=this;return mf(this,this.h.then((function(){return t.b&&zc(t.b.b),df(t)?(ff(t,null),ef(t.l).then((function(){yf(t)}))):Oe()})))},t.Yc=function(){var t=this;return nf(this.l,pf(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=df(t)&&e){n=df(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(df(t),e),df(t).I();(df(t)||e)&&(ff(t,e),e&&(kh(e),e.ha=t.G),t.b&&xc(t.b,t),yf(t))}}))},t.da=function(t){return tf(this.l,t)},t.kc=function(){yf(this),this.da(df(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.h.then((function(){return lf(e,Oe(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(df(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),mf(t,t.h.then((function(){!t.m&&J(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(vf(t)))})))}(this,(function(){t.next(df(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(df(r)):"function"==typeof t.next&&t.next(df(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(df(r)):"function"==typeof t.next&&t.next(df(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return mf(this,this.h.then((function(){return df(e)?df(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.h.then((function(){return lf(e,ru(e.a,$a,{token:t}))})).then((function(t){var n=t.user;return Rh(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.h.then((function(){return lf(n,ru(n.a,Qa,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return lf(n,ru(n.a,Aa,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.h.then((function(){return lf(e,t.ja(e.a))}))},t.Rc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.h.then((function(){var e=df(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return lf(t,t.a.yb()).then((function(e){var n=e.user;return Rh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return df(this)&&df(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&df(this)&&_h(df(this))},t.Oc=function(t){var e=this;K(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&df(this)&&Sh(df(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),mf(this,this.h.then((function(){e.m||J(e.u,t)&&t(vf(e))})))},t.removeAuthTokenListener=function(t){Y(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Zh("local"),t.a,this.pa),this.b&&(Lc(this.b,this),zc(this.b.b)),Promise.resolve()},t.gc=function(t){return mf(this,function(t,e){return ru(t,Na,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Lo(t)},t.vb=function(t,e){var n=this;return mf(this,Oe().then((function(){var t=new Pi(e);if(!t.c)throw new A("argument-error",Ri+" must be true when sending sign in link to email");return Hi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return mf(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return mf(this,this.a.Qa(t).then((function(t){return new ci(t)})))},t.ib=function(t){return mf(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return mf(this,Oe().then((function(){return void 0===e||vt(e)?{}:Hi(new Pi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return mf(this,Qc(this,t,e,I(this.Za,this)))},t.Uc=function(t,e){var n=this;return mf(this,Oe().then((function(){var r=e||lr(),i=xo(t,r);if(!(r=Lo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new A("tenant-id-mismatch");return n.Za(i)})))},gf.prototype.render=function(){},gf.prototype.reset=function(){},gf.prototype.getResponse=function(){},gf.prototype.execute=function(){};var wf=null;function If(t,e){return(e=Ef(e))&&t.a[e]||null}function Ef(t){return(t=void 0===t?1e12:t)?t.toString():null}function Tf(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.i="invisible"!==this.c.size,this.f=he(t);var n=this;this.h=function(){n.execute()},this.i?this.execute():fn(this.f,"click",this.h)}function _f(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sf(){}function Af(){}bf.prototype.render=function(t,e){return this.a[this.b.toString()]=new Tf(t,e),this.b++},bf.prototype.reset=function(t){var e=If(this,t);t=Ef(t),e&&t&&(e.delete(),delete this.a[t])},bf.prototype.getResponse=function(t){return(t=If(this,t))?t.getResponse():null},bf.prototype.execute=function(t){(t=If(this,t))&&t.execute()},Tf.prototype.getResponse=function(){return _f(this),this.b},Tf.prototype.execute=function(){_f(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.i&&t.execute()}),6e4)}),500))},Tf.prototype.delete=function(){_f(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.h)},Qr(Sf,"FACTOR_ID","phone"),Af.prototype.g=function(){return wf||(wf=new bf),Oe(wf)},Af.prototype.c=function(){};var Nf=null;function kf(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Of=new wt(_t,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Df=new Kr(3e4,6e4);kf.prototype.g=function(t){var e=this;return new Ee((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Df.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete a[e.a]},Oe(Ks(kt(Of,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kf.prototype.c=function(){this.b--};var Cf=null;function Pf(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(Nf||(Nf=new Af),s=Nf):(Cf||(Cf=new kf),s=Cf),this.v=s,this.a=n||{theme:"light",type:"image"},this.i=[],this.a[Rf])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.h="invisible"===this.a[Mf],!a.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.h&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[xf];this.a[xf]=function(t){if(Vf(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Pr(c,a);"function"==typeof e&&e(t)}};var h=this.a[Lf];this.a[Lf]=function(){if(Vf(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Pr(h,a);"function"==typeof t&&t()}}}var xf="callback",Lf="expired-callback",Rf="sitekey",Mf="size";function Vf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jf(t,e){return t.i.push(e),e.na((function(){X(t.i,e)})),e}function Uf(t){if(t.A)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ff(t,e,n){var r=!1;try{this.b=n||et.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=et.SDK_VERSION?Dr(et.SDK_VERSION,o):null,Pf.call(this,n,t,e,(function(){try{var t=i.b.auth().ka()}catch(e){t=null}return t}),o,P(k),r)}function qf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Hf.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Hf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Pf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jf(this,Oe().then((function(){if(Rr()&&!Tr())return wr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Fa,{})})).then((function(e){t.a[Rf]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Uf(this);var t=this;return jf(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.h){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Gt(s.name),'"'),s.type){o.push(' type="',Gt(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ye(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):fe(o,s)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Uf(this);var t=this;return jf(this,this.render().then((function(e){return new Ee((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.h&&t.g.execute(t.c)}}))})))},t.reset=function(){Uf(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Uf(this),this.A=!0,this.v.c();for(var t=0;t<this.i.length;t++)this.i[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.h){t=he(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Ff,Pf);var Hf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bf(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Kf(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Gf(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function zf(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Wf(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Jf(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Xf(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Yf(t){return v(t)&&"string"==typeof t.uid}function $f(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Qf(t,e){for(var n in e){var r=e[n].name;t[r]=el(r,t[n],e[n].j)}}function Zf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){qf(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function tl(t,e,n,r){t[e]=el(e,n,r)}function el(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return qf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Qf(of.prototype,{ib:{name:"applyActionCode",j:[Bf("code")]},Qa:{name:"checkActionCode",j:[Bf("code")]},mb:{name:"confirmPasswordReset",j:[Bf("code"),Bf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bf("email"),Bf("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Bf("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Bf("emailLink")]},Gc:{name:"onAuthStateChanged",j:[$f(Gf(),zf(),"nextOrObserver"),zf("opt_error",!0),zf("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[$f(Gf(),zf(),"nextOrObserver"),zf("opt_error",!0),zf("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Bf("email"),$f(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Bf("email"),Gf("actionCodeSettings")]},wb:{name:"setPersistence",j:[Bf("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Jf()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Jf()]},Sc:{name:"signInWithCustomToken",j:[Bf("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Bf("email"),Bf("password")]},Uc:{name:"signInWithEmailLink",j:[Bf("email"),Bf("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[$f({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof gh)}},Wf(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bf(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Bf("url"),Gf("options",!0)]},hd:{name:"verifyPasswordResetCode",j:[Bf("code")]}}),Zf(of.prototype,{lc:{name:"languageCode",jb:$f(Bf(),Wf(),"languageCode")},ti:{name:"tenantId",jb:$f(Bf(),Wf(),"tenantId")}}),of.Persistence=Zu,of.Persistence.LOCAL="local",of.Persistence.SESSION="session",of.Persistence.NONE="none",Qf(gh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Kf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kf("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Jf()]},pb:{name:"linkWithCredential",j:[Jf()]},Cc:{name:"linkWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Jf()]},sb:{name:"reauthenticateWithCredential",j:[Jf()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Bf("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[$f(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bf(null,!0)]},bd:{name:"unlink",j:[Bf("provider")]},Ab:{name:"updateEmail",j:[Bf("email")]},Bb:{name:"updatePassword",j:[Bf("password")]},dd:{name:"updatePhoneNumber",j:[Jf("phone")]},Cb:{name:"updateProfile",j:[Gf("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Bf("email"),$f(Gf("opt_actionCodeSettings",!0),Wf(null,!0),"opt_actionCodeSettings",!0)]}}),Qf(bf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qf(gf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qf(Ee.prototype,{na:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Zf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Kf("appVerificationDisabledForTesting")}}),Qf($c.prototype,{confirm:{name:"confirm",j:[Bf("verificationCode")]}}),tl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Co,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[$f(Bf(),Gf(),"json")]),tl(Po,"credential",(function(t,e){return new Do(t,e)}),[Bf("email"),Bf("password")]),Qf(Do.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(Eo.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(Eo,"credential",To,[$f(Bf(),Gf(),"token")]),tl(Po,"credentialWithLink",xo,[Bf("email"),Bf("emailLink")]),Qf(_o.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(_o,"credential",So,[$f(Bf(),Gf(),"token")]),Qf(Ao.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(Ao,"credential",No,[$f(Bf(),$f(Gf(),Wf()),"idToken"),$f(Bf(),Wf(),"accessToken",!0)]),Qf(ko.prototype,{Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),tl(ko,"credential",Oo,[$f(Bf(),Gf(),"token"),Bf("secret",!0)]),Qf(Io.prototype,{Ca:{name:"addScope",j:[Bf("scope")]},credential:{name:"credential",j:[$f(Bf(),$f(Gf(),Wf()),"optionsOrIdToken"),$f(Bf(),Wf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gf("customOAuthParameters")]}}),Qf(yo.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(lo.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),tl(jo,"credential",Uo,[Bf("verificationId"),Bf("verificationCode")]),Qf(jo.prototype,{eb:{name:"verifyPhoneNumber",j:[$f(Bf(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Xf(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Xf(t.session,co)&&Yf(t.multiFactorHint):t.session&&t.multiFactorUid?Xf(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Qf(Ro.prototype,{w:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(A.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(Jo.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(Wo.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(rh.prototype,{toJSON:{name:"toJSON",j:[Bf(null,!0)]}}),Qf(th.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Qf(ch.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Bf("displayName",!0)]},ad:{name:"unenroll",j:[$f({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Yf},Bf(),"multiFactorInfoIdentifier")]}}),Qf(Ff.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),tl(Ti,"parseLink",Ci,[Bf("link")]),tl(Sf,"assertion",(function(t){return new ah(t)}),[Jf("phone")]),function(){if(void 0===et||!et.INTERNAL||!et.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:of,AuthCredential:ho,Error:A};tl(t,"EmailAuthProvider",Po,[]),tl(t,"FacebookAuthProvider",Eo,[]),tl(t,"GithubAuthProvider",_o,[]),tl(t,"GoogleAuthProvider",Ao,[]),tl(t,"TwitterAuthProvider",ko,[]),tl(t,"OAuthProvider",Io,[Bf("providerId")]),tl(t,"SAMLAuthProvider",wo,[Bf("providerId")]),tl(t,"PhoneAuthProvider",jo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof of)}}]),tl(t,"RecaptchaVerifier",Ff,[$f(Bf(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gf("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof et.app.App)}}]),tl(t,"ActionCodeURL",Ti,[]),tl(t,"PhoneMultiFactorGenerator",Sf,[]),et.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new of(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),et.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.mc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),et.registerVersion("@firebase/auth","0.16.1"),et.INTERNAL.extendNamespace({User:gh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ye=function(t,e){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function me(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ge,be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},we=we||{},Ie=be||self;function Ee(){}function Te(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _e(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Se="closure_uid_"+(1e9*Math.random()>>>0),Ae=0;function Ne(t,e,n){return t.call.apply(t.bind,arguments)}function ke(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Oe(t,e,n){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ne:ke).apply(null,arguments)}function De(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Ce(){return Date.now()}function Pe(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function xe(){this.j=this.j,this.i=this.i}xe.prototype.j=!1,xe.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Se)&&t[Se]||(t[Se]=++Ae)}(this)},xe.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Le=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Re=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Me(t){return Array.prototype.concat.apply([],arguments)}function Ve(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function je(t){return/^[\s\xa0]*$/.test(t)}var Ue,Fe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function qe(t,e){return-1!=t.indexOf(e)}function He(t,e){return t<e?-1:t>e?1:0}t:{var Be=Ie.navigator;if(Be){var Ke=Be.userAgent;if(Ke){Ue=Ke;break t}}Ue=""}function Ge(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ze(t){var e={};for(var n in t)e[n]=t[n];return e}var We="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Je(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<We.length;o++)n=We[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xe(t){return Xe[" "](t),t}Xe[" "]=Ee;var Ye,$e,Qe=qe(Ue,"Opera"),Ze=qe(Ue,"Trident")||qe(Ue,"MSIE"),tn=qe(Ue,"Edge"),en=tn||Ze,nn=qe(Ue,"Gecko")&&!(qe(Ue.toLowerCase(),"webkit")&&!qe(Ue,"Edge"))&&!(qe(Ue,"Trident")||qe(Ue,"MSIE"))&&!qe(Ue,"Edge"),rn=qe(Ue.toLowerCase(),"webkit")&&!qe(Ue,"Edge");function on(){var t=Ie.document;return t?t.documentMode:void 0}t:{var sn="",an=($e=Ue,nn?/rv:([^\);]+)(\)|;)/.exec($e):tn?/Edge\/([\d\.]+)/.exec($e):Ze?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec($e):rn?/WebKit\/(\S+)/.exec($e):Qe?/(?:Version)[ \/]?(\S+)/.exec($e):void 0);if(an&&(sn=an?an[1]:""),Ze){var un=on();if(null!=un&&un>parseFloat(sn)){Ye=String(un);break t}}Ye=sn}var cn,hn={};function fn(t){return function(t,e){var n=hn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Fe(String(Ye)).split("."),r=Fe(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=He(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||He(0==s[2].length,0==a[2].length)||He(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}Ie.document&&Ze?cn=on()||parseInt(Ye,10)||void 0:cn=void 0;var ln=cn,pn=!Ze||9<=Number(ln),dn=Ze&&!fn("9"),vn=function(){if(!Ie.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ie.addEventListener("test",Ee,e),Ie.removeEventListener("test",Ee,e)}catch(t){}return t}();function yn(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function mn(t,e){if(yn.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(nn){t:{try{Xe(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:gn[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}yn.prototype.b=function(){this.defaultPrevented=!0},Pe(mn,yn);var gn={2:"touch",3:"pen",4:"mouse"};mn.prototype.b=function(){mn.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,dn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var bn="closure_listenable_"+(1e6*Math.random()|0),wn=0;function In(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++wn,this.Y=this.Z=!1}function En(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Tn(t){this.src=t,this.a={},this.b=0}function _n(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Le(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(En(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Tn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Sn(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new In(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var An="closure_lm_"+(1e6*Math.random()|0),Nn={};function kn(t,e,n,r,i){if(r&&r.once)return Dn(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kn(t,e[o],n,r,i);return null}return n=jn(n),t&&t[bn]?t.va(e,n,_e(r)?!!r.capture:!!r,i):On(t,e,n,!1,r,i)}function On(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=_e(i)?!!i.capture:!!i;if(s&&!pn)return null;var a=Mn(t);if(a||(t[An]=a=new Tn(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Rn,e=pn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Dn(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Dn(t,e[o],n,r,i);return null}return n=jn(n),t&&t[bn]?t.wa(e,n,_e(r)?!!r.capture:!!r,i):On(t,e,n,!0,r,i)}function Cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Cn(t,e[o],n,r,i);else r=_e(r)?!!r.capture:!!r,n=jn(n),t&&t[bn]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Sn(o=t.a[e],n,r,i))&&(En(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Mn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Sn(e,n,r,i)),(n=-1<t?e[t]:null)&&Pn(n))}function Pn(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[bn])_n(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mn(e))?(_n(n,t),0==n.b&&(n.src=null,e[An]=null)):En(t)}}}function xn(t){return t in Nn?Nn[t]:Nn[t]="on"+t}function Ln(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Pn(t),n.call(r,e)}function Rn(t,e){if(t.Y)return!0;if(!pn){if(!e)t:{e=["window","event"];for(var n=Ie,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ln(t,e=new mn(e,this))}return Ln(t,new mn(e,this))}function Mn(t){return(t=t[An])instanceof Tn?t:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function jn(t){return"function"==typeof t?t:(t[Vn]||(t[Vn]=function(e){return t.handleEvent(e)}),t[Vn])}function Un(){xe.call(this),this.c=new Tn(this),this.J=this,this.C=null}function Fn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new yn(e,t);else if(e instanceof yn)e.target=e.target||t;else{var i=e;Je(e=new yn(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=qn(s,r,!0,e)&&i}if(i=qn(s=e.a=t,r,!0,e)&&i,i=qn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=qn(s=e.a=n[o],r,!1,e)&&i}function qn(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&_n(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Pe(Un,xe),Un.prototype[bn]=!0,(ge=Un.prototype).addEventListener=function(t,e,n,r){kn(this,t,e,n,r)},ge.removeEventListener=function(t,e,n,r){Cn(this,t,e,n,r)},ge.G=function(){if(Un.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)En(n[r]);delete e.a[t],e.b--}}this.C=null},ge.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ge.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Hn=Ie.JSON.stringify;function Bn(){this.b=this.a=null}var Kn,Gn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Wn}),(function(t){t.reset()}));function zn(){var t=$n,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Wn(){this.next=this.b=this.a=null}function Jn(t){Ie.setTimeout((function(){throw t}),0)}function Xn(t,e){Kn||function(){var t=Ie.Promise.resolve(void 0);Kn=function(){t.then(Qn)}}(),Yn||(Kn(),Yn=!0),$n.add(t,e)}Bn.prototype.add=function(t,e){var n=Gn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Wn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Wn.prototype.reset=function(){this.next=this.b=this.a=null};var Yn=!1,$n=new Bn;function Qn(){for(var t;t=zn();){try{t.a.call(t.b)}catch(t){Jn(t)}var e=Gn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Yn=!1}function Zn(t,e){Un.call(this),this.b=t||1,this.a=e||Ie,this.f=Oe(this.Za,this),this.g=Ce()}function tr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function er(t,e,n){if("function"==typeof t)n&&(t=Oe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Oe(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ie.setTimeout(t,e||0)}function nr(t){t.a=er((function(){t.a=null,t.c&&(t.c=!1,nr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Pe(Zn,Un),(ge=Zn.prototype).aa=!1,ge.M=null,ge.Za=function(){if(this.aa){var t=Ce()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Fn(this,"tick"),this.aa&&(tr(this),this.start()))}},ge.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Ce())},ge.G=function(){Zn.X.G.call(this),tr(this),delete this.a};var rr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}ye(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:nr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ie.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(xe);function ir(t){xe.call(this),this.b=t,this.a={}}Pe(ir,xe);var or=[];function sr(t,e,n,r){Array.isArray(n)||(n&&(or[0]=n.toString()),n=or);for(var i=0;i<n.length;i++){var o=kn(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ar(t){Ge(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Pn(t)}),t),t.a={}}function ur(){this.a=!0}function cr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Hn(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ir.prototype.G=function(){ir.X.G.call(this),ar(this)},ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ur.prototype.info=function(){};var hr={},fr=null;function lr(){return fr=fr||new Un}function pr(t){yn.call(this,hr.Fa,t)}function dr(t){var e=lr();Fn(e,new pr(e,t))}function vr(t,e){yn.call(this,hr.STAT_EVENT,t),this.stat=e}function yr(t){var e=lr();Fn(e,new vr(e,t))}function mr(t){yn.call(this,hr.Ga,t)}function gr(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ie.setTimeout((function(){t()}),e)}hr.Fa="serverreachability",Pe(pr,yn),hr.STAT_EVENT="statevent",Pe(vr,yn),hr.Ga="timingevent",Pe(mr,yn);var br={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},wr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ir(){}function Er(t){var e;return(e=t.a)||(e=t.a={}),e}function Tr(){}Ir.prototype.a=null;var _r,Sr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ar(){yn.call(this,"d")}function Nr(){yn.call(this,"c")}function kr(){}function Or(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ir(this),this.P=Dr,t=en?125:void 0,this.R=new Zn(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Pe(Ar,yn),Pe(Nr,yn),Pe(kr,Ir),_r=new kr;var Dr=45e3,Cr={},Pr={};function xr(t,e,n){t.H=1,t.i=ei(Xr(e)),t.j=n,t.I=!0,Lr(t,null)}function Lr(t,e){t.u=Ce(),Vr(t),t.l=Xr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),di(n.b,"t",r),t.D=0,t.a=uo(t.g,t.g.C?e:null),0<t.O&&(t.F=new rr(Oe(t.Ca,t,t.a),t.O)),sr(t.J,t.a,"readystatechange",t.Xa),e=t.B?ze(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),dr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Rr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Mr(t,n);if(i==Pr){4==e&&(t.h=4,yr(14),r=!1),cr(t.c,t.f,null,"[Incomplete Response]");break}if(i==Cr){t.h=4,yr(15),cr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}cr(t.c,t.f,i,null),Hr(t,i)}4==e&&0==n.length&&(t.h=1,yr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),to(e),e.F=!0,yr(11))):(cr(t.c,t.f,n,"[Invalid Chunked Response]"),qr(t),Fr(t))}function Mr(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Pr:(n=Number(e.substring(n,r)),isNaN(n)?Cr:(r+=1)+n>e.length?Pr:(e=e.substr(r,n),t.D=r+n,e))}function Vr(t){t.T=Ce()+t.P,jr(t,t.P)}function jr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=gr(Oe(t.Va,t),e)}function Ur(t){t.o&&(Ie.clearTimeout(t.o),t.o=null)}function Fr(t){0==t.g.v||t.A||ro(t.g,t)}function qr(t){Ur(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,tr(t.R),ar(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Hr(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ii(n.b,t)))if(n.I=t.N,!t.C&&Ii(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;no(n),Gi(n)}Zi(n),yr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=gr(Oe(n.Sa,n),6e3));if(1>=wi(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else oo(n,11)}else if((t.C||n.a==t)&&no(n),!je(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(qe(h,"spdy")||qe(h,"quic")||qe(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Ei(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,ti(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Ce()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=ao(u,u.C?u.ga:null,u.fa),p.C){Ti(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ur(d),Vr(d)),u.a=p}else Qi(u);0<n.g.length&&Ji(n)}else"stop"!=i[0]&&"close"!=i[0]||oo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?oo(n,7):Ki(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);dr(4)}catch(t){}}function Br(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Te(t)||"string"==typeof t)Re(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Te(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Te(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Kr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Kr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Gr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];zr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)zr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function zr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ge=Or.prototype).setTimeout=function(t){this.P=t},ge.Xa=function(t){t=t.target;var e=this.F;e&&3==Fi(t)?e.f():this.Ca(t)},ge.Ca=function(t){try{if(t==this.a)t:{var e=Fi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!en&&!this.a.$())){this.A||4!=e||7==n||dr(8==n||0>=r?3:2),Ur(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!je(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,yr(12),qr(this),Fr(this);break t}cr(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Hr(this,u)}this.I?(Rr(this,e,o),en&&this.b&&3==e&&(sr(this.J,this.R,"tick",this.Wa),this.R.start())):(cr(this.c,this.f,o,null),Hr(this,o)),4==e&&qr(this),this.b&&!this.A&&(4==e?ro(this.g,this):(this.b=!1,Vr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,yr(12)):(this.h=0,yr(13)),qr(this),Fr(this)}}}catch(t){}},ge.Wa=function(){if(this.a){var t=Fi(this.a),e=this.a.$();this.D<e.length&&(Ur(this),Rr(this,t,e),this.b&&4!=t&&Vr(this))}},ge.cancel=function(){this.A=!0,qr(this)},ge.Va=function(){this.o=null;var t=Ce();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(dr(3),yr(17)),qr(this),this.h=2,Fr(this)):jr(this,this.T-t)},(ge=Kr.prototype).K=function(){Gr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ge.L=function(){return Gr(this),this.a.concat()},ge.get=function(t,e){return zr(this.b,t)?this.b[t]:e},ge.set=function(t,e){zr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ge.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Wr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Jr){this.a=void 0!==e?e:t.a,Yr(this,t.f),this.j=t.j,$r(this,t.c),Qr(this,t.h),this.g=t.g,e=t.b;var n=new hi;n.c=e.c,e.a&&(n.a=new Kr(e.a),n.b=e.b),Zr(this,n),this.i=t.i}else t&&(n=String(t).match(Wr))?(this.a=!!e,Yr(this,n[1]||"",!0),this.j=ni(n[2]||""),$r(this,n[3]||"",!0),Qr(this,n[4]),this.g=ni(n[5]||"",!0),Zr(this,n[6]||"",!0),this.i=ni(n[7]||"")):(this.a=!!e,this.b=new hi(null,this.a))}function Xr(t){return new Jr(t)}function Yr(t,e,n){t.f=n?ni(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function $r(t,e,n){t.c=n?ni(e,!0):e}function Qr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Zr(t,e,n){e instanceof hi?(t.b=e,function(t,e){e&&!t.f&&(fi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(li(this,e),di(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ri(e,ui)),t.b=new hi(e,t.a))}function ti(t,e,n){t.b.set(e,n)}function ei(t){return ti(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ce()).toString(36)),t}function ni(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ri(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ii),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ii(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Jr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ri(e,oi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ri(e,oi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ri(n,"/"==n.charAt(0)?ai:si,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ri(n,ci)),t.join("")};var oi=/[#\/\?@]/g,si=/[#\?:]/g,ai=/[#\?]/g,ui=/[#\?@]/g,ci=/#/g;function hi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function fi(t){t.a||(t.a=new Kr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function li(t,e){fi(t),e=vi(t,e),zr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,zr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Gr(t)))}function pi(t,e){return fi(t),e=vi(t,e),zr(t.a.b,e)}function di(t,e,n){li(t,e),0<n.length&&(t.c=null,t.a.set(vi(t,e),Ve(n)),t.b+=n.length)}function vi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ge=hi.prototype).add=function(t,e){fi(this),this.c=null,t=vi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ge.forEach=function(t,e){fi(this),this.a.forEach((function(n,r){Re(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ge.L=function(){fi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ge.K=function(t){fi(this);var e=[];if("string"==typeof t)pi(this,t)&&(e=Me(e,this.a.get(vi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Me(e,t[n])}return e},ge.set=function(t,e){return fi(this),this.c=null,pi(this,t=vi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ge.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ge.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var yi=function(t,e){this.b=t,this.a=e};function mi(t){this.g=t||gi,t=Ie.PerformanceNavigationTiming?0<(t=Ie.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ie.ia&&Ie.ia.ya&&Ie.ia.ya()&&Ie.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var gi=10;function bi(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wi(t){return t.b?1:t.a?t.a.size:0}function Ii(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ei(t,e){t.a?t.a.add(e):t.b=e}function Ti(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function _i(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=me(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ve(t.c)}function Si(){}function Ai(){this.a=new Si}function Ni(t,e,n){var r=n||"";try{Br(t,(function(t,n){var i=t;_e(t)&&(i=Hn(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function ki(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}mi.prototype.cancel=function(){var t,e;if(this.c=_i(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=me(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Si.prototype.stringify=function(t){return Ie.JSON.stringify(t,void 0)},Si.prototype.parse=function(t){return Ie.JSON.parse(t,void 0)};var Oi=Ie.JSON.parse;function Di(t){Un.call(this),this.headers=new Kr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ci,this.D=this.F=!1}Pe(Di,Un);var Ci="",Pi=/^https?$/i,xi=["POST","PUT"];function Li(t){return"content-type"==t.toLowerCase()}function Ri(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Mi(t),ji(t)}function Mi(t){t.u||(t.u=!0,Fn(t,"complete"),Fn(t,"error"))}function Vi(t){if(t.b&&void 0!==we&&(!t.s[1]||4!=Fi(t)||2!=t.W()))if(t.l&&4==Fi(t))er(t.za,0,t);else if(Fn(t,"readystatechange"),4==Fi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Wr)[1]||null;if(!o&&Ie.self&&Ie.self.location){var s=Ie.self.location.protocol;o=s.substr(0,s.length-1)}i=!Pi.test(o?o.toLowerCase():"")}e=i}if(e)Fn(t,"complete"),Fn(t,"success");else{t.h=6;try{var a=2<Fi(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Mi(t)}}finally{ji(t)}}}function ji(t,e){if(t.a){Ui(t);var n=t.a,r=t.s[0]?Ee:null;t.a=null,t.s=null,e||Fn(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ui(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ie.clearTimeout(t.m),t.m=null)}function Fi(t){return t.a?t.a.readyState:0}function qi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ge(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ti(t,e,n))}function Hi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Bi(t){this.pa=0,this.g=[],this.c=new ur,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Hi("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Hi("baseRetryDelayMs",5e3,t),this.Ra=Hi("retryDelaySeedMs",1e4,t),this.Ma=Hi("forwardChannelMaxRetries",2,t),this.ma=Hi("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new mi(t&&t.concurrentRequestLimit),this.ka=new Ai,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ki(t){if(zi(t),3==t.v){var e=t.R++,n=Xr(t.B);ti(n,"SID",t.J),ti(n,"RID",e),ti(n,"TYPE","terminate"),Yi(t,n),(e=new Or(t,t.c,e,void 0)).H=2,e.i=ei(Xr(n)),n=!1,Ie.navigator&&Ie.navigator.sendBeacon&&(n=Ie.navigator.sendBeacon(e.i.toString(),"")),!n&&Ie.Image&&((new Image).src=e.i,n=!0),n||(e.a=uo(e.g,null),e.a.ba(e.i)),e.u=Ce(),Vr(e)}so(t)}function Gi(t){t.a&&(to(t),t.a.cancel(),t.a=null)}function zi(t){Gi(t),t.j&&(Ie.clearTimeout(t.j),t.j=null),no(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ie.clearTimeout(t.h),t.h=null)}function Wi(t,e){t.g.push(new yi(t.Oa++,e)),3==t.v&&Ji(t)}function Ji(t){bi(t.b)||t.h||(t.h=!0,Xn(t.Ba,t),t.u=0)}function Xi(t,e){var n;n=e?e.f:t.R++;var r=Xr(t.B);ti(r,"SID",t.J),ti(r,"RID",n),ti(r,"AID",t.P),Yi(t,r),t.i&&t.l&&qi(r,t.i,t.l),n=new Or(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=$i(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ei(t.b,n),xr(n,r,e)}function Yi(t,e){t.f&&Br({},(function(t,n){ti(e,n,t)}))}function $i(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Oe(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ni(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qi(t){t.a||t.j||(t.T=1,Xn(t.Aa,t),t.o=0)}function Zi(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=gr(Oe(t.Aa,t),io(t,t.o)),t.o++,0))}function to(t){null!=t.s&&(Ie.clearTimeout(t.s),t.s=null)}function eo(t){t.a=new Or(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Xr(t.la);ti(e,"RID","rpc"),ti(e,"SID",t.J),ti(e,"CI",t.H?"0":"1"),ti(e,"AID",t.P),Yi(t,e),ti(e,"TYPE","xmlhttp"),t.i&&t.l&&qi(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ei(Xr(e)),n.j=null,n.I=!0,Lr(n,t)}function no(t){null!=t.m&&(Ie.clearTimeout(t.m),t.m=null)}function ro(t,e){var n=null;if(t.a==e){no(t),to(t),t.a=null;var r=2}else{if(!Ii(t.b,e))return;n=e.s,Ti(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Ce()-e.u;var i=t.u;Fn(r=lr(),new mr(r,n,e,i)),Ji(t)}else Qi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wi(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=gr(Oe(t.Ba,t,e),io(t,t.u)),t.u++,0)))}(t,e)||2==r&&Zi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:oo(t,5);break;case 4:oo(t,10);break;case 3:oo(t,6);break;default:oo(t,2)}}function io(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function oo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Oe(t.Ya,t);n||(n=new Jr("//www.google.com/images/cleardot.gif"),Ie.location&&"http"==Ie.location.protocol||Yr(n,"https"),ei(n)),function(t,e){var n=new ur;if(Ie.Image){var r=new Image;r.onload=De(ki,n,r,"TestLoadImage: loaded",!0,e),r.onerror=De(ki,n,r,"TestLoadImage: error",!1,e),r.onabort=De(ki,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=De(ki,n,r,"TestLoadImage: timeout",!1,e),Ie.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else yr(2);t.v=0,t.f&&t.f.ra(e),so(t),zi(t)}function so(t){t.v=0,t.I=-1,t.f&&(0==_i(t.b).length&&0==t.g.length||(t.b.c.length=0,Ve(t.g),t.g.length=0),t.f.qa())}function ao(t,e,n){var r=function(t){return t instanceof Jr?Xr(t):new Jr(t,void 0)}(n);if(""!=r.c)e&&$r(r,e+"."+r.c),Qr(r,r.h);else{var i=Ie.location;r=function(t,e,n,r){var i=new Jr(null,void 0);return t&&Yr(i,t),e&&$r(i,e),n&&Qr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ge(t.V,(function(t,e){ti(r,e,t)})),e=t.A,n=t.na,e&&n&&ti(r,e,n),ti(r,"VER",t.ha),Yi(t,r),r}function uo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Di(t.Na)).F=t.C,e}function co(){}function ho(){if(Ze&&!(10<=Number(ln)))throw Error("Environmental error: no available transport.")}function fo(t,e){Un.call(this),this.a=new Bi(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!je(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!je(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new vo(this)}function lo(t){Ar.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function po(){Nr.call(this),this.status=1}function vo(t){this.a=t}(ge=Di.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Er(this.H):Er(_r),this.a.onreadystatechange=Oe(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ri(this,t)}t=n||"";var i=new Kr(this.headers);r&&Br(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Li,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ie.FormData&&t instanceof Ie.FormData,!(0<=Le(xi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ui(this),0<this.o&&((this.D=function(t){return Ze&&fn(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Oe(this.xa,this)):this.m=er(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ri(this,t)}},ge.xa=function(){void 0!==we&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Fn(this,"timeout"),this.abort(8))},ge.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Fn(this,"complete"),Fn(this,"abort"),ji(this))},ge.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ji(this,!0)),Di.X.G.call(this)},ge.za=function(){this.j||(this.A||this.l||this.g?Vi(this):this.Ua())},ge.Ua=function(){Vi(this)},ge.W=function(){try{return 2<Fi(this)?this.a.status:-1}catch(t){return-1}},ge.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ge.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Oi(e)}},ge.ua=function(){return this.h},ge.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ge=Bi.prototype).ha=8,ge.v=1,ge.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Or(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Je(r=ze(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=$i(this,n,e),ti(i=Xr(this.B),"RID",t),ti(i,"CVER",22),this.A&&ti(i,"X-HTTP-Session-Id",this.A),Yi(this,i),this.i&&r&&qi(i,this.i,r),Ei(this.b,n),this.Ia&&ti(i,"TYPE","init"),this.da?(ti(i,"$req",e),ti(i,"SID","null"),n.U=!0,xr(n,i,null)):xr(n,i,e),this.v=2}}else 3==this.v&&(t?Xi(this,t):0==this.g.length||bi(this.b)||Xi(this))},ge.Aa=function(){if(this.j=null,eo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=gr(Oe(this.Ta,this),t)}},ge.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,yr(10),Gi(this),eo(this))},ge.Sa=function(){null!=this.m&&(this.m=null,Gi(this),Zi(this),yr(19))},ge.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),yr(2)):(this.c.info("Failed to ping google.com"),yr(1))},(ge=co.prototype).ta=function(){},ge.sa=function(){},ge.ra=function(){},ge.qa=function(){},ge.Ja=function(){},ho.prototype.a=function(t,e){return new fo(t,e)},Pe(fo,Un),fo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;yr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ao(t,null,t.fa),Ji(t)},fo.prototype.close=function(){Ki(this.a)},fo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Wi(this.a,e)}else this.l?((e={}).__data__=Hn(t),Wi(this.a,e)):Wi(this.a,t)},fo.prototype.G=function(){this.a.f=null,delete this.f,Ki(this.a),delete this.a,fo.X.G.call(this)},Pe(lo,Ar),Pe(po,Nr),Pe(vo,co),vo.prototype.ta=function(){Fn(this.a,"a")},vo.prototype.sa=function(t){Fn(this.a,new lo(t))},vo.prototype.ra=function(t){Fn(this.a,new po(t))},vo.prototype.qa=function(){Fn(this.a,"b")},ho.prototype.createWebChannel=ho.prototype.a,fo.prototype.send=fo.prototype.h,fo.prototype.open=fo.prototype.g,fo.prototype.close=fo.prototype.close,br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,wr.COMPLETE="complete",Tr.EventType=Sr,Sr.OPEN="a",Sr.CLOSE="b",Sr.ERROR="c",Sr.MESSAGE="d",Un.prototype.listen=Un.prototype.va,Di.prototype.listenOnce=Di.prototype.wa,Di.prototype.getLastError=Di.prototype.Qa,Di.prototype.getLastErrorCode=Di.prototype.ua,Di.prototype.getStatus=Di.prototype.W,Di.prototype.getResponseJson=Di.prototype.Pa,Di.prototype.getResponseText=Di.prototype.$,Di.prototype.send=Di.prototype.ba;var yo=br,mo=wr,go=hr,bo=10,wo=11,Io=Tr,Eo=Di,To=new F("@firebase/firestore");function _o(){return To.logLevel}function So(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(To.logLevel<=x.DEBUG){var r=e.map(ko);To.debug.apply(To,c(["Firestore (8.2.1): "+t],r))}}function Ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(To.logLevel<=x.ERROR){var r=e.map(ko);To.error.apply(To,c(["Firestore (8.2.1): "+t],r))}}function No(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(To.logLevel<=x.WARN){var r=e.map(ko);To.warn.apply(To,c(["Firestore (8.2.1): "+t],r))}}function ko(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Oo(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw Ao(e),new Error(e)}function Do(t,e){t||Oo()}function Co(t,e){return t}function Po(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var xo=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Po(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Lo(t,e){return t<e?-1:t>e?1:0}function Ro(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Mo(t){return t+"\0"}var Vo=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Lo(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Vo.h=new Vo("");var jo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Uo=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return e(n,t),n}(Error),Fo=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Vo.fromBase64String(e))}catch(e){throw new Uo(jo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Vo.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),qo=function(t){this._=t};function Ho(){if("undefined"==typeof Uint8Array)throw new Uo(jo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bo(){if("undefined"==typeof atob)throw new Uo(jo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Ko=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.fromBase64String=function(t){return Bo(),new n(Fo.fromBase64String(t))},n.fromUint8Array=function(t){return Ho(),new n(Fo.fromUint8Array(t))},n.prototype.toBase64=function(){return Bo(),this._.toBase64()},n.prototype.toUint8Array=function(){return Ho(),this._.toUint8Array()},n.prototype.isEqual=function(t){return this._.isEqual(t._)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(qo),Go=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},zo=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Wo=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Wo.UNAUTHENTICATED=new Wo(null),Wo.P=new Wo("google-credentials-uid"),Wo.g=new Wo("first-party-uid");var Jo=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},Xo=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(Wo.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),Yo=function(){function t(t){var e=this;this.C=null,this.currentUser=Wo.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(So("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Do("string"==typeof n.accessToken),new Jo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return Do(null===t||"string"==typeof t),new Wo(t)},t}(),$o=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=Wo.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Qo=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new $o(this.k,this.M))},t.prototype.S=function(t){t(Wo.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),Zo=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();Zo.U=-1;var ts=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Uo(jo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Uo(jo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Uo(jo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Uo(jo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?Lo(this.nanoseconds,t.nanoseconds):Lo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),es=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new ts(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),ns=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Oo(),void 0===n?n=t.length-e:n>t.length-e&&Oo(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),rs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.Y=function(t,e,r){return new n(t,e,r)},n.prototype.ot=function(){return this.rt().join("/")},n.prototype.toString=function(){return this.ot()},n.ct=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Uo(jo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new n(r)},n.at=function(){return new n([])},n}(ns),is=/^[_a-zA-Z][_a-zA-Z0-9]*$/,os=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.Y=function(t,e,r){return new n(t,e,r)},n.ut=function(t){return is.test(t)},n.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.ut(t)||(t="`"+t+"`"),t})).join(".")},n.prototype.toString=function(){return this.ot()},n.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},n.lt=function(){return new n(["__name__"])},n._t=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new Uo(jo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Uo(jo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Uo(jo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Uo(jo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.at=function(){return new n([])},n}(ns),ss=function(){function t(t){this.path=t}return t.ft=function(e){return new t(rs.ct(e))},t.dt=function(e){return new t(rs.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===rs.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return rs.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new rs(e.slice()))},t}();function as(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hs=function(){function t(t){this.fields=t,t.sort(os.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return Ro(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),fs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(Do(!!t),"string"==typeof t){var e=0,n=fs.exec(t);if(Do(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ps(t.seconds),nanos:ps(t.nanos)}}function ps(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ds(t){return"string"==typeof t?Vo.fromBase64String(t):Vo.fromUint8Array(t)}function vs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ys(t){var e=t.mapValue.fields.__previous_value__;return vs(e)?ys(e):e}function ms(t){var e=ls(t.mapValue.fields.__local_write_time__.timestampValue);return new ts(e.seconds,e.nanos)}function gs(t){return null==t}function bs(t){return 0===t&&1/t==-1/0}function ws(t){return"number"==typeof t&&Number.isInteger(t)&&!bs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?vs(t)?4:10:Oo()}function Es(t,e){var n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ms(t).isEqual(ms(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=ls(t.timestampValue),r=ls(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ds(t.bytesValue).isEqual(ds(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ps(t.geoPointValue.latitude)===ps(e.geoPointValue.latitude)&&ps(t.geoPointValue.longitude)===ps(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ps(t.integerValue)===ps(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ps(t.doubleValue),r=ps(e.doubleValue);return n===r?bs(n)===bs(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ro(t.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(as(n)!==as(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Es(n[i],r[i])))return!1;return!0}(t,e);default:return Oo()}}function Ts(t,e){return void 0!==(t.values||[]).find((function(t){return Es(t,e)}))}function _s(t,e){var n=Is(t),r=Is(e);if(n!==r)return Lo(n,r);switch(n){case 0:return 0;case 1:return Lo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ps(t.integerValue||t.doubleValue),r=ps(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ss(t.timestampValue,e.timestampValue);case 4:return Ss(ms(t),ms(e));case 5:return Lo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ds(t),r=ds(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Lo(n[i],r[i]);if(0!==o)return o}return Lo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Lo(ps(t.latitude),ps(e.latitude));return 0!==n?n:Lo(ps(t.longitude),ps(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=_s(n[i],r[i]);if(o)return o}return Lo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Lo(r[s],o[s]);if(0!==a)return a;var u=_s(n[r[s]],i[o[s]]);if(0!==u)return u}return Lo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Oo()}}function Ss(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Lo(t,e);var n=ls(t),r=ls(e),i=Lo(n.seconds,r.seconds);return 0!==i?i:Lo(n.nanos,r.nanos)}function As(t){return Ns(t)}function Ns(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=ls(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ds(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ss.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ns(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ns(t.fields[o])}return e+"}"}(t.mapValue):Oo();var e,n}function ks(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function Os(t){return!!t&&"integerValue"in t}function Ds(t){return!!t&&"arrayValue"in t}function Cs(t){return!!t&&"nullValue"in t}function Ps(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xs(t){return!!t&&"mapValue"in t}var Ls=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!xs(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Es(this.proto,t.proto)},t}(),Rs=function(){function t(t){void 0===t&&(t=Ls.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Is(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(os.at(),this.Rt);return null!=t?new Ls(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=xs(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Ms(t){var e=[];return us(t.fields||{},(function(t,n){var r=new os([t]);if(xs(n)){var i=Ms(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new hs(e)}var Vs=function(t,e){this.key=t,this.version=e},js=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return e(n,t),n.prototype.field=function(t){return this.Vt.field(t)},n.prototype.data=function(){return this.Vt},n.prototype.vt=function(){return this.Vt.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(Vs),Us=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return e(n,t),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Vs),Fs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Vs),qs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Hs(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qs(t,e,n,r,i,o,s)}function Bs(t){var e=Co(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+As(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),gs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=na(e.startAt)),e.endAt&&(n+="|ub:",n+=na(e.endAt)),e.St=n}return e.St}function Ks(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ia(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Es(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sa(t.startAt,e.startAt)&&sa(t.endAt,e.endAt)}function Gs(t){return ss.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var zs=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return e(n,t),n.create=function(t,e,r){return t.ht()?"in"===e||"not-in"===e?this.Dt(t,e,r):new Ws(t,e,r):"array-contains"===e?new $s(t,r):"in"===e?new Qs(t,r):"not-in"===e?new Zs(t,r):"array-contains-any"===e?new ta(t,r):new n(t,e,r)},n.Dt=function(t,e,n){return"in"===e?new Js(t,n):new Xs(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(_s(e,this.value)):null!==e&&Is(this.value)===Is(e)&&this.Ct(_s(e,this.value))},n.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Oo()}},n.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},n}((function(){})),Ws=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ss.dt(r.referenceValue),i}return e(n,t),n.prototype.matches=function(t){var e=ss.J(t.key,this.key);return this.Ct(e)},n}(zs),Js=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ys(0,n),r}return e(n,t),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(zs),Xs=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ys(0,n),r}return e(n,t),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(zs);function Ys(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ss.dt(t.referenceValue)}))}var $s=function(t){function n(e,n){return t.call(this,e,"array-contains",n)||this}return e(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return Ds(e)&&Ts(e.arrayValue,this.value)},n}(zs),Qs=function(t){function n(e,n){return t.call(this,e,"in",n)||this}return e(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ts(this.value.arrayValue,e)},n}(zs),Zs=function(t){function n(e,n){return t.call(this,e,"not-in",n)||this}return e(n,t),n.prototype.matches=function(t){if(Ts(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ts(this.value.arrayValue,e)},n}(zs),ta=function(t){function n(e,n){return t.call(this,e,"array-contains-any",n)||this}return e(n,t),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Ds(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ts(e.value.arrayValue,t)}))},n}(zs),ea=function(t,e){this.position=t,this.before=e};function na(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return As(t)})).join(",")}var ra=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ia(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function oa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?ss.J(ss.dt(s.referenceValue),n.key):_s(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Es(t.position[n],e.position[n]))return!1;return!0}var aa=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function ua(t,e,n,r,i,o,s,a){return new aa(t,e,n,r,i,o,s,a)}function ca(t){return new aa(t)}function ha(t){return!gs(t.limit)&&"F"===t.limitType}function fa(t){return!gs(t.limit)&&"L"===t.limitType}function la(t){return t.Nt.length>0?t.Nt[0].field:null}function pa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function da(t){return null!==t.collectionGroup}function va(t){var e=Co(t);if(null===e.Ft){e.Ft=[];var n=pa(e),r=la(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new ra(n)),e.Ft.push(new ra(os.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var a=s[o];e.Ft.push(a),a.field.ht()&&(i=!0)}if(!i){var u=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new ra(os.lt(),u))}}}return e.Ft}function ya(t){var e=Co(t);if(!e.Ot)if("F"===e.limitType)e.Ot=Hs(e.path,e.collectionGroup,va(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=va(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ra(o.field,s))}var a=e.endAt?new ea(e.endAt.position,!e.endAt.before):null,u=e.startAt?new ea(e.startAt.position,!e.startAt.before):null;e.Ot=Hs(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.Ot}function ma(t,e,n){return new aa(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ga(t,e){return Ks(ya(t),ya(e))&&t.limitType===e.limitType}function ba(t){return Bs(ya(t))+"|lt:"+t.limitType}function wa(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+As(e.value);var e})).join(", ")+"]"),gs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+na(t.startAt)),t.endAt&&(e+=", endAt: "+na(t.endAt)),"Target("+e+")"}(ya(t))+"; limitType="+t.limitType+")"}function Ia(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):ss.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!oa(t.startAt,va(t),e)||t.endAt&&oa(t.endAt,va(t),e))}(t,e)}function Ea(t){return function(e,n){for(var r=!1,i=0,o=va(t);i<o.length;i++){var s=o[i],a=Ta(s,e,n);if(0!==a)return a;r=r||s.field.ht()}return 0}}function Ta(t,e,n){var r=t.field.ht()?ss.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?_s(r,i):Oo()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oo()}}var _a=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=es.min()),void 0===o&&(o=es.min()),void 0===s&&(s=Vo.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function Sa(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(e)?"-0":e}}function Aa(t){return{integerValue:""+t}}function Na(t,e){return ws(e)?Aa(e):Sa(t,e)}var ka=function(){this.Ut=void 0};function Oa(t,e,n){return t instanceof Pa?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xa?La(t,e):t instanceof Ra?Ma(t,e):function(t,e){var n=Ca(t,e),r=ja(n)+ja(t.Qt);return Os(n)&&Os(t.Qt)?Aa(r):Sa(t.Kt,r)}(t,e)}function Da(t,e,n){return t instanceof xa?La(t,e):t instanceof Ra?Ma(t,e):n}function Ca(t,e){return t instanceof Va?Os(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Pa=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(ka),xa=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return e(n,t),n}(ka);function La(t,e){for(var n=Ua(e),r=function(t){n.some((function(e){return Es(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ra=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return e(n,t),n}(ka);function Ma(t,e){for(var n=Ua(e),r=function(t){n=n.filter((function(e){return!Es(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Va=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return e(n,t),n}(ka);function ja(t){return ps(t.integerValue||t.doubleValue)}function Ua(t){return Ds(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fa=function(t,e){this.field=t,this.transform=e},qa=function(t,e){this.version=t,this.transformResults=e},Ha=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ba(t,e){return void 0!==t.updateTime?e instanceof js&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof js}var Ka=function(){};function Ga(t,e,n){return t instanceof Ya?function(t,e,n){var r=t.value;if(n.transformResults){var i=Za(t.fieldTransforms,e,n.transformResults);r=eu(t.fieldTransforms,r,i)}return new js(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof $a?function(t,e,n){if(!Ba(t.Gt,e))return new Fs(t.key,n.version);var r=Qa(t,e,n.transformResults?Za(t.fieldTransforms,e,n.transformResults):[]);return new js(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Us(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function za(t,e,n,r){return t instanceof Ya?function(t,e,n,r){if(!Ba(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=tu(t.fieldTransforms,n,e,r);i=eu(t.fieldTransforms,i,o)}var s=Xa(e);return new js(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof $a?function(t,e,n,r){if(!Ba(t.Gt,e))return e;var i=Xa(e),o=Qa(t,e,tu(t.fieldTransforms,n,e,r));return new js(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return Ba(t.Gt,e)?new Us(t.key,es.min()):e}(t,e)}function Wa(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof js?e.field(o.field):void 0,a=Ca(o.transform,s||null);null!=a&&(n=null==n?(new Rs).set(o.field,a):n.set(o.field,a))}return n?n.yt():null}(t.fieldTransforms,e):null}function Ja(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ro(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xa&&e instanceof xa||t instanceof Ra&&e instanceof Ra?Ro(t.elements,e.elements,Es):t instanceof Va&&e instanceof Va?Es(t.Qt,e.Qt):t instanceof Pa&&e instanceof Pa}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function Xa(t){return t instanceof js?t.version:es.min()}var Ya=function(t){function n(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return e(n,t),n}(Ka),$a=function(t){function n(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return e(n,t),n}(Ka);function Qa(t,e,n){var r;return r=function(t,e){var n=new Rs(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof js?e.data():Ls.empty()),eu(t.fieldTransforms,r,n)}function Za(t,e,n){var r=[];Do(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof js&&(a=e.field(o.field)),r.push(Da(s,a,n[i]))}return r}function tu(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof js&&(c=n.field(a.field)),null===c&&r instanceof js&&(c=r.field(a.field)),i.push(Oa(u,c,e))}return i}function eu(t,e,n){for(var r=new Rs(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var nu,ru,iu=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return e(n,t),n}(Ka),ou=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return e(n,t),n}(Ka),su=function(t){this.count=t};function au(t){switch(t){case jo.OK:return Oo();case jo.CANCELLED:case jo.UNKNOWN:case jo.DEADLINE_EXCEEDED:case jo.RESOURCE_EXHAUSTED:case jo.INTERNAL:case jo.UNAVAILABLE:case jo.UNAUTHENTICATED:return!1;case jo.INVALID_ARGUMENT:case jo.NOT_FOUND:case jo.ALREADY_EXISTS:case jo.PERMISSION_DENIED:case jo.FAILED_PRECONDITION:case jo.ABORTED:case jo.OUT_OF_RANGE:case jo.UNIMPLEMENTED:case jo.DATA_LOSS:return!0;default:return Oo()}}function uu(t){if(void 0===t)return Ao("GRPC error has no .code"),jo.UNKNOWN;switch(t){case nu.OK:return jo.OK;case nu.CANCELLED:return jo.CANCELLED;case nu.UNKNOWN:return jo.UNKNOWN;case nu.DEADLINE_EXCEEDED:return jo.DEADLINE_EXCEEDED;case nu.RESOURCE_EXHAUSTED:return jo.RESOURCE_EXHAUSTED;case nu.INTERNAL:return jo.INTERNAL;case nu.UNAVAILABLE:return jo.UNAVAILABLE;case nu.UNAUTHENTICATED:return jo.UNAUTHENTICATED;case nu.INVALID_ARGUMENT:return jo.INVALID_ARGUMENT;case nu.NOT_FOUND:return jo.NOT_FOUND;case nu.ALREADY_EXISTS:return jo.ALREADY_EXISTS;case nu.PERMISSION_DENIED:return jo.PERMISSION_DENIED;case nu.FAILED_PRECONDITION:return jo.FAILED_PRECONDITION;case nu.ABORTED:return jo.ABORTED;case nu.OUT_OF_RANGE:return jo.OUT_OF_RANGE;case nu.UNIMPLEMENTED:return jo.UNIMPLEMENTED;case nu.DATA_LOSS:return jo.DATA_LOSS;default:return Oo()}}(ru=nu||(nu={}))[ru.OK=0]="OK",ru[ru.CANCELLED=1]="CANCELLED",ru[ru.UNKNOWN=2]="UNKNOWN",ru[ru.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ru[ru.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ru[ru.NOT_FOUND=5]="NOT_FOUND",ru[ru.ALREADY_EXISTS=6]="ALREADY_EXISTS",ru[ru.PERMISSION_DENIED=7]="PERMISSION_DENIED",ru[ru.UNAUTHENTICATED=16]="UNAUTHENTICATED",ru[ru.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ru[ru.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ru[ru.ABORTED=10]="ABORTED",ru[ru.OUT_OF_RANGE=11]="OUT_OF_RANGE",ru[ru.UNIMPLEMENTED=12]="UNIMPLEMENTED",ru[ru.INTERNAL=13]="INTERNAL",ru[ru.UNAVAILABLE=14]="UNAVAILABLE",ru[ru.DATA_LOSS=15]="DATA_LOSS";var cu=function(){function t(t,e){this.J=t,this.root=e||fu.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,fu.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,fu.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new hu(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new hu(this.root,t,this.J,!1)},t.prototype.se=function(){return new hu(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new hu(this.root,t,this.J,!0)},t}(),hu=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),fu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw Oo();if(this.right._e())throw Oo();var t=this.left.me();if(t!==this.right.me())throw Oo();return t+(this._e()?0:1)},t}();fu.EMPTY=null,fu.RED=!0,fu.Jt=!1,fu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Oo()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Oo()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new fu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var lu=function(){function t(t){this.J=t,this.data=new cu(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new pu(this.data.ee())},t.prototype.ne=function(t){return new pu(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),pu=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),du=new cu(ss.J);function vu(){return du}function yu(){return vu()}var mu=new cu(ss.J);function gu(){return mu}var bu=new cu(ss.J);function wu(){return bu}var Iu=new lu(ss.J);function Eu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Iu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Tu=new lu(Lo);function _u(){return Tu}var Su=function(){function t(t){this.J=t?function(e,n){return t(e,n)||ss.J(e.key,n.key)}:function(t,e){return ss.J(t.key,e.key)},this.Ve=gu(),this.pe=new cu(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Au=function(){function t(){this.ve=new cu(ss.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):Oo():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),Nu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Su.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&ga(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ku=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,Ou.Be(e,n)),new t(es.min(),r,_u(),vu(),Eu())},t}(),Ou=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(Vo.h,n,Eu(),Eu(),Eu())},t}(),Du=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Cu=function(t,e){this.targetId=t,this.Ge=e},Pu=function(t,e,n,r){void 0===n&&(n=Vo.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},xu=function(){function t(){this.ze=0,this.He=Mu(),this.Je=Vo.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Eu(),e=Eu(),n=Eu();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Oo()}})),new Ou(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Mu()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),Lu=function(){function t(t){this.hn=t,this.ln=new Map,this._n=vu(),this.fn=Ru(),this.dn=new lu(Lo)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof js?this.En(r,t.je):t.je instanceof Us&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:Oo()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(Gs(i))if(0===n){var o=new ss(i.path);this.Tn(e,o,new Us(o,es.min()))}else Do(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&Gs(o.target)){var s=new ss(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new Us(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=Eu();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ku(t,n,this.dn,this._n,r);return this._n=vu(),this.fn=Ru(),this.dn=new lu(Lo),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new xu,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new lu(Lo),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||So("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new xu),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function Ru(){return new cu(ss.J)}function Mu(){return new cu(ss.J)}var Vu={asc:"ASCENDING",desc:"DESCENDING"},ju={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uu=function(t,e){this.T=t,this.qt=e};function Fu(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function qu(t,e){return t.qt?e.toBase64():e.toUint8Array()}function Hu(t,e){return Fu(t,e.G())}function Bu(t){return Do(!!t),es.W(function(t){var e=ls(t);return new ts(e.seconds,e.nanos)}(t))}function Ku(t,e){return function(t){return new rs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function Gu(t){var e=rs.ct(t);return Do(vc(e)),e}function zu(t,e){return Ku(t.T,e.path)}function Wu(t,e){var n=Gu(e);if(n.get(1)!==t.T.projectId)throw new Uo(jo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new Uo(jo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new ss($u(n))}function Ju(t,e){return Ku(t.T,e)}function Xu(t){var e=Gu(t);return 4===e.length?rs.at():$u(e)}function Yu(t){return new rs(["projects",t.T.projectId,"databases",t.T.database]).ot()}function $u(t){return Do(t.length>4&&"documents"===t.get(4)),t.X(5)}function Qu(t,e,n){return{name:zu(t,e),fields:n.proto.mapValue.fields}}function Zu(t,e,n){var r=Wu(t,e.name),i=Bu(e.updateTime),o=new Ls({mapValue:{fields:e.fields}});return new js(r,i,o,{hasCommittedMutations:!!n})}function tc(t,e){var n;if(e instanceof Ya)n={update:Qu(t,e.key,e.value)};else if(e instanceof iu)n={delete:zu(t,e.key)};else if(e instanceof $a)n={update:Qu(t,e.key,e.data),updateMask:dc(e.zt)};else{if(!(e instanceof ou))return Oo();n={verify:zu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Pa)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof xa)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Ra)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Va)return{fieldPath:e.field.ot(),increment:n.Qt};throw Oo()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Hu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Oo()}(t,e.Gt)),n}function ec(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ha.updateTime(Bu(t.updateTime)):void 0!==t.exists?Ha.exists(t.exists):Ha.Wt()}(e.currentDocument):Ha.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Do("REQUEST_TIME"===e.setToServerValue),n=new Pa;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new xa(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ra(i)}else"increment"in e?n=new Va(t,e.increment):Oo();var o=os._t(e.fieldPath);return new Fa(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Wu(t,e.update.name),o=new Ls({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new hs(e.map((function(t){return os._t(t)})))}(e.updateMask);return new $a(i,o,s,n,r)}return new Ya(i,o,n,r)}if(e.delete){var a=Wu(t,e.delete);return new iu(a,n)}if(e.verify){var u=Wu(t,e.verify);return new ou(u,n)}return Oo()}function nc(t,e){return{documents:[Ju(t,e.path)]}}function rc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ju(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ju(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Ps(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NAN"}};if(Cs(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ps(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NAN"}};if(Cs(t.value))return{unaryFilter:{field:hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hc(t.field),op:cc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:hc(t.field),direction:uc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||gs(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=sc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=sc(e.endAt)),n}function ic(t){var e=Xu(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Do(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=oc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new ra(fc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return gs(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ac(n.startAt));var h=null;return n.endAt&&(h=ac(n.endAt)),ua(e,i,a,s,u,"F",c,h)}function oc(t){return t?void 0!==t.unaryFilter?[pc(t)]:void 0!==t.fieldFilter?[lc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return oc(t)})).reduce((function(t,e){return t.concat(e)})):Oo():[]}function sc(t){return{before:t.before,values:t.position}}function ac(t){var e=!!t.before,n=t.values||[];return new ea(n,e)}function uc(t){return Vu[t]}function cc(t){return ju[t]}function hc(t){return{fieldPath:t.ot()}}function fc(t){return os._t(t.fieldPath)}function lc(t){return zs.create(fc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Oo()}}(t.fieldFilter.op),t.fieldFilter.value)}function pc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=fc(t.unaryFilter.field);return zs.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=fc(t.unaryFilter.field);return zs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fc(t.unaryFilter.field);return zs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=fc(t.unaryFilter.field);return zs.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Oo()}}function dc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function vc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var yc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},mc=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&Oo(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),gc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new yc,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Ic(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Ac(e.target.error);n.qn.reject(new Ic(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ic(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(So("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Tc(e)},t}(),bc=function(){function t(e,n,r){this.name=e,this.version=n,this.Qn=r,12.2===t.Kn(l())&&Ao("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return So("SimpleDb","Removing database:",t),_c(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=l(),n=t.Kn(e),r=0<n&&n<10,i=t.Gn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(So("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Ic(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Uo(jo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Ic(t,n))},i.onupgradeneeded=function(t){So("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Qn.Yn(e,i.transaction,t.oldVersion,n.version).next((function(){So("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return n.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c;return o(this,(function(h){switch(h.label){case 0:i="readonly"===e,s=0,a=function(){var e,a,c,h,f;return o(this,(function(o){switch(o.label){case 0:++s,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.Jn(t)];case 2:return u.db=o.sent(),e=gc.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),mc.reject(t)})).Mn(),c={},a.catch((function(){})),[4,e.Un];case 3:return[2,(c.value=(o.sent(),a),c)];case 4:return h=o.sent(),f="FirebaseError"!==h.name&&s<3,So("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),wc=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return _c(this.ts.delete())},t}(),Ic=function(t){function n(e,n){var r=this;return(r=t.call(this,jo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return e(n,t),n}(Uo);function Ec(t){return"IndexedDbTransactionError"===t.name}var Tc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(So("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(So("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),_c(n)},t.prototype.add=function(t){return So("SimpleDb","ADD",this.store.name,t,t),_c(this.store.add(t))},t.prototype.get=function(t){var e=this;return _c(this.store.get(t)).next((function(n){return void 0===n&&(n=null),So("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return So("SimpleDb","DELETE",this.store.name,t),_c(this.store.delete(t))},t.prototype.count=function(){return So("SimpleDb","COUNT",this.store.name),_c(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){So("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new mc((function(n,r){e.onerror=function(t){var e=Ac(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new mc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new wc(i),s=e(i.primaryKey,i.value,o);if(s instanceof mc){var a=s.catch((function(t){return o.done(),mc.reject(t)}));n.push(a)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return mc.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function _c(t){return new mc((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ac(t.target.error);n(e)}}))}var Sc=!1;function Ac(t){var e=bc.Kn(l());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sc||(Sc=!0,setTimeout((function(){throw r}),0)),r}}return t}var Nc=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new yc,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new Uo(jo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function kc(t,e){if(Ao("AsyncQueue",e+": "+t),Ec(t))return new Uo(jo.UNAVAILABLE,e+": "+t);throw t}var Oc=function(t,e){this.progress=t,this.gs=e},Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cc=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();function Pc(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Lc(e)),e=xc(t.get(n),e);return Lc(e)}function xc(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Lc(t){return t+""}function Rc(t){var e=t.length;if(Do(e>=2),2===e)return Do(""===t.charAt(0)&&""===t.charAt(1)),rs.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Oo(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Oo()}o=s+2}return new rs(r)}var Mc=function(t,e){this.seconds=t,this.nanoseconds=e},Vc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vc.store="owner",Vc.key="owner";var jc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};jc.store="mutationQueues",jc.keyPath="userId";var Uc=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Uc.store="mutations",Uc.keyPath="batchId",Uc.userMutationsIndex="userMutationsIndex",Uc.userMutationsKeyPath=["userId","batchId"];var Fc=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Pc(e)]},t.key=function(t,e,n){return[t,Pc(e),n]},t}();Fc.store="documentMutations",Fc.PLACEHOLDER=new Fc;var qc=function(t,e){this.path=t,this.readTime=e},Hc=function(t,e){this.path=t,this.version=e},Bc=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Bc.store="remoteDocuments",Bc.readTimeIndex="readTimeIndex",Bc.readTimeIndexPath="readTime",Bc.collectionReadTimeIndex="collectionReadTimeIndex",Bc.collectionReadTimeIndexPath=["parentPath","readTime"];var Kc=function(t){this.byteSize=t};Kc.store="remoteDocumentGlobal",Kc.key="remoteDocumentGlobalKey";var Gc=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Gc.store="targets",Gc.keyPath="targetId",Gc.queryTargetsIndexName="queryTargetsIndex",Gc.queryTargetsKeyPath=["canonicalId","targetId"];var zc=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};zc.store="targetDocuments",zc.keyPath=["targetId","path"],zc.documentTargetsIndex="documentTargetsIndex",zc.documentTargetsKeyPath=["path","targetId"];var Wc=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Wc.key="targetGlobalKey",Wc.store="targetGlobal";var Jc=function(t,e){this.collectionId=t,this.parent=e};Jc.store="collectionParents",Jc.keyPath=["collectionId","parent"];var Xc=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Xc.store="clientMetadata",Xc.keyPath="clientId";var Yc=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Yc.store="bundles",Yc.keyPath="bundleId";var $c=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};$c.store="namedQueries",$c.keyPath="name";var Qc=c(c(c(c([jc.store,Uc.store,Fc.store,Bc.store,Gc.store,Vc.store,Wc.store,zc.store],[Xc.store]),[Kc.store]),[Jc.store]),[Yc.store,$c.store]),Zc=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return e(n,t),n}(Cc);function th(t,e){var n=Co(t);return bc.Hn(n.vs,e)}var eh=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ga(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=za(i,e,e,this.Ds))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=za(u,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Eu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ro(this.mutations,t.mutations,(function(t,e){return Ja(t,e)}))&&Ro(this.baseMutations,t.baseMutations,(function(t,e){return Ja(t,e)}))},t}(),nh=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){Do(e.mutations.length===r.length);for(var i=wu(),o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),rh=function(t){this.Ms=t};function ih(t,e){if(e.document)return Zu(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ss.Tt(e.noDocument.path),r=ch(e.noDocument.readTime);return new Us(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ss.Tt(e.unknownDocument.path);return r=ch(e.unknownDocument.version),new Fs(i,r)}return Oo()}function oh(t,e,n){var r=sh(n),i=e.key.path.Z().rt();if(e instanceof js){var o=function(t,e){return{name:zu(t,e.key),fields:e.vt().mapValue.fields,updateTime:Fu(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new Bc(null,null,o,s,r,i)}if(e instanceof Us){var a=e.key.path.rt(),u=uh(e.version);return s=e.hasCommittedMutations,new Bc(null,new qc(a,u),null,s,r,i)}if(e instanceof Fs){var c=e.key.path.rt(),h=uh(e.version);return new Bc(new Hc(c,h),null,null,!0,r,i)}return Oo()}function sh(t){var e=t.G();return[e.seconds,e.nanoseconds]}function ah(t){var e=new ts(t[0],t[1]);return es.W(e)}function uh(t){var e=t.G();return new Mc(e.seconds,e.nanoseconds)}function ch(t){var e=new ts(t.seconds,t.nanoseconds);return es.W(e)}function hh(t,e){for(var n=(e.baseMutations||[]).map((function(e){return ec(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return ec(t.Ms,e)})),s=ts.fromMillis(e.localWriteTimeMs);return new eh(e.batchId,s,n,o)}function fh(t){var e,n,r=ch(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ch(t.lastLimboFreeSnapshotVersion):es.min();return void 0!==t.query.documents?(Do(1===(n=t.query).documents.length),e=ya(ca(Xu(n.documents[0])))):e=function(t){return ya(ic(t))}(t.query),new _a(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Vo.fromBase64String(t.resumeToken))}function lh(t,e){var n,r=uh(e.Mt),i=uh(e.lastLimboFreeSnapshotVersion);n=Gs(e.target)?nc(t.Ms,e.target):rc(t.Ms,e.target);var o=e.resumeToken.toBase64();return new Gc(e.targetId,Bs(e.target),r,o,e.sequenceNumber,i,n)}function ph(t){var e=ic({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ma(e,e.limit,"L"):e}var dh=function(){function t(){}return t.prototype.Ls=function(t,e){return vh(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ch(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return vh(t).put({bundleId:(n=e).id,createTime:uh(Bu(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return yh(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:ph(e.bundledQuery),readTime:ch(e.readTime)};var e}))},t.prototype.qs=function(t,e){return yh(t).put(function(t){return{name:t.name,readTime:uh(Bu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function vh(t){return th(t,Yc.store)}function yh(t){return th(t,$c.store)}var mh=function(){function t(){this.Us=new gh}return t.prototype.Qs=function(t,e){return this.Us.add(e),mc.resolve()},t.prototype.Ks=function(t,e){return mc.resolve(this.Us.getEntries(e))},t}(),gh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new lu(rs.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new lu(rs.J)).rt()},t}(),bh=function(){function t(){this.Ws=new gh}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:Pc(i)};return wh(t).put(o)}return mc.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Mo(e),""],!1,!0);return wh(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Rc(o.parent))}return n}))},t}();function wh(t){return th(t,Jc.store)}var Ih={js:!1,Gs:0,zs:0,Hs:0},Eh=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function Th(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){if(t.code!==jo.FAILED_PRECONDITION||t.message!==Dc)throw t;return So("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Eh.ti=10,Eh.ei=1e3,Eh.ni=new Eh(41943040,Eh.ti,Eh.ei),Eh.si=new Eh(-1,0,0);var _h=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.ri(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){us(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.nt=function(){return cs(this.oi)},t}(),Sh=function(){function t(){this.ci=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:es.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?mc.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function Ah(t,e,n){var r=t.store(Uc.store),i=t.store(Fc.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ls({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Do(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Fc.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return mc.$n(o).next((function(){return c}))}function Nh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oo();e=t.noDocument}return JSON.stringify(e).length}var kh=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return Do(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dh(t).ls({index:Uc.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=Ch(t),s=Dh(t);return s.add({}).next((function(a){Do("number"==typeof a);for(var u=new eh(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return tc(t.Ms,e)})),i=n.mutations.map((function(e){return tc(t.Ms,e)}));return new Uc(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,u),h=[],f=new lu((function(t,e){return Lo(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Fc.key(i.userId,d.key.path,a);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Fc.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[a]=u.keys()})),mc.$n(h).next((function(){return u}))}))},t.prototype.gi=function(t,e){var n=this;return Dh(t).get(e).next((function(t){return t?(Do(t.userId===n.userId),hh(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?mc.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Dh(t).ls({index:Uc.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Do(e.batchId>=r),o=hh(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Dh(t).ls({index:Uc.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dh(t).os(Uc.userMutationsIndex,n).next((function(t){return t.map((function(t){return hh(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=Fc.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ch(t).ls({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Rc(u);if(a===n.userId&&e.path.isEqual(h))return Dh(t).get(c).next((function(t){if(!t)throw Oo();Do(t.userId===n.userId),o.push(hh(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new lu(Lo),i=[];return e.forEach((function(e){var o=Fc.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ch(t).ls({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Rc(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),mc.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=Fc.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new lu(Lo);return Ch(t).ls({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Rc(u);s===n.userId&&r.st(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Ci(t,a)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Dh(t).get(e).next((function(t){if(null===t)throw Oo();Do(t.userId===n.userId),r.push(hh(n.Kt,t))})))})),mc.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return Ah(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),mc.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return mc.resolve();var r=IDBKeyRange.lowerBound(Fc.prefixForUser(e.userId)),i=[];return Ch(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Rc(t[1]);i.push(o)}else r.done()})).next((function(){Do(0===i.length)}))}))},t.prototype.Mi=function(t,e){return Oh(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return Ph(t).get(this.userId).next((function(t){return t||new jc(e.userId,-1,"")}))},t}();function Oh(t,e,n){var r=Fc.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ch(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Dh(t){return th(t,Uc.store)}function Ch(t){return th(t,Fc.store)}function Ph(t){return th(t,jc.store)}var xh=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),Lh=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new xh(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return es.W(new ts(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return Rh(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return Do(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return Rh(t).ls((function(s,a){var u=fh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Xi(t,u)))})).next((function(){return mc.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Rh(t).ls((function(t,n){var r=fh(n);e(r)}))},t.prototype.Qi=function(t){return Mh(t).get(Wc.key).next((function(t){return Do(null!==t),t}))},t.prototype.Ki=function(t,e){return Mh(t).put(Wc.key,e)},t.prototype.Hi=function(t,e){return Rh(t).put(lh(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=Bs(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Rh(t).ls({range:r,index:Gc.queryTargetsIndexName},(function(t,n,r){var o=fh(n);Ks(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=Vh(t);return e.forEach((function(e){var s=Pc(e.path);i.push(o.put(new zc(n,s))),i.push(r.mi.ir(t,n,e))})),mc.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=Vh(t);return mc.forEach(e,(function(e){var o=Pc(e.path);return mc.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=Vh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Vh(t),i=Eu();return r.ls({range:n,hs:!0},(function(t,e,n){var r=Rc(t[1]),o=new ss(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=Pc(e.path),r=IDBKeyRange.bound([n],[Mo(n)],!1,!0),i=0;return Vh(t).ls({index:zc.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Rh(t).get(e).next((function(t){return t?fh(t):null}))},t}();function Rh(t){return th(t,Gc.store)}function Mh(t){return th(t,Wc.store)}function Vh(t){return th(t,zc.store)}function jh(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Lo(n,i);return 0===s?Lo(r,o):s}var Uh=function(){function t(t){this.ur=t,this.buffer=new lu(jh),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();jh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Fh=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var e=this,n=this.wr?3e5:6e4;So("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Er=this.fs.mr("lru_garbage_collection",n,(function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:this.Er=null,this.wr=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return n.sent(),[3,7];case 3:return Ec(e=n.sent())?(So("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Th(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),qh=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return mc.resolve(Zo.U);var r=new Uh(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(So("LruGarbageCollector","Garbage collection skipped; disabled"),mc.resolve(Ih)):this.vr(t).next((function(r){return r<n.params.Js?(So("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),Ih):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>c.params.Xs?(So("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Xs+" from "+e),r=c.params.Xs):r=e,o=Date.now(),c.gr(t,r)})).next((function(r){return n=r,s=Date.now(),c.tr(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.pr(t,n)})).next((function(t){return u=Date.now(),_o()<=x.DEBUG&&So("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),mc.resolve({js:!0,Gs:r,zs:i,Hs:t})}))},t}(),Hh=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new qh(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return Bh(t,n)},t.prototype.cr=function(t,e,n){return Bh(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return Bh(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return Ph(t)._s((function(r){return Oh(t,r,e).next((function(t){return t&&(n=!0),mc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(s,a){if(a<=e){var u=n.Fr(t,s).next((function(e){if(!e)return o++,r.di(t,s).next((function(){return r.fi(s),Vh(t).delete([0,Pc(s.path)])}))}));i.push(u)}})).next((function(){return mc.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return Bh(t,e)},t.prototype.Nr=function(t,e){var n,r=Vh(t),i=Zo.U;return r.ls({index:zc.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Zo.U&&e(new ss(Rc(n)),i),i=a,n=s):i=Zo.U})).next((function(){i!==Zo.U&&e(new ss(Rc(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function Bh(t,e){return Vh(t).put(function(t,e){return new zc(0,Pc(t.path),e)}(e,t.Ss))}var Kh=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return Wh(t).put(Jh(e),n)},t.prototype.fi=function(t,e){var n=Wh(t),r=Jh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return Wh(t).get(Jh(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return Wh(t).get(Jh(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:Nh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=yu();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=yu(),i=new cu(ss.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,Nh(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return mc.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return Wh(t).ls({range:r},(function(t,e,r){for(var s=ss.Tt(t);o&&ss.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=gu(),o=e.path.length+1,s={};if(n.isEqual(es.min())){var a=e.path.rt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.rt(),c=sh(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Bc.collectionReadTimeIndex}return Wh(t).ls(s,(function(t,n,s){if(t.length===o){var a=ih(r.Kt,n);e.path.st(a.key.path)?a instanceof js&&Ia(e,a)&&(i=i.Ht(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new Gh(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return zh(t).get(Kc.key).next((function(t){return Do(!!t),t}))},t.prototype.$r=function(t,e){return zh(t).put(Kc.key,e)},t.prototype.Br=function(t){if(t){var e=ih(this.Kt,t);return e instanceof Us&&e.version.isEqual(es.min())?null:e}return null},t}(),Gh=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new _h((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return e(n,t),n.prototype.Ti=function(t){var e=this,n=[],r=0,i=new lu((function(t,e){return Lo(t.ot(),e.ot())}));return this.ci.forEach((function(o,s){var a=e.Hr.get(o);if(s._i){var u=oh(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=Nh(u);r+=c-a,n.push(e.zr.hi(t,o,u))}else if(r-=a,e.Gr){var h=oh(e.zr.Kt,new Us(o,es.min()),e.ui(o));n.push(e.zr.hi(t,o,h))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),mc.$n(n)},n.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},n.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},n}(Sh);function zh(t){return th(t,Kc.store)}function Wh(t){return th(t,Bc.store)}function Jh(t){return t.path.rt()}var Xh=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Do(n<r&&n>=0&&r<=11);var o=new gc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vc.store)}(t),function(t){t.createObjectStore(jc.store,{keyPath:jc.keyPath}),t.createObjectStore(Uc.store,{keyPath:Uc.keyPath,autoIncrement:!0}).createIndex(Uc.userMutationsIndex,Uc.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Fc.store)}(t),Yh(t),function(t){t.createObjectStore(Bc.store)}(t));var s=mc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(zc.store),t.deleteObjectStore(Gc.store),t.deleteObjectStore(Wc.store)}(t),Yh(t)),s=s.next((function(){return function(t){var e=t.store(Wc.store),n=new Wc(0,0,es.min().G(),0);return e.put(Wc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Uc.store).os().next((function(n){t.deleteObjectStore(Uc.store),t.createObjectStore(Uc.store,{keyPath:Uc.keyPath,autoIncrement:!0}).createIndex(Uc.userMutationsIndex,Uc.userMutationsKeyPath,{unique:!0});var r=e.store(Uc.store),i=n.map((function(t){return r.put(t)}));return mc.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Xc.store,{keyPath:Xc.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Kc.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Bc.store);e.createIndex(Bc.readTimeIndex,Bc.readTimeIndexPath,{unique:!1}),e.createIndex(Bc.collectionReadTimeIndex,Bc.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.eo(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Yc.store,{keyPath:Yc.keyPath})}(t),function(t){t.createObjectStore($c.store,{keyPath:$c.keyPath})}(t)}))),s},t.prototype.Yr=function(t){var e=0;return t.store(Bc.store).ls((function(t,n){e+=Nh(n)})).next((function(){var n=new Kc(e);return t.store(Kc.store).put(Kc.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(jc.store),r=t.store(Uc.store);return n.os().next((function(n){return mc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Uc.userMutationsIndex,i).next((function(r){return mc.forEach(r,(function(r){Do(r.userId===n.userId);var i=hh(e.Kt,r);return Ah(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(zc.store),n=t.store(Bc.store);return t.store(Wc.store).get(Wc.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new rs(n),s=function(t){return[0,Pc(t)]}(o);r.push(e.get(s).next((function(n){return n?mc.resolve():function(n){return e.put(new zc(0,Pc(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return mc.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(Jc.store,{keyPath:Jc.keyPath});var n=e.store(Jc.store),r=new gh,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Pc(i)})}};return e.store(Bc.store).ls({hs:!0},(function(t,e){var n=new rs(t);return i(n.Z())})).next((function(){return e.store(Fc.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Rc(n));return i(r.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(Gc.store);return n.ls((function(t,r){var i=fh(r),o=lh(e.Kt,i);return n.put(o)}))},t}();function Yh(t){t.createObjectStore(zc.store,{keyPath:zc.keyPath}).createIndex(zc.documentTargetsIndex,zc.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gc.store,{keyPath:Gc.keyPath}).createIndex(Gc.queryTargetsIndexName,Gc.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Wc.store)}var $h="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qh=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=a,this.so=c,this.io=h,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new Uo(jo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new Hh(this,i),this._o=n+"main",this.Kt=new rh(u),this.fo=new bc(this._o,11,new Xh(this.Kt)),this.wo=new Lh(this.mi,this.Kt),this.Ii=new bh,this.Eo=function(t,e){return new Kh(t,e)}(this.Kt,this.Ii),this.To=new dh,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===h&&Ao("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Uo(jo.FAILED_PRECONDITION,$h);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new Zo(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var e=this;return this.lo=function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){return this.Ir?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var e=this;this.fo.Zn((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return i(e,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return tf(e).put(new Xc(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(Ec(e))return So("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return So("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return Zh(t).get(Vc.key).next((function(t){return mc.resolve(e.xo(t))}))},t.prototype.No=function(t){return tf(t).delete(this.clientId)},t.prototype.Fo=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i=this;return o(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=th(t,Xc.store);return e.os().next((function(t){var n=i.ko(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return mc.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Io)for(e=0,n=t;e<n.length;e++)r=n[e],this.Io.removeItem(this.Mo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?mc.resolve(!0):Zh(t).get(Vc.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new Uo(jo.FAILED_PRECONDITION,$h);return!1}}return!(!e.networkEnabled||!e.inForeground)||tf(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&So("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[Vc.store,Xc.store],(function(e){var n=new Zc(e,Zo.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return tf(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return kh.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;So("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.fo.runTransaction(t,o,Qc,(function(o){return i=new Zc(o,r.ro?r.ro.next():Zo.U),"readwrite-primary"===e?r.bo(i).next((function(t){return!!t||r.So(i)})).next((function(e){if(!e)throw Ao("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.no.vo((function(){return r.lo(!1)})),new Uo(jo.FAILED_PRECONDITION,Dc);return n(i)})).next((function(t){return r.Co(i).next((function(){return t}))})):r.zo(i).next((function(){return n(i)}))})).then((function(t){return i.bs(),t}))},t.prototype.zo=function(t){var e=this;return Zh(t).get(Vc.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Uo(jo.FAILED_PRECONDITION,$h)}))},t.prototype.Co=function(t){var e=new Vc(this.clientId,this.allowTabSynchronization,Date.now());return Zh(t).put(Vc.key,e)},t.Wn=function(){return bc.Wn()},t.prototype.Do=function(t){var e=this,n=Zh(t);return n.get(Vc.key).next((function(t){return e.xo(t)?(So("IndexedDbPersistence","Releasing primary lease."),n.delete(Vc.key)):mc.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ao("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return So("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ao("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){Ao("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Zh(t){return th(t,Vc.store)}function tf(t){return th(t,Xc.store)}function ef(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var nf=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=yu();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=vu();return i.forEach((function(t,e){e||(e=new Us(t,es.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return ss.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):da(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new ss(e)).next((function(t){var e=gu();return t instanceof js&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=gu();return this.Ii.Ks(t,i).next((function(s){return mc.forEach(s,(function(s){var a=function(t,e){return new aa(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),f=za(u,h,h,o.Ds);r=f instanceof js?r.Ht(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ia(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=Eu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof $a&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof js&&(c=c.Ht(t,e))})),c}))},t}(),rf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Eu(),i=Eu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),of=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(es.min())?this.hc(t,e):this.uc.Zo(t,r).next((function(o){var s=i.lc(e,o);return(ha(e)||fa(e))&&i._c(e.limitType,s,r,n)?i.hc(t,e):(_o()<=x.DEBUG&&So("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),wa(e)),i.uc.jr(t,e,n).next((function(t){return s.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new lu(Ea(t));return e.forEach((function(e,r){r instanceof js&&Ia(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return _o()<=x.DEBUG&&So("QueryEngine","Using full collection scan to execute query:",wa(e)),this.uc.jr(t,e,es.min())},t}(),sf=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new cu(Lo),this.wc=new _h((function(t){return Bs(t)}),Ks),this.Ec=es.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new nf(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();function af(t,e,n,r){return new sf(t,e,n,r)}function uf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return n=Co(t),r=n.Ho,i=n.Ic,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.Ho.vi(t).next((function(s){return o=s,r=n.persistence.Wo(e),i=new nf(n.Tc,r,n.persistence.jo()),r.vi(t)})).next((function(e){for(var n=[],r=[],s=Eu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return i.Zo(t,s).next((function(t){return{mc:t,Ac:n,Rc:r}}))}))}))];case 1:return s=o.sent(),[2,(n.Ho=r,n.Ic=i,n.fc.ac(n.Ic),s)]}}))}))}function cf(t,e){var n=Co(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=mc.resolve();return o.forEach((function(t){s=s.next((function(){return r.di(e,t)})).next((function(e){var o=e,s=n.ks.get(t);Do(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),s.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function hf(t){var e=Co(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function ff(t,e){var n=Co(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var u=e.resumeToken;if(u.o()>0){var c=a.$t(u,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return Do(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(a,c,e)&&s.push(n.wo.Yi(t,c))}}}));var a=vu();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))})),s.push(lf(t,o,e.Me,r,void 0).next((function(t){a=t}))),!r.isEqual(es.min())){var u=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));s.push(u)}return mc.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,a)}))})).then((function(t){return n.dc=i,t}))}function lf(t,e,n,r,i){var o=Eu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=vu();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Us&&s.version.isEqual(es.min())?(e.fi(n,u),o=o.Ht(n,s)):null==a||s.version.u(a.version)>0||0===s.version.u(a.version)&&a.hasPendingWrites?(e.hi(s,u),o=o.Ht(n,s)):So("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function pf(t,e){var n=Co(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function df(t,e){var n=Co(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?(r=i,mc.resolve(r)):n.wo.Ui(t).next((function(i){return r=new _a(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function vf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=Co(t),i=r.dc.get(e),s=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.mi.removeTarget(t,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!Ec(a=o.sent()))throw a;return So("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.dc=r.dc.remove(e),r.wc.delete(i.target),[2]}}))}))}function yf(t,e,n){var r=Co(t),i=es.min(),o=Eu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Co(t),i=r.wc.get(n);return void 0!==i?mc.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,ya(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:es.min(),n?o:Eu())})).next((function(t){return{documents:t,Pc:o}}))}))}function mf(t,e){var n=Co(t),r=Co(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function gf(t){var e=Co(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Co(t),i=vu(),o=sh(n),s=Wh(e),a=IDBKeyRange.lowerBound(o,!0);return s.ls({index:Bc.readTimeIndex,range:a},(function(t,e){var n=ih(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:ah(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs,r=t.readTime;return e.Ec=r,n}))}function bf(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,(e=Co(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Wh(t),n=es.min();return e.ls({index:Bc.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ah(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Ec=t}))]}))}))}function wf(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c,h,f,l,p,d;return o(this,(function(o){switch(o.label){case 0:for(i=Co(t),s=Eu(),a=vu(),u=wu(),c=0,h=n;c<h.length;c++)f=h[c],l=e.yc(f.metadata.name),f.document&&(s=s.add(l)),a=a.Ht(l,e.gc(f)),u=u.Ht(l,e.Vc(f.metadata.readTime));return p=i.Tc.Or({Gr:!0}),[4,df(i,function(t){return ya(ca(rs.ct("__bundle__/docs/"+t)))}(r))];case 1:return d=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return lf(t,p,a,es.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.wo.Zi(t,d.targetId).next((function(){return i.wo.sr(t,s,d.targetId)})).next((function(){return i.Ic.tc(t,e)}))}))}))]}}))}))}function If(t,e,n){return void 0===n&&(n=Eu()),i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return[4,df(t,ya(ph(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Co(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Bu(e.readTime);if(r.Mt.u(o)>=0)return i.To.qs(t,e);var s=r.$t(Vo.h,o);return i.dc=i.dc.Ht(s.targetId,s),i.wo.Yi(t,s).next((function(){return i.wo.Zi(t,r.targetId)})).next((function(){return i.wo.sr(t,n,r.targetId)})).next((function(){return i.To.qs(t,e)}))}))]}}))}))}var Ef=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return mc.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:Bu(n.createTime)}),mc.resolve()},t.prototype.Bs=function(t,e){return mc.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:ph(t.bundledQuery),readTime:Bu(t.readTime)}}(e)),mc.resolve()},t}(),Tf=function(){function t(){this.Sc=new lu(_f.Dc),this.Cc=new lu(_f.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new _f(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new _f(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new ss(new rs([])),r=new _f(n,t),i=new _f(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new ss(new rs([])),n=new _f(e,t),r=new _f(e,t+1),i=Eu();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new _f(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),_f=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return ss.J(t.key,e.key)||Lo(t.$c,e.$c)},t.xc=function(t,e){return Lo(t.$c,e.$c)||ss.J(t.key,e.key)},t}(),Sf=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new lu(_f.Dc)}return t.prototype.Pi=function(t){return mc.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new eh(i,e,n,r);this.Ho.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.qc=this.qc.add(new _f(u.key,i)),this.Ii.Qs(t,u.key.path.Z())}return mc.resolve(o)},t.prototype.gi=function(t,e){return mc.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return mc.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.bi=function(){return mc.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return mc.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new _f(e,0),i=new _f(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),mc.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new lu(Lo);return e.forEach((function(t){var e=new _f(t,0),i=new _f(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),mc.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;ss.Et(i)||(i=i.child(""));var o=new _f(new ss(i),0),s=new lu(Lo);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),mc.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;Do(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return mc.forEach(e.mutations,(function(i){var o=new _f(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new _f(e,0),r=this.qc.Pe(n);return mc.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return this.Ho.length,mc.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Af=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new cu(ss.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return mc.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=yu();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),mc.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=gu(),i=new ss(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.key,u=s.value,c=u._i,h=u.readTime;if(!e.path.st(a.path))break;h.u(n)<=0||c instanceof js&&Ia(e,c)&&(r=r.Ht(c.key,c))}return mc.resolve(r)},t.prototype.Gc=function(t,e){return mc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new Nf(this)},t.prototype.Lr=function(t){return mc.resolve(this.size)},t}(),Nf=function(t){function n(e){var n=this;return(n=t.call(this)||this).zr=e,n}return e(n,t),n.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),mc.$n(n)},n.prototype.wi=function(t,e){return this.zr.di(t,e)},n.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},n}(Sh),kf=function(){function t(t){this.persistence=t,this.zc=new _h((function(t){return Bs(t)}),Ks),this.lastRemoteSnapshotVersion=es.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new Tf,this.targetCount=0,this.Yc=xh.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),mc.resolve()},t.prototype.Wi=function(t){return mc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return mc.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),mc.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),mc.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new xh(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,mc.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),mc.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,mc.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,a.targetId)),i++)})),mc.$n(o).next((function(){return i}))},t.prototype.er=function(t){return mc.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return mc.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),mc.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),mc.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),mc.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return mc.resolve(n)},t.prototype.Mi=function(t,e){return mc.resolve(this.Jc.Mi(e))},t}(),Of=function(){function t(t,e){var n=this;this.Xc={},this.ro=new Zo(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new kf(this),this.Ii=new mh,this.Eo=function(t,e){return new Af(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new rh(e),this.To=new Ef(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new Sf(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;So("MemoryPersistence","Starting transaction:",t);var i=new Df(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return mc.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),Df=function(t){function n(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return e(n,t),n}(Cc),Cf=function(){function t(t){this.persistence=t,this.sa=new Tf,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw Oo()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),mc.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),mc.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),mc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return mc.forEach(this.oa,(function(r){var i=ss.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return mc.Bn([function(){return mc.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Pf(t,e){return"firestore_clients_"+t+"_"+e}function xf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function Lf(t,e){return"firestore_targets_"+t+"_"+e}var Rf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Uo(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Ao("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Uo(r.error.code,r.error.message)),i?new t(e,r.state,o):(Ao("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Vf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=_u(),s=0;i&&s<r.activeTargetIds.length;++s)i=ws(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ao("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),jf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ao("SharedClientState","Failed to parse online state: "+e),null)},t}(),Uf=function(){function t(){this.activeTargetIds=_u()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ff=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new cu(Lo),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Pf(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Uf),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,s,a,u,c,h,f,l=this;return o(this,(function(o){switch(o.label){case 0:return[4,this.fa.Ko()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(Pf(this.persistenceKey,r)))&&(s=Vf.aa(r,i))&&(this.Ta=this.Ta.Ht(s.clientId,s));for(this.pa(),(a=this.storage.getItem(this.ga))&&(u=this.ba(a))&&this.va(u),c=0,h=this.Ia;c<h.length;c++)f=h[c],this.Ea(f);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(Lf(this.persistenceKey,t));if(n){var r=Mf.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(Lf(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return So("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){So("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){So("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(So("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ma)return void Ao("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return i(e,void 0,void 0,(function(){var t,e,r,i,s,a;return o(this,(function(o){if(this.Ir){if(null!==n.key)if(this.Ra.test(n.key)){if(null==n.newValue)return t=this.za(n.key),[2,this.Ha(t,null)];if(e=this.Ja(n.key,n.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(r=this.Ya(n.key,n.newValue)))return[2,this.Xa(r)]}else if(this.ya.test(n.key)){if(null!==n.newValue&&(i=this.Za(n.key,n.newValue)))return[2,this.tu(i)]}else if(n.key===this.ga){if(null!==n.newValue&&(s=this.ba(n.newValue)))return[2,this.va(s)]}else if(n.key===this.Aa)(a=function(t){var e=Zo.U;if(null!=t)try{var n=JSON.parse(t);Do("number"==typeof n),e=n}catch(t){Ao("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Zo.U&&this.L(a);else if(n.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new Rf(this.currentUser,t,e,n),i=xf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=xf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=Lf(this.persistenceKey,t),i=new Mf(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Vf.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rf.aa(new Wo(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Mf.aa(r,e)},t.prototype.ba=function(t){return jf.aa(t)},t.prototype.Xa=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(So("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.fa.iu(s,a).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=_u();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),qf=function(){function t(){this.ru=new Uf,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Uf,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Hf=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),Bf=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){So("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){So("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Kf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gf=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),zf=function(t){function n(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return e(n,t),n.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new Eo;s.listenOnce(mo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case yo.NO_ERROR:var e=s.getResponseJson();So("Connection","XHR received:",JSON.stringify(e)),i(e);break;case yo.TIMEOUT:So("Connection",'RPC "'+t+'" timed out'),o(new Uo(jo.DEADLINE_EXCEEDED,"Request time out"));break;case yo.HTTP_ERROR:var n=s.getStatus();if(So("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(jo).indexOf(e)>=0?e:jo.UNKNOWN}(r.status);o(new Uo(a,r.message))}else o(new Uo(jo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Uo(jo.UNAVAILABLE,"Connection failed."));break;default:Oo()}}finally{So("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},n.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ho,i=lr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(o.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())||"object"==typeof navigator&&"ReactNative"===navigator.product||l().indexOf("Electron/")>=0||function(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||l().indexOf("MSAppHost/")>=0||d()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");So("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,h=new Gf({du:function(t){c?So("Connection","Not sending because WebChannel is closed:",t):(u||(So("Connection","Opening WebChannel transport."),a.open(),u=!0),So("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(a,Io.EventType.OPEN,(function(){c||So("Connection","WebChannel transport opened.")})),f(a,Io.EventType.CLOSE,(function(){c||(c=!0,So("Connection","WebChannel transport closed"),h.Pu())})),f(a,Io.EventType.ERROR,(function(t){c||(c=!0,No("Connection","WebChannel transport errored:",t),h.Pu(new Uo(jo.UNAVAILABLE,"The operation could not be completed")))})),f(a,Io.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Do(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){So("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=nu[t];if(void 0!==e)return uu(e)}(o),u=i.message;void 0===s&&(s=jo.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.Pu(new Uo(s,u)),a.close()}else So("Connection","WebChannel received:",n),h.yu(n)}})),f(i,go.STAT_EVENT,(function(t){t.stat===bo?So("Connection","Detected buffering proxy"):t.stat===wo&&So("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Ru()}),0),h},n}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);So("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return So("RestConnection","Received: ",t),t}),(function(e){throw No("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Kf[t];return this.Vu+"/v1/"+e+":"+n},t}());function Wf(){return"undefined"!=typeof window?window:null}function Jf(){return"undefined"!=typeof document?document:null}function Xf(t){return new Uu(t,!0)}var Yf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&So("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),$f=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new Yf(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():e&&e.code===jo.RESOURCE_EXHAUSTED?(Ao(e.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):e&&e.code===jo.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new Uo(jo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return i(t,void 0,void 0,(function(){return o(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return So("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(So("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qf=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return e(n,t),n.prototype.ah=function(t){return this.Ku.xu("Listen",t)},n.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Oo()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Do(void 0===e||"string"==typeof e),Vo.fromBase64String(e||"")):(Do(void 0===e||e instanceof Uint8Array),Vo.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?jo.UNKNOWN:uu(t.code);return new Uo(e,t.message||"")}(a);n=new Pu(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Wu(t,r.document.name),o=Bu(r.document.updateTime);var a=new Ls({mapValue:{fields:r.document.fields}}),u=(s=new js(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Du(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Wu(t,r.document),o=r.readTime?Bu(r.readTime):es.min(),a=new Us(i,o),s=r.removedTargetIds||[],n=new Du([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Wu(t,r.document),o=r.removedTargetIds||[],n=new Du([],o,i,null);else{if(!("filter"in e))return Oo();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new su(r),o=h.targetId,n=new Cu(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return es.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?es.min():e.readTime?Bu(e.readTime):es.min()}(t);return this.listener.uh(e,n)},n.prototype.hh=function(t){var e={};e.database=Yu(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=Gs(r)?{documents:nc(t,r)}:{query:rc(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=qu(t,e.resumeToken):e.Mt.u(es.min())>0&&(n.readTime=Fu(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Oo()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},n.prototype.lh=function(t){var e={};e.database=Yu(this.Kt),e.removeTarget=t,this.eh(e)},n}($f),Zf=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return e(n,t),Object.defineProperty(n.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),n.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},n.prototype.sh=function(){this._h&&this.dh([])},n.prototype.ah=function(t){return this.Ku.xu("Write",t)},n.prototype.onMessage=function(t){if(Do(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Do(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Bu(t.updateTime):Bu(e);n.isEqual(es.min())&&(n=Bu(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new qa(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Bu(t.commitTime);return this.listener.wh(n,e)}return Do(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},n.prototype.Th=function(){var t={};t.database=Yu(this.Kt),this.eh(t)},n.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return tc(e.Kt,t)}))};this.eh(n)},n}($f),tl=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return e(n,t),n.prototype.mh=function(){if(this.Ih)throw new Uo(jo.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===jo.UNAUTHENTICATED&&r.credentials.v(),t}))},n.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===jo.UNAUTHENTICATED&&r.credentials.v(),t}))},n.prototype.terminate=function(){this.Ih=!1},n}((function(){})),el=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(Ao(e),this.Ph=!1):So("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),nl=function(t,e,n,r,s){var a=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=s,this.kh.cu((function(t){n.ys((function(){return i(a,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return fl(this)?(So("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=Co(t)).Fh.add(4),[4,il(e)];case 1:return n.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,rl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new el(n,r)};function rl(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:if(!fl(t))return[3,4];e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function il(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:e=0,n=t.Oh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ol(t,e){var n=Co(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),hl(n)?cl(n):Al(n).Ju()&&al(n,e))}function sl(t,e){var n=Co(t),r=Al(n);n.Nh.delete(e),r.Ju()&&ul(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():fl(n)&&n.Mh.set("Unknown"))}function al(t,e){t.Lh.cn(e.targetId),Al(t).hh(e)}function ul(t,e){t.Lh.cn(e),Al(t).lh(e)}function cl(t){t.Lh=new Lu({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Al(t).start(),t.Mh.yh()}function hl(t){return fl(t)&&!Al(t).Hu()&&t.Nh.size>0}function fl(t){return 0===Co(t).Fh.size}function ll(t){t.Lh=void 0}function pl(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.Nh.forEach((function(e,n){al(t,e)})),[2]}))}))}function dl(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){return ll(t),hl(t)?(t.Mh.ph(e),cl(t)):t.Mh.set("Unknown"),[2]}))}))}function vl(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a;return o(this,(function(u){switch(u.label){case 0:if(t.Mh.set("Online"),!(e instanceof Pu&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?(s=i[r],t.Nh.has(s)?[4,t.Ch.$h(s,n)]:[3,3]):[3,5];case 2:o.sent(),t.Nh.delete(s),t.Lh.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),So("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,yl(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Du?t.Lh.wn(e):e instanceof Cu?t.Lh.yn(e):t.Lh.In(e),n.isEqual(es.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,hf(t.Sh)];case 8:return s=u.sent(),n.u(s)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(Vo.h,n.Mt)),ul(t,e);var r=new _a(n.target,e,1,n.sequenceNumber);al(t,r)}})),t.Ch.Bh(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return So("RemoteStore","Failed to raise snapshot:",a=u.sent()),[4,yl(t,a)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function yl(t,e,n){return i(this,void 0,void 0,(function(){var r=this;return o(this,(function(s){switch(s.label){case 0:if(!Ec(e))throw e;return t.Fh.add(1),[4,il(t)];case 1:return s.sent(),t.Mh.set("Offline"),n||(n=function(){return hf(t.Sh)}),t.fs.vo((function(){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return So("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Fh.delete(1),[4,rl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function ml(t,e){return e().catch((function(n){return yl(t,n,e)}))}function gl(t){return i(this,void 0,void 0,(function(){var e,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:e=Co(t),n=Nl(e),r=e.xh.length>0?e.xh[e.xh.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return fl(t)&&t.xh.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,pf(e.Sh,r)];case 3:return null===(i=o.sent())?(0===e.xh.length&&n.Zu(),[3,7]):(r=i.batchId,function(t,e){t.xh.push(e);var n=Nl(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,yl(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return bl(e)&&wl(e),[2]}}))}))}function bl(t){return fl(t)&&!Nl(t).Hu()&&t.xh.length>0}function wl(t){Nl(t).start()}function Il(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return Nl(t).Th(),[2]}))}))}function El(t){return i(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){for(e=Nl(t),n=0,r=t.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]}))}))}function Tl(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=t.xh.shift(),i=nh.from(r,e,n),[4,ml(t,(function(){return t.Ch.qh(i)}))];case 1:return o.sent(),[4,gl(t)];case 2:return o.sent(),[2]}}))}))}function _l(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e&&Nl(t).fh?[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return au(r=e.code)&&r!==jo.ABORTED?(n=t.xh.shift(),Nl(t).Xu(),[4,ml(t,(function(){return t.Ch.Uh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,gl(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bl(t)&&wl(t),[2]}}))}))}function Sl(t,e){return i(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=Co(t),e?(n.Fh.delete(2),[4,rl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Fh.add(2),[4,il(n)]);case 3:r.sent(),n.Mh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Al(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Co(t);return r.mh(),new Qf(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:pl.bind(null,t),Iu:dl.bind(null,t),uh:vl.bind(null,t)}),t.Oh.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Xu(),hl(t)?cl(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),ll(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function Nl(t){var e=this;return t.Kh||(t.Kh=function(t,e,n){var r=Co(t);return r.mh(),new Zf(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Il.bind(null,t),Iu:_l.bind(null,t),Eh:El.bind(null,t),wh:Tl.bind(null,t)}),t.Oh.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Kh.Xu(),[4,gl(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(So("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var kl=function(){this.Wh=void 0,this.listeners=[]},Ol=function(){this.queries=new _h((function(t){return ba(t)}),ga),this.onlineState="Unknown",this.jh=new Set};function Dl(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:if(n=Co(t),r=e.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new kl),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),a=s,[4,n.Gh(r)];case 2:return a.Wh=o.sent(),[3,4];case 3:return u=o.sent(),c=kc(u,"Initialization of query '"+wa(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zh(n.onlineState),s.Wh&&e.Hh(s.Wh)&&Ll(n),[2]}}))}))}function Cl(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){return n=Co(t),r=e.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.Jh(r))]:[2]}))}))}function Pl(t,e){for(var n=Co(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);u.Wh=s}}r&&Ll(n)}function xl(t,e,n){var r=Co(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ll(t){t.jh.forEach((function(t){t.next()}))}var Rl=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Nu(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=Nu.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Ml=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.il=function(){return"metadata"in this.payload},t}(),Vl=function(){function t(t){this.Kt=t}return t.prototype.yc=function(t){return Wu(this.Kt,t)},t.prototype.gc=function(t){return t.metadata.exists?Zu(this.Kt,t.document,!1):new Us(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},t.prototype.Vc=function(t){return Bu(t)},t}();!function(){function t(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.cl=function(t){for(var e=new Map,n=new Vl(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Eu()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,wf(this.Sh,new Vl(this.Kt),this.documents,this.rl.id)];case 1:t=o.sent(),e=this.cl(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,If(this.Sh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Oc(Object.assign({},this.progress),t))]}}))}))}}();var jl=function(t){this.key=t},Ul=function(t){this.key=t},Fl=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Eu(),this.Ce=Eu(),this.ll=Ea(t),this._l=new Su(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Au,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,a=!1,u=ha(this.query)&&i.size===this.query.limit?i.last():null,c=fa(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof js?e:null;f&&(f=Ia(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.ll(f,u)>0||c&&n.ll(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),ha(this.query)||fa(this.query))for(;s.size>this.query.limit;){var h=ha(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:a,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oo()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],a=0===this.hl.size&&this.qe?1:0,u=a!==this.ul;return this.ul=a,0!==o.length||u?{snapshot:new Nu(this.query,t._l,i,o,t.Ce,0===a,u,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new Au,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Eu(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Ul(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new jl(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Eu();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return Nu.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),ql=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Hl=function(t){this.key=t,this.yl=!1},Bl=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new _h((function(t){return ba(t)}),ga),this.Dl=new Map,this.Cl=[],this.xl=new cu(ss.J),this.Nl=new Map,this.Fl=new Tf,this.Ol={},this.kl=new Map,this.Ml=xh.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Kl(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=bp(t),(s=n.Sl.get(e))?(r=s.targetId,n.pl.ka(r),i=s.view.Pl(),[3,4]):[3,1];case 1:return[4,df(n.Sh,ya(e))];case 2:return a=o.sent(),u=n.pl.ka(a.targetId),r=a.targetId,[4,Gl(n,e,r,"current"===u)];case 3:i=o.sent(),n.$l&&ol(n.gl,a),o.label=4;case 4:return[2,i]}}))}))}function Gl(t,e,n,r){return i(this,void 0,void 0,(function(){var s,a,u,c,h,f;return o(this,(function(l){switch(l.label){case 0:return t.Bl=function(e,n,r){return function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=e.view.dl(n))._c?[4,yf(t.Sh,e.query,!1).then((function(t){var n=t.documents;return e.view.dl(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return s=r&&r.Oe.get(e.targetId),a=e.view.Ti(i,t.$l,s),[2,(ip(t,e.targetId,a.ml),a.snapshot)]}}))}))}(t,e,n,r)},[4,yf(t.Sh,e,!0)];case 1:return s=l.sent(),a=new Fl(e,s.Pc),u=a.dl(s.documents),c=Ou.Be(n,r&&"Offline"!==t.onlineState),h=a.Ti(u,t.$l,c),ip(t,n,h.ml),f=new ql(e,n,a),[2,(t.Sl.set(e,f),t.Dl.has(n)?t.Dl.get(n).push(e):t.Dl.set(n,[e]),h.snapshot)]}}))}))}function zl(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=Co(t),r=n.Sl.get(e),(i=n.Dl.get(r.targetId)).length>1?[2,(n.Dl.set(r.targetId,i.filter((function(t){return!ga(t,e)}))),void n.Sl.delete(e))]:n.$l?(n.pl.La(r.targetId),n.pl.Ca(r.targetId)?[3,2]:[4,vf(n.Sh,r.targetId,!1).then((function(){n.pl.Ba(r.targetId),sl(n.gl,r.targetId),np(n,r.targetId)})).catch(Th)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return np(n,r.targetId),[4,vf(n.Sh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Wl(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=wp(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(t,e){var n,r=Co(t),i=ts.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Eu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Wa(c,n.get(c.key));null!=h&&s.push(new $a(c.key,h,Ms(h.proto.mapValue),Ha.exists(!0)))}return r.Ho.yi(t,i,s,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(r.Sh,e)];case 2:return i=o.sent(),r.pl.xa(i.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new cu(Lo)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(r,i.batchId,n),[4,ap(r,i.ci)];case 3:return o.sent(),[4,gl(r.gl)];case 4:return o.sent(),[3,6];case 5:return s=o.sent(),a=kc(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Jl(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:n=Co(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ff(n.Sh,e)];case 2:return r=i.sent(),e.Oe.forEach((function(t,e){var r=n.Nl.get(e);r&&(Do(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?r.yl=!0:t.Qe.size>0?Do(r.yl):t.Ke.size>0&&(Do(r.yl),r.yl=!1))})),[4,ap(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Th(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Xl(t,e,n){var r=Co(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Co(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&Ll(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function Yl(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return(r=Co(t)).pl.qa(e,"rejected",n),i=r.Nl.get(e),(s=i&&i.key)?(a=(a=new cu(ss.J)).Ht(s,new Us(s,es.min())),u=Eu().add(s),c=new ku(es.min(),new Map,new lu(Lo),a,u),[4,Jl(r,c)]):[3,2];case 1:return o.sent(),r.xl=r.xl.remove(s),r.Nl.delete(e),sp(r),[3,4];case 2:return[4,vf(r.Sh,e,!1).then((function(){return np(r,e,n)})).catch(Th)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function $l(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:n=Co(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,cf(n.Sh,e)];case 2:return i=o.sent(),ep(n,r,null),tp(n,r),n.pl.Fa(r,"acknowledged"),[4,ap(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Th(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ql(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=Co(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Co(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return Do(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(r.Sh,e)];case 2:return i=o.sent(),ep(r,e,n),tp(r,e),r.pl.Fa(e,"rejected",n),[4,ap(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Th(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zl(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:fl((n=Co(t)).gl)||So("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(t){var e=Co(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(n.Sh)];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.kl.get(r)||[]).push(e),n.kl.set(r,i),[3,4]);case 3:return s=o.sent(),a=kc(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function tp(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function ep(t,e,n){var r=Co(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function np(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||rp(t,e)}))}function rp(t,e){var n=t.xl.get(e);null!==n&&(sl(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),sp(t))}function ip(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jl?(t.Fl.ir(o.key,e),op(t,o)):o instanceof Ul?(So("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||rp(t,o.key)):Oo()}}function op(t,e){var n=e.key;t.xl.get(n)||(So("SyncEngine","New document in limbo: "+n),t.Cl.push(n),sp(t))}function sp(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Hl(e)),t.xl=t.xl.Ht(e,n),ol(t.gl,new _a(ya(ca(e.path)),n,2,Zo.U))}}function ap(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a,u;return o(this,(function(c){switch(c.label){case 0:return r=Co(t),s=[],a=[],u=[],r.Sl.nt()?[3,3]:(r.Sl.forEach((function(t,i){u.push(r.Bl(i,e,n).then((function(t){if(t){r.$l&&r.pl.qa(i.targetId,t.fromCache?"not-current":"current"),s.push(t);var e=rf.cc(i.targetId,t);a.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vl.uh(s),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f;return o(this,(function(o){switch(o.label){case 0:n=Co(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return mc.forEach(e,(function(e){return mc.forEach(e.rc,(function(r){return n.persistence.mi.ir(t,e.targetId,r)})).next((function(){return mc.forEach(e.oc,(function(r){return n.persistence.mi.cr(t,e.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!Ec(r=o.sent()))throw r;return So("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=s[i],u=a.targetId,a.fromCache||(c=n.dc.get(u),h=c.Mt,f=c.Bt(h),n.dc=n.dc.Ht(u,f));return[2]}}))}))}(r.Sh,a)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function up(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=Co(t)).currentUser.isEqual(e)?[3,3]:(So("SyncEngine","User change. New user:",e.R()),[4,uf(n.Sh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new Uo(jo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(n),n.pl.Qa(e,r.Ac,r.Rc),[4,ap(n,r.mc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function cp(t,e){var n=Co(t),r=n.Nl.get(e);if(r&&r.yl)return Eu().add(r.key);var i=Eu(),o=n.Dl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Sl.get(u);i=i.ye(c.view.fl)}return i}function hp(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,yf((n=Co(t)).Sh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Rl(r),[2,(n.$l&&ip(n,e.targetId,i.ml),i)]}}))}))}function fp(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,gf((e=Co(t)).Sh).then((function(t){return ap(e,t)}))]}))}))}function lp(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s;return o(this,(function(o){switch(o.label){case 0:return[4,function(t,e){var n=Co(t),r=Co(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):mc.resolve(null)}))}))}((i=Co(t)).Sh,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,gl(i.gl)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ep(i,e,r||null),tp(i,e),function(t,e){Co(Co(t).Ho).Fi(e)}(i.Sh,e)):Oo(),o.label=4;case 4:return[4,ap(i,s)];case 5:return o.sent(),[3,7];case 6:So("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}}))}))}function pp(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h;return o(this,(function(o){switch(o.label){case 0:return bp(n=Co(t)),wp(n),!0!==e||!0===n.Ll?[3,3]:(r=n.pl.Sa(),[4,dp(n,r.rt())]);case 1:return i=o.sent(),n.Ll=!0,[4,Sl(n.gl,!0)];case 2:for(o.sent(),s=0,a=i;s<a.length;s++)u=a[s],ol(n.gl,u);return[3,7];case 3:return!1!==e||!1===n.Ll?[3,7]:(c=[],h=Promise.resolve(),n.Dl.forEach((function(t,e){n.pl.$a(e)?c.push(e):h=h.then((function(){return np(n,e),vf(n.Sh,e,!0)})),sl(n.gl,e)})),[4,h]);case 4:return o.sent(),[4,dp(n,c)];case 5:return o.sent(),function(t){var e=Co(t);e.Nl.forEach((function(t,n){sl(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new cu(ss.J)}(n),n.Ll=!1,[4,Sl(n.gl,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function dp(t,e,n){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f,l,p,d,v,y;return o(this,(function(o){switch(o.label){case 0:n=Co(t),r=[],i=[],s=0,a=e,o.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.Dl.get(u))&&0!==h.length?[4,df(n.Sh,ya(h[0]))]:[3,7]):[3,13];case 2:c=o.sent(),f=0,l=h,o.label=3;case 3:return f<l.length?(p=l[f],d=n.Sl.get(p),[4,hp(n,d)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,mf(n.Sh,u)];case 8:return y=o.sent(),[4,df(n.Sh,y)];case 9:return c=o.sent(),[4,Gl(n,vp(y),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vl.uh(i),r)]}}))}))}function vp(t){return ua(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yp(t){var e=Co(t);return Co(Co(e.Sh).persistence).Ko()}function mp(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=Co(t)).Ll?(So("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Dl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gf(i.Sh)];case 3:return s=o.sent(),a=ku.$e(e,"current"===n),[4,ap(i,s,a)];case 4:return o.sent(),[3,8];case 5:return[4,vf(i.Sh,e,!0)];case 6:return o.sent(),np(i,e,r),[3,8];case 7:Oo(),o.label=8;case 8:return[2]}}))}))}function gp(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c,h,f,l,p;return o(this,(function(d){switch(d.label){case 0:if(!(r=bp(t)).Ll)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?(a=s[i],r.Dl.has(a)?(So("SyncEngine","Adding an already active target "+a),[3,5]):[4,mf(r.Sh,a)]):[3,6];case 2:return u=d.sent(),[4,df(r.Sh,u)];case 3:return c=d.sent(),[4,Gl(r,vp(u),c.targetId,!1)];case 4:d.sent(),ol(r.gl,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return o(this,(function(e){switch(e.label){case 0:return r.Dl.has(t)?[4,vf(r.Sh,t,!1).then((function(){sl(r.gl,t),np(r,t)})).catch(Th)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function bp(t){var e=Co(t);return e.gl.Ch.Bh=Jl.bind(null,e),e.gl.Ch.Sn=cp.bind(null,e),e.gl.Ch.$h=Yl.bind(null,e),e.vl.uh=Pl.bind(null,e.Vl),e.vl.ql=xl.bind(null,e.Vl),e}function wp(t){var e=Co(t);return e.gl.Ch.qh=$l.bind(null,e),e.gl.Ch.Uh=Ql.bind(null,e),e}var Ip=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.Kt=Xf(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return af(this.persistence,new of,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Of(Cf.ra,this.Kt)},t.prototype.jl=function(t){return new qf},t.prototype.terminate=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),Ep=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return e(n,t),n.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,bf(this.Sh)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,wp(this.Xl.fa)];case 4:return n.sent(),[4,gl(this.Xl.gl)];case 5:return n.sent(),[2]}}))}))},n.prototype.Jl=function(t){return af(this.persistence,new of,t.Yl,this.Kt)},n.prototype.Hl=function(t){var e=this.persistence.mi.dr;return new Fh(e,t.fs)},n.prototype.Gl=function(t){var e=ef(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Eh.Zs(this.cacheSizeBytes):Eh.ni;return new Qh(this.synchronizeTabs,e,t.clientId,n,t.fs,Wf(),Jf(),this.Kt,this.pl,!!this.forceOwnership)},n.prototype.jl=function(t){return new qf},n}(Ip),Tp=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return e(n,t),n.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){var n,r=this;return o(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),n=this.Xl.fa,this.pl instanceof Ff?(this.pl.fa={nu:lp.bind(null,n),su:mp.bind(null,n),iu:gp.bind(null,n),Ko:yp.bind(null,n),eu:fp.bind(null,n)},[4,this.pl.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.yo((function(t){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,pp(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return s.sent(),[2]}}))}))},n.prototype.jl=function(t){var e=Wf();if(!Ff.Wn(e))throw new Uo(jo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ef(t.gu.T,t.gu.persistenceKey);return new Ff(e,t.fs,n,t.clientId,t.Yl)},n}(Ep),_p=function(){function t(){}return t.prototype.initialize=function(t,e){return i(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(e),this.gl=this.t_(e),this.Vl=this.e_(e),this.fa=this.n_(e,!t.synchronizeTabs),this.pl.da=function(t){return Xl(n.fa,t,1)},this.gl.Ch.s_=up.bind(null,this.fa),[4,Sl(this.gl,this.fa.$l)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Ol},t.prototype.Zl=function(t){var e,n=Xf(t.gu.T),r=(e=t.gu,new zf(e));return function(t,e,n){return new tl(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return Xl(s.fa,t,0)},o=Bf.Wn()?new Bf:new Hf,new nl(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Bl(t,e,n,r,i,o);return s&&(a.Ll=!0),a}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Co(t),So("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,il(e)];case 1:return n.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Sp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ap=(function(){function t(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new yc,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then((function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.o_.cancel()},t.prototype.getMetadata=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Kl=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}}))}))},t.prototype.a_=function(){return i(this,void 0,void 0,(function(){var t,e,n,r;return o(this,(function(i){switch(i.label){case 0:return[4,this.u_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.c_.decode(t),n=Number(e),isNaN(n)&&this.h_("length string ("+e+") is not valid number"),[4,this.l_(n)]);case 2:return r=i.sent(),[2,new Ml(JSON.parse(r),t.length+n)]}}))}))},t.prototype.__=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.u_=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.l_=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.f_()]:[3,3];case 1:n.sent()&&this.h_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.f_=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return[4,this.o_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Uo(jo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new os(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}()),Np=function(t){this._methodName=t};function kp(t,e,n){if(!n)throw new Uo(jo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Op(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Uo(jo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Dp(t,e,n,r){if(!0===e&&!0===r)throw new Uo(jo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Cp(t){if(!ss.Et(t))throw new Uo(jo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Pp(t){if(ss.Et(t))throw new Uo(jo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Oo()}function Lp(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new Uo(jo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xp(t);throw new Uo(jo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Rp(t,e){if(e<=0)throw new Uo(jo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Mp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Uo(jo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Uo(jo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Dp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Vp=new Map,jp=function(){function t(t,e){this.w_="(lite)",this.E_=new Mp({}),this.T_=!1,t instanceof zo?(this.I_=t,this.m_=new Xo):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Uo(jo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(t.options.projectId)}(t),this.m_=new Yo(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Uo(jo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Uo(jo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Mp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Xo;switch(t.type){case"gapi":var e=t.client;return Do(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Uo(jo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return(t=Vp.get(this))&&(So("ComponentProvider","Removing Datastore"),Vp.delete(this),t.terminate()),Promise.resolve();var t},t}(),Up=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qp(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Fp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),qp=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,ca(r))||this).firestore=e,i.D_=r,i.type="collection",i}return e(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Up(this.firestore,null,new ss(t))},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this.D_)},n}(Fp);function Hp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),kp("collection","path",e),t instanceof jp)return Pp(n=rs.ct.apply(rs,c([e],r))),new qp(t,null,n);if(!(t instanceof Up||t instanceof qp))throw new Uo(jo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pp(n=rs.ct.apply(rs,c([t.path],r)).child(rs.ct(e))),new qp(t.firestore,null,n)}function Bp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof qo&&(t=t._),1===arguments.length&&(e=xo.t()),kp("doc","path",e),t instanceof jp)return Cp(n=rs.ct.apply(rs,c([e],r))),new Up(t,null,new ss(n));if(!(t instanceof Up||t instanceof qp))throw new Uo(jo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Cp(n=t.D_.child(rs.ct.apply(rs,c([e],r)))),new Up(t.firestore,t instanceof qp?t.v_:null,new ss(n))}function Kp(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),(t instanceof Up||t instanceof qp)&&(e instanceof Up||e instanceof qp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Gp(t,e){return t instanceof qo&&(t=t._),e instanceof qo&&(e=e._),t instanceof Fp&&e instanceof Fp&&t.firestore===e.firestore&&ga(t.C_,e.C_)&&t.v_===e.v_}var zp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Uo(jo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Uo(jo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return Lo(this.x_,t.x_)||Lo(this.N_,t.N_)},t}(),Wp=/^__.*__$/,Jp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new $a(t,this.data,this.zt,e,this.fieldTransforms):new Ya(t,this.data,e,this.fieldTransforms)},t}(),Xp=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new $a(t,this.data,this.zt,e,this.fieldTransforms)},t}();function Yp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oo()}}var $p=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return md(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Yp(this.k_)&&Wp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Qp=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||Xf(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new $p({k_:t,methodName:e,j_:n,path:os.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function Zp(t){var e=t.p_(),n=Xf(t.I_);return new Qp(t.I_,!!e.ignoreUndefinedProperties,n)}function td(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);pd("Data must be an object, but it was:",s,r);var a,u,c=fd(r,s);if(o.merge)a=new hs(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=dd(e,l[f],n);if(!s.contains(p))throw new Uo(jo.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");gd(h,p)||h.push(p)}a=new hs(h),u=s.fieldTransforms.filter((function(t){return a.It(t.field)}))}else a=null,u=s.fieldTransforms;return new Jp(new Ls(c),a,u)}var ed=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(Np);function nd(t,e,n){return new $p({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var rd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.z_=function(t){return new Fa(t.path,new Pa)},n.prototype.isEqual=function(t){return t instanceof n},n}(Np),id=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return e(n,t),n.prototype.z_=function(t){var e=nd(this,t,!0),n=this.H_.map((function(t){return hd(t,e)})),r=new xa(n);return new Fa(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(Np),od=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return e(n,t),n.prototype.z_=function(t){var e=nd(this,t,!0),n=this.H_.map((function(t){return hd(t,e)})),r=new Ra(n);return new Fa(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(Np),sd=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return e(n,t),n.prototype.z_=function(t){var e=new Va(t.Kt,Na(t.Kt,this.J_));return new Fa(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(Np);function ad(t,e,n,r){var i=t.G_(1,e,n);pd("Data must be an object, but it was:",i,r);var o=[],s=new Rs;us(r,(function(t,r){var a=yd(e,t,n);r instanceof qo&&(r=r._);var u=i.U_(a);if(r instanceof ed)o.push(a);else{var c=hd(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new hs(o);return new Xp(s.yt(),a,i.fieldTransforms)}function ud(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[dd(e,r,n)],u=[i];if(o.length%2!=0)throw new Uo(jo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(dd(e,o[c])),u.push(o[c+1]);for(var h=[],f=new Rs,l=a.length-1;l>=0;--l)if(!gd(h,a[l])){var p=a[l],d=u[l];d instanceof qo&&(d=d._);var v=s.U_(p);if(d instanceof ed)h.push(p);else{var y=hd(d,v);null!=y&&(h.push(p),f.set(p,y))}}var m=new hs(h);return new Xp(f.yt(),m,s.fieldTransforms)}function cd(t,e,n,r){return void 0===r&&(r=!1),hd(n,t.G_(r?4:3,e))}function hd(t,e){if(t instanceof qo&&(t=t._),ld(t))return pd("Unsupported field value:",e,t),fd(t,e);if(t instanceof Np)return function(t,e){if(!Yp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=hd(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof qo&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Na(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ts.fromDate(t);return{timestampValue:Fu(e.Kt,n)}}if(t instanceof ts)return n=new ts(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Fu(e.Kt,n)};if(t instanceof zp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fo)return{bytesValue:qu(e.Kt,t.l)};if(t instanceof Up){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ku(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+xp(t))}(t,e)}function fd(t,e){var n={};return cs(t)?e.path&&e.path.length>0&&e.zt.push(e.path):us(t,(function(t,r){var i=hd(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ld(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ts||t instanceof zp||t instanceof Fo||t instanceof Up||t instanceof Np)}function pd(t,e,n){if(!ld(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xp(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function dd(t,e,n){if(e instanceof qo&&(e=e._),e instanceof Ap)return e.d_;if("string"==typeof e)return yd(t,e);throw md("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var vd=new RegExp("[~\\*/\\[\\]]");function yd(t,e,n){if(e.search(vd)>=0)throw md("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ap.bind.apply(Ap,c([void 0],e.split("."))))).d_}catch(r){throw md("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function md(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Uo(jo.INVALID_ARGUMENT,(a+=". ")+t+u)}function gd(t,e){return t.some((function(t){return t.isEqual(e)}))}var bd=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Uo(jo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=Co(t),r=Yu(n.Kt)+"/documents",i={documents:e.map((function(t){return zu(n.Kt,t)}))},[4,n.Cu("BatchGetDocuments",r,i)];case 1:return s=o.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Do(!!e.found),e.found.name,e.found.updateTime;var n=Wu(t,e.found.name),r=Bu(e.found.updateTime),i=new Ls({mapValue:{fields:e.found.fields}});return new js(n,r,i,{})}(t,e):"missing"in e?function(t,e){Do(!!e.missing),Do(!!e.readTime);var n=Wu(t,e.missing),r=Bu(e.readTime);return new Us(n,r)}(t,e):Oo()}(n.Kt,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Do(!!e),u.push(e)})),u)]}}))}))}(this.Dh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Us||t instanceof js?n.sf(t):Oo()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new iu(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ss.ft(n);e.mutations.push(new ou(r,e.Gt(r)))})),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=Co(t),r=Yu(n.Kt)+"/documents",i={writes:e.map((function(t){return tc(n.Kt,t)}))},[4,n.bu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof js)e=t.version;else{if(!(t instanceof Us))throw Oo();e=es.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Uo(jo.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Ha.updateTime(e):Ha.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(es.min()))throw new Uo(jo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ha.updateTime(e)}return Ha.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),wd=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new Yf(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return i(t,void 0,void 0,(function(){var t,e,n=this;return o(this,(function(r){return t=new bd(this.Dh),(e=this.uf(t))&&e.then((function(e){n.fs.ys((function(){return t.commit().then((function(){n.Ts.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!gs(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!au(e)}return!1},t}(),Id=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=Wo.UNAUTHENTICATED,this.clientId=xo.t(),this._f=function(){},this.N=new yc,this.credentials.S((function(t){So("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new Uo(jo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var e=new yc;return this.fs.Tf((function(){return i(t,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.D(),e.resolve(),[3,6];case 5:return t=r.sent(),n=kc(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ed(t,e){return i(this,void 0,void 0,(function(){var n,r,s=this;return o(this,(function(a){switch(a.label){case 0:return t.fs.Af(),So("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.Yl,t.ff((function(n){r.isEqual(n)||(r=n,t.fs.vo((function(){return i(s,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,uf(e.Sh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Vo((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Td(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(s){switch(s.label){case 0:return t.fs.Af(),[4,_d(t)];case 1:return n=s.sent(),So("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=s.sent(),[4,e.initialize(n,r)];case 3:return s.sent(),t.ff((function(n){return t.fs.vo((function(){return function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=Co(t)).fs.Af(),So("RemoteStore","RemoteStore received new credentials"),r=fl(n),n.Fh.add(3),[4,il(n)];case 1:return i.sent(),r&&n.Mh.set("Unknown"),[4,n.Ch.s_(e)];case 2:return i.sent(),n.Fh.delete(3),[4,rl(n)];case 3:return i.sent(),[2]}}))}))}(e.gl,n)}))})),t.If=e,[2]}}))}))}function _d(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(So("FirestoreClient","Using default OfflineComponentProvider"),[4,Ed(t,new Ip)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Sd(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(So("FirestoreClient","Using default OnlineComponentProvider"),[4,Td(t,new _p)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Ad(t){return _d(t).then((function(t){return t.persistence}))}function Nd(t){return _d(t).then((function(t){return t.Sh}))}function kd(t){return Sd(t).then((function(t){return t.gl}))}function Od(t){return Sd(t).then((function(t){return t.fa}))}function Dd(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Sd(t)];case 1:return e=r.sent(),[2,((n=e.Vl).Gh=Kl.bind(null,e.fa),n.Jh=zl.bind(null,e.fa),n)]}}))}))}function Cd(t,e,n){var r=this;void 0===n&&(n={});var s=new yc;return t.fs.ys((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Sp({next:function(o){e.ys((function(){return Cl(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Uo(jo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Uo(jo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Rl(ca(n.path),o,{includeMetadataChanges:!0,sl:!0});return Dl(t,s)},[4,Dd(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.fs,e,n,s])]}}))}))})),s.promise}function Pd(t,e,n){var r=this;void 0===n&&(n={});var s=new yc;return t.fs.ys((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Sp({next:function(n){e.ys((function(){return Cl(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Uo(jo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Rl(n,o,{includeMetadataChanges:!0,sl:!0});return Dl(t,s)},[4,Dd(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.fs,e,n,s])]}}))}))})),s.promise}var xd=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new Yf(this,"async_queue_retry"),this.vf=function(){var e=Jf();e&&So("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=Jf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Jf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Ec(t=n.sent()))throw t;return So("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Ao("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Nc.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Oo()},t.prototype.Af=function(){},t.prototype.Nf=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),Ld=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new xd,r.w_="name"in e?e.name:"[DEFAULT]",r}return e(n,t),n.prototype.b_=function(){return this.Lf||Md(this),this.Lf.terminate()},n}(jp);function Rd(t){return t.Lf||Md(t),t.Lf.df(),t.Lf}function Md(t){var e=t.p_(),n=function(t,e,n){return new Go(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Id(t.m_,t.Mf,n)}function Vd(t,e,n){var r=this,s=new yc;return t.fs.enqueue((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Ed(t,n)];case 1:return i.sent(),[4,Td(t,e)];case 2:return i.sent(),s.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===jo.FAILED_PRECONDITION||t.code===jo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),s.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return s.promise}))}function jd(t){if(t.R_||t.P_)throw new Uo(jo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ud=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Is(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ps(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ds(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Oo()}},t.prototype.jf=function(t,e){var n=this,r={};return us(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new zp(ps(t.latitude),ps(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=ys(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(ms(t));default:return null}},t.prototype.Bf=function(t){var e=ls(t);return new ts(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=rs.ct(t);Do(vc(n));var r=new zo(n.get(1),n.get(3)),i=new ss(n.X(5));return r.isEqual(e)||Ao("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Fd=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Up(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new qd(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Hd("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),qd=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.data=function(){return t.prototype.data.call(this)},n}(Fd);function Hd(t,e){return"string"==typeof e?yd(t,e):e instanceof qo?e._.d_:e.d_}function Bd(t){if(fa(t)&&0===t.Nt.length)throw new Uo(jo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kd=function(){};function Gd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var zd=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return e(n,t),n.prototype.Yf=function(t){var e=Zp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new Uo(jo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Zd(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Qd(r,t,f))}a={arrayValue:{values:u}}}else a=Qd(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Zd(s,o),a=cd(n,"where",s,"in"===o||"not-in"===o);var l=zs.create(i,o,a);return function(t,e){if(e.xt()){var n=pa(t);if(null!==n&&!n.isEqual(e.field))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=la(t);null!==r&&tv(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Uo(jo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Uo(jo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Fp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new aa(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},n}(Kd),Wd=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return e(n,t),n.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ra(e,n);return function(t,e){if(null===la(t)){var n=pa(t);null!==n&&tv(0,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Fp(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new aa(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},n}(Kd),Jd=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return e(n,t),n.prototype.Yf=function(t){return new Fp(t.firestore,t.v_,ma(t.C_,this.nd,this.sd))},n}(Kd),Xd=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return e(n,t),n.prototype.Yf=function(t){var e=$d(t,this.type,this.rd,this.od);return new Fp(t.firestore,t.v_,function(t,e){return new aa(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},n}(Kd),Yd=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return e(n,t),n.prototype.Yf=function(t){var e=$d(t,this.type,this.rd,this.od);return new Fp(t.firestore,t.v_,function(t,e){return new aa(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},n}(Kd);function $d(t,e,n,r){if(n[0]instanceof qo&&(n[0]=n[0]._),n[0]instanceof Fd)return function(t,e,n,r,i){if(!r)throw new Uo(jo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=va(t);s<a.length;s++){var u=a[s];if(u.field.ht())o.push(ks(e,r.key));else{var c=r.field(u.field);if(vs(c))throw new Uo(jo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.ot();throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ea(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=Zp(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new Uo(jo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!da(t)&&-1!==c.indexOf("/"))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(rs.ct(c));if(!ss.Et(h))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ss(h);a.push(ks(e,f))}else{var l=cd(n,r,c);a.push(l)}}return new ea(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Qd(t,e,n){if(n instanceof qo&&(n=n._),"string"==typeof n){if(""===n)throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!da(e)&&-1!==n.indexOf("/"))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(rs.ct(n));if(!ss.Et(r))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ks(t,new ss(r))}if(n instanceof Up)return ks(t,n.S_);throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xp(n)+".")}function Zd(t,e){if(!Array.isArray(t)||0===t.length)throw new Uo(jo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Uo(jo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function tv(t,e,n){if(!n.isEqual(e))throw new Uo(jo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ev(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function nv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var rv=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return e(n,t),n.prototype.Uf=function(t){return new Fo(t)},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Up(this.firestore,null,e)},n}(Ud),iv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ov=function(t){function n(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).zf=e,a.ad=e,a.metadata=o,a}return e(n,t),n.prototype.exists=function(){return t.prototype.exists.call(this)},n.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new sv(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},n.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Hd("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},n}(Fd),sv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},n}(ov),av=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new iv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new sv(n.zf,n.Hf,r.key,r,new iv(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new Uo(jo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new sv(t.zf,t.Hf,e.doc.key,e.doc,new iv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new sv(t.zf,t.Hf,e.doc.key,e.doc,new iv(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:uv(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function uv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oo()}}function cv(t,e){return t instanceof ov&&e instanceof ov?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof av&&e instanceof av&&t.zf===e.zf&&Gp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var hv=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return e(n,t),n.prototype.Uf=function(t){return new Fo(t)},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Up(this.firestore,null,e)},n}(Ud);function fv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Lp(t,Up);var o=Lp(t.firestore,Ld),s=Zp(o);return e instanceof qo&&(e=e._),pv(o,[("string"==typeof e||e instanceof Ap?ud(s,"updateDoc",t.S_,e,n,r):ad(s,"updateDoc",t.S_,e)).F_(t.S_,Ha.exists(!0))])}function lv(t){for(var e,n,r,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t instanceof qo&&(t=t._);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||ev(s[c])||(u=s[c],c++);var h,f,l,p={includeMetadataChanges:u.includeMetadataChanges};if(ev(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),s[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Up)f=Lp(t.firestore,Ld),l=ca(t.S_.path),h={next:function(e){s[c]&&s[c](dv(f,t,e))},error:s[c+1],complete:s[c+2]};else{var v=Lp(t,Fp);f=Lp(v.firestore,Ld),l=v.C_;var y=new hv(f);h={next:function(t){s[c]&&s[c](new av(f,y,v,t))},error:s[c+1],complete:s[c+2]},Bd(t.C_)}return function(t,e,n,r){var s=this,a=new Sp(r),u=new Rl(e,a,n);return t.fs.ys((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Dl,[4,Dd(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){a.r_(),t.fs.ys((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Cl,[4,Dd(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(Rd(f),l,p,h)}function pv(t,e){return function(t,e){var n=this,r=new yc;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=Wl,[4,Od(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Rd(t),e)}function dv(t,e,n){var r=n.docs.get(e.S_),i=new hv(t);return new ov(t,i,e.S_,r,new iv(n.hasPendingWrites,n.fromCache),e.v_)}var vv=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=Zp(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=yv(t,this.zf),i=nv(r.v_,e,n),o=td(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,Ha.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=yv(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof Ap?ud(this.wd,"WriteBatch.update",s.S_,e,n,r):ad(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,Ha.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=yv(t,this.zf);return this.fd=this.fd.concat(new iu(e.S_,Ha.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new Uo(jo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function yv(t,e){if(t instanceof qo&&(t=t._),t.firestore!==e)throw new Uo(jo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var mv=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return e(n,t),n.prototype.get=function(e){var n=this,r=yv(e,this.zf),i=new hv(this.zf);return t.prototype.get.call(this,e).then((function(t){return new ov(n.zf,i,r.S_,t.Jf,new iv(!1,!1),r.v_)}))},n}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=Zp(t)}return t.prototype.get=function(t){var e=this,n=yv(t,this.zf),r=new rv(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Oo();var i=t[0];if(i instanceof Us)return new Fd(e.zf,r,n.S_,null,n.v_);if(i instanceof js)return new Fd(e.zf,r,i.key,i,n.v_);throw Oo()}))},t.prototype.set=function(t,e,n){var r=yv(t,this.zf),i=nv(r.v_,e,n),o=td(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=yv(t,this.zf);return e instanceof qo&&(e=e._),o="string"==typeof e||e instanceof Ap?ud(this.wd,"Transaction.update",s.S_,e,n,r):ad(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=yv(t,this.zf);return this.Td.delete(e.S_),this},t}()),gv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){jd(t=Lp(t,Ld));var n=Rd(t),r=t.p_(),i=new _p;return Vd(n,i,new Ep(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){jd(t=Lp(t,Ld));var e=Rd(t),n=t.p_(),r=new _p;return Vd(e,r,new Tp(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Uo(jo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new yc;return t.Mf.Tf((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return bc.Wn()?(e=t+"main",[4,bc.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ef(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._)},t}(),bv=function(t){function n(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof zo||(i.md=e),i}return e(n,t),Object.defineProperty(n.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},n.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&No("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},n.prototype.enableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Ad(t)];case 1:return e=r.sent(),[4,kd(t)];case 2:return n=r.sent(),[2,(e.po(!0),function(t){var e=Co(t);return e.Fh.delete(0),rl(e)}(n))]}}))}))}))}(Rd(Lp(this._,Ld)))},n.prototype.disableNetwork=function(){return function(t){var e=this;return t.fs.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Ad(t)];case 1:return e=r.sent(),[4,kd(t)];case 2:return n=r.sent(),[2,(e.po(!1),function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=Co(t)).Fh.add(0),[4,il(e)];case 1:return n.sent(),e.Mh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Rd(Lp(this._,Ld)))},n.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Dp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},n.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},n.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new yc;return t.fs.ys((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e=Zl,[4,Od(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Rd(Lp(this._,Ld)))},n.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sp(e);return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Co(t).jh.add(e),e.next()},[4,Dd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.r_(),t.fs.ys((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Co(t).jh.delete(e)},[4,Dd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Rd(t=Lp(t,Ld)),ev(e)?e:{next:e})}(this._,t)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.md)throw new Uo(jo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new Pv(this,Hp(this._,t))}catch(t){throw _v(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new Tv(this,Bp(this._,t))}catch(t){throw _v(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new Ov(this,function(t,e){if(t=Lp(t,jp),kp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Uo(jo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Fp(t,null,function(t){return new aa(rs.at(),t)}(e))}(this._,t))}catch(t){throw _v(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new yc;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,function(t){return Sd(t).then((function(t){return t.Dh}))}(t)];case 1:return n=i.sent(),new wd(t.fs,n,e,r).run(),[2]}}))}))})),r.promise}(Rd(t),(function(n){return e(new mv(t,n))}))}(this._,(function(n){return t(new Iv(e,n))}))},n.prototype.batch=function(){var t=this;return Rd(this._),new Ev(new vv(this._,(function(e){return pv(t._,e)})))},n.prototype.loadBundle=function(t){throw new Uo(jo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},n.prototype.namedQuery=function(t){throw new Uo(jo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},n}(qo),wv=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return e(n,t),n.prototype.Uf=function(t){return new Ko(new Fo(t))},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return Tv.Ad(e,this.firestore,null)},n}(Ud),Iv=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return e(n,t),n.prototype.get=function(t){var e=this,n=xv(t);return this._.get(n).then((function(t){return new Nv(e.zf,t)}))},n.prototype.set=function(t,e,n){var r=xv(t);return n?(Op("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},n.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=xv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,c([s,e,n],i)),this},n.prototype.delete=function(t){var e=xv(t);return this._.delete(e),this},n}(qo),Ev=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.set=function(t,e,n){var r=xv(t);return n?(Op("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},n.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=xv(t);return 2===arguments.length?this._.update(s,e):(r=this._).update.apply(r,c([s,e,n],i)),this},n.prototype.delete=function(t){var e=xv(t);return this._.delete(e),this},n.prototype.commit=function(){return this._.commit()},n}(qo),Tv=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new wv(e),r}return e(n,t),n.Rd=function(t,e,r){if(t.length%2!=0)throw new Uo(jo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new n(e,new Up(e._,r,new ss(t)))},n.Ad=function(t,e,r){return new n(e,new Up(e._,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new Pv(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new Pv(this.firestore,Hp(this._,t))}catch(t){throw _v(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof Up&&Kp(this._,t)},n.prototype.set=function(t,e){e=Op("DocumentReference.set",e);try{return function(t,e,n){t=Lp(t,Up);var r=Lp(t.firestore,Ld),i=nv(t.v_,e,n);return pv(r,[td(Zp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Ha.Wt())])}(this._,t,e)}catch(t){throw _v(t,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fv(this._,t):fv.apply(void 0,c([this._,t,e],n))}catch(t){throw _v(t,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return pv(Lp((t=this._).firestore,Ld),[new iu(t.S_,Ha.Wt())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sv(e),i=Av(e,(function(e){return new Nv(t.firestore,new ov(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return lv(this._,r,i)},n.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lp(t,Up);var e=Lp(t.firestore,Ld),n=Rd(e),r=new hv(e);return function(t,e){var n=this,r=new yc;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Co(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof js?n.resolve(i):i instanceof Us?n.resolve(null):n.reject(new Uo(jo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=kc(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Nd(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new ov(e,r,t.S_,n,new iv(n instanceof js&&n.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Lp(t,Up);var e=Lp(t.firestore,Ld);return Cd(Rd(e),t.S_,{source:"server"}).then((function(n){return dv(e,t,n)}))}(this._):function(t){t=Lp(t,Up);var e=Lp(t.firestore,Ld);return Cd(Rd(e),t.S_).then((function(n){return dv(e,t,n)}))}(this._)).then((function(t){return new Nv(e.firestore,new ov(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))}))},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(qo);function _v(t,e,n){return t.message=t.message.replace(e,n),t}function Sv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ev(r))return r}return{}}function Av(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ev(t[0])?t[0]:ev(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Nv=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return e(n,t),Object.defineProperty(n.prototype,"ref",{get:function(){return new Tv(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this._.data(t)},n.prototype.get=function(t,e){return this._.get(t,e)},n.prototype.isEqual=function(t){return cv(this._,t._)},n}(qo),kv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.data=function(t){return this._.data(t)},n}(Nv),Ov=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new wv(e),r}return e(n,t),n.prototype.where=function(t,e,r){try{return new n(this.firestore,Gd(this._,function(t,e,n){var r=e,i=Hd("where",t);return new zd(i,r,n)}(t,e,r)))}catch(t){throw _v(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,Gd(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Hd("orderBy",t);return new Wd(r,n)}(t,e)))}catch(t){throw _v(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,Gd(this._,function(t){return Rp("limit",t),new Jd("limit",t,"F")}(t)))}catch(t){throw _v(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(t){try{return new n(this.firestore,Gd(this._,function(t){return Rp("limitToLast",t),new Jd("limitToLast",t,"L")}(t)))}catch(t){throw _v(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Gd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw _v(t,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Gd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw _v(t,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Gd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw _v(t,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Gd(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw _v(t,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return Gp(this._,t._)},n.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Lp(t,Fp);var e=Lp(t.firestore,Ld),n=Rd(e),r=new hv(e);return function(t,e){var n=this,r=new yc;return t.fs.ys((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,yf(t,e,!0)];case 1:return u=o.sent(),r=new Fl(e,u.Pc),i=r.dl(u.documents),s=r.Ti(i,!1),n.resolve(s.snapshot),[3,3];case 2:return a=o.sent(),u=kc(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Nd(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new av(e,r,t,n)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=Lp(t,Fp);var e=Lp(t.firestore,Ld),n=Rd(e),r=new hv(e);return Pd(n,t.C_,{source:"server"}).then((function(n){return new av(e,r,t,n)}))}(this._):function(t){t=Lp(t,Fp);var e=Lp(t.firestore,Ld),n=Rd(e),r=new hv(e);return Bd(t.C_),Pd(n,t.C_).then((function(n){return new av(e,r,t,n)}))}(this._)).then((function(t){return new Cv(e.firestore,new av(e.firestore._,e.Hf,e._,t.ud))}))},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Sv(e),i=Av(e,(function(e){return new Cv(t.firestore,new av(t.firestore._,t.Hf,t._,e.ud))}));return lv(this._,r,i)},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(qo),Dv=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return e(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new kv(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),n}(qo),Cv=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return e(n,t),Object.defineProperty(n.prototype,"query",{get:function(){return new Ov(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new kv(t.zf,e)}))},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Dv(e.zf,t)}))},n.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new kv(n.zf,r))}))},n.prototype.isEqual=function(t){return cv(this._,t._)},n}(qo),Pv=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return e(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this._.parent;return t?new Tv(this.firestore,t):null},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){try{return new Tv(this.firestore,void 0===t?Bp(this._):Bp(this._,t))}catch(t){throw _v(t,"doc()","CollectionReference.doc()")}},n.prototype.add=function(t){var e=this;return function(t,e){var n=Lp(t.firestore,Ld),r=Bp(t),i=nv(t.v_,e);return pv(n,[td(Zp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Ha.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new Tv(e.firestore,t)}))},n.prototype.isEqual=function(t){return Kp(this._,t._)},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(Ov);function xv(t){return t instanceof qo&&(t=t._),Lp(t,Up)}var Lv=function(t){function n(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Ap.bind.apply(Ap,c([void 0],e))))||this}return e(n,t),n.documentId=function(){return new n(os.lt().ot())},n.prototype.isEqual=function(t){return t instanceof qo&&(t=t._),t instanceof Ap&&this._.d_.isEqual(t.d_)},n}(qo),Rv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.serverTimestamp=function(){var t=new rd("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new ed("deleteField");return t._methodName="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new id("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new od("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=function(t){return new sd("increment",t)}(t);return e._methodName="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this._.isEqual(t._)},n}(qo);!function(){function t(){this.Pd={},this.yd=new yc,this.gd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.Pd={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.yd.promise.catch(t)},t.prototype.then=function(t,e){return this.yd.promise.then(t,e)},t.prototype.Ul=function(t){this.Ql(t),this.Pd.complete&&this.Pd.complete(),this.yd.resolve(t)},t.prototype.Wl=function(t){this.gd.taskState="Error",this.Pd.next&&this.Pd.next(this.gd),this.Pd.error&&this.Pd.error(t),this.yd.reject(t)},t.prototype.Ql=function(t){this.gd=t,this.Pd.next&&this.Pd.next(t)}}();var Mv,Vv={Firestore:bv,GeoPoint:zp,Timestamp:ts,Blob:Ko,Transaction:Iv,WriteBatch:Ev,DocumentReference:Tv,DocumentSnapshot:Nv,Query:Ov,QueryDocumentSnapshot:kv,QuerySnapshot:Cv,CollectionReference:Pv,FieldPath:Lv,FieldValue:Rv,setLogLevel:function(t){var e;e=t,To.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new k("firestore",(function(t){return function(t,e){return new bv(t,new Ld(t,e),new gv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Vv)))})(Mv=et),Mv.registerVersion("@firebase/firestore","2.1.1"),et.initializeApp({apiKey:"AIzaSyDCVEEs8VW7trSNeTLxxaPO1BQcW7ukp-g",authDomain:"to-do-fb901.firebaseapp.com",databaseURL:"https://to-do-fb901.firebaseio.com",projectId:"to-do-fb901",storageBucket:"to-do-fb901.appspot.com",messagingSenderId:"990229030522",appId:"1:990229030522:web:1a5253bcb763cc16923dc3",measurementId:"G-88LMHWCCZL"}),et.analytics();let jv=et.firestore();et.auth().setPersistence(et.auth.Auth.Persistence.LOCAL);const Uv=document.querySelector(".container"),Fv=new et.auth.GoogleAuthProvider;et.auth().onAuthStateChanged((function(t){if(t){let u=jv.collection("user-data").doc(t.uid);function e(){let t=document.querySelector(".wrapper");t.innerHTML='\n      <button  type="button" class="add-event-form">+</button>\n      <form class="event-form">\n        <input type="text" id="event" name="event" placeholder="Event" autocomplete="off">\n        <textarea type="text" id="description" name="description" placeholder="Description(Optional)"></textarea>\n        <label for="priority"></label>\n        <div class="in-form-wrapper">\n          <div class="filler">\n            <label for="priority">Priority : \n              <select name="priority" id="priority">\n                <option value="high">High</option>\n                <option value="medium">Medium</option>\n                <option value="low">Low</option>\n              </select>\n            </label>\n            <label for="date">Date :\n              <input type="date" id="date" name="date">\n            </label>\n            <label for="time">Time :\n              <input type="time" id="time" name="time">\n            </label>\n          </div>\n          <button class="event-submit" type="button">Add</button>\n        </div>\n      </form>';const e=t.querySelector(".add-event-form");t.querySelector(".event-submit").addEventListener("click",r,!1),e.addEventListener("click",(()=>{i(c.querySelector(".event-form"))}),!1)}a(Uv),function(){let t=document.createElement("div");t.classList.add("main-container"),t.innerHTML='\n      <div class="top-panel">\n        <div class="intro">\n          <h1>To-Do List</h1>\n          <div class="user-name"></div>\n        </div>\n        <button class="logout" type="submit">Logout</button>\n      </div>\n      <div class="status-panel">\n        <button type="button" class="pending-btn">Pending</button>\n        <button type="button" class="completed-btn">Completed</button>\n      </div>\n      <section class="wrapper">\n      </section>',Uv.appendChild(t)}(),e();const c=document.querySelector(".main-container"),h=c.querySelector(".logout"),f=c.querySelector(".user-name"),l=c.querySelector(".wrapper"),p=c.querySelector(".status-panel"),d=p.querySelector(".pending-btn"),v=p.querySelector(".completed-btn");let y,m="pending",g=0;function n(t){for(let e=1;e<=y;e++){let n,r="Event"+e,i=t.data()[r];null!=i&&(n=i.Estatus),n===m&&s(i,e)}}function r(t){t.preventDefault();let e=c.querySelector(".event-form"),n=new FormData(e),r=n.get("event"),i=n.get("description"),o=n.get("priority"),s=e.querySelector("#date").value,a=n.get("time");if(""===r)return void alert("Opps you forgot to mention the event");let h=(f=r,l=i,p=o,d=s,v=a,{getEname:()=>f,getEdesp:()=>l,getEpriority:()=>p,getEdate:()=>d,getEtime:()=>v});var f,l,p,d,v;y++,u.set({[`Event${y}`]:{Ename:h.getEname(),Edesp:h.getEdesp(),Epriority:h.getEpriority(),Edate:h.getEdate(),Etime:h.getEtime(),Estatus:"pending"},eventNumber:y},{merge:!0}).catch((function(t){console.error("Error writing document",t)})),e.style.display="none",e.reset()}function i(t){"flex"!==t.style.display?t.style.display="flex":t.style.display="none"}function o(){if(this.checked){let t=this.parentElement;t.classList.add("event-fade-out"),setTimeout((()=>{this.parentElement.style.display="none"}),300);let e=`Event${t.querySelector(".event-count-no").innerHTML}.Estatus`;u.update({[`${e}`]:"completed"}).catch((function(t){console.error("Error updating document: ",t)})),g=1}}function s(t,e){const n=document.querySelector(".wrapper"),r=document.createElement("div");let s=t.Ename,a=t.Edesp,u=t.Epriority,c=t.Edate,h=t.Etime;r.classList.add("event"),r.innerHTML=`<div class="event-count-no">${e}</div>\n      <div class="event-priority-color"></div>\n      <input type="checkbox" name="state" id="state" class="state" value="completed">\n      <div class="event-info">\n        <div class="short-event-info">\n          <span class="newEvent-display-name">${s}</span>\n          <span class="newEvent-display-date-time">\n            <span>${c}</span> <span>${h}</span>\n          </span>\n        </div>\n        <div class="full-event-info">\n          <span class="event-newEvent-display-description">${a}</span>\n        </div>\n      </div>`,n.appendChild(r),r.querySelector(".event-priority-color").classList.add(`event-priority-color-${u}`),function(t){t.addEventListener("click",(()=>{i(t.querySelector(".full-event-info")),screen.width<600&&i(t.querySelector(".newEvent-display-date-time"))})),t.querySelector(".state").addEventListener("change",o,!1)}(r)}h.addEventListener("click",(function(){et.auth().signOut().then((function(){location.reload()}),(function(t){alert(t.message),console.log(t)}))}),!1),d.addEventListener("click",(function(){a(l),e(),m="pending",u.get().then((function(t){n(t)})).catch((function(t){console.log("Error getting document:",t)})),v.classList.remove("status-panel-btn-focused"),d.classList.add("status-panel-btn-focused")}),!1),v.addEventListener("click",(function(){a(l),m="completed",u.get().then((function(t){n(t)})).catch((function(t){console.log("Error getting document:",t)})),d.classList.remove("status-panel-btn-focused"),v.classList.add("status-panel-btn-focused"),setTimeout((()=>{"completed"===m&&l.querySelectorAll(".event").forEach((t=>{let e=t.querySelector(".state");e.checked=!0,e.classList.add("event-fade-out"),e.addEventListener("click",(t=>{t.preventDefault()}))}))}),800)}),!1),d.classList.add("status-panel-btn-focused"),null==t.displayName?f.textContent=t.email:f.textContent=t.displayName,u.get().then((function(e){null==e.data()?(u.set({eventNumber:0,userEmail:t.email},{merge:!0}).catch((function(t){console.error("Error writing document",t)})),y=0):y=e.data().eventNumber})).catch((function(t){console.log("Error getting document:",t)})),u.onSnapshot((function(t){if(g)g=0;else if("Server"==(t.metadata.hasPendingWrites?"Local":"Server"))n(t);else{let e="Event"+y;s(t.data()[e],y)}}))}else{a(Uv);const t=document.createElement("div");t.classList.add("login-container"),t.innerHTML='\n    <div class="login">\n    <form class="login-form">\n      <label for="email">Email </label>\n      <input type="email" name="email" id="email"> \n      <label for="password">Password</label>\n      <input type="password" name="password" id="password">\n      <div class="login-error"></div>\n      <button class="email-sign-in">Log in</button>\n      <button class="email-sign-up">Sign up</button>\n    </form>\n    <button class="google-login" type="submit">\n      Google\n    </button>\n    <button class="demo-login" type="submit">\n      Demo\n    </button>',Uv.appendChild(t);const e=document.querySelector(".google-login"),n=document.querySelector(".login-form"),r=document.querySelector(".email-sign-up"),i=document.querySelector(".email-sign-in"),o=document.querySelector(".demo-login");e.addEventListener("click",(function(){et.auth().signInWithPopup(Fv).then((function(t){console.log("Logged In as : "+t)})).catch((function(t){console.log(t)}))}),!1),i.addEventListener("click",(function(t){t.preventDefault();let e=new FormData(n),r=e.get("email"),i=e.get("password");et.auth().signInWithEmailAndPassword(r,i).then((t=>{})).catch((t=>{n.querySelector(".login-error").innerHTML="!Couldn't find your Account<br> Try sign up if its your first time",console.log(t)}))}),!1),r.addEventListener("click",(function(t){t.preventDefault();let e=new FormData(n),r=e.get("email"),i=e.get("password");et.auth().createUserWithEmailAndPassword(r,i).then((t=>{})).catch((t=>{n.querySelector(".login-error").innerHTML=t.message,console.log(t.code),console.log(t.message)}))}),!1),o.addEventListener("click",(function(){et.auth().signInWithEmailAndPassword("demo@gmail.com","admin123").catch((t=>{alert(t.message),console.log(t)}))}),!1)}function a(t){for(;t.firstChild;)t.removeChild(t.firstChild)}}))})()})();